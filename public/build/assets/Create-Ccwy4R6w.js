import{p as B,r as v,c as a,a as c,b as g,h as _,w as p,d as t,e as l,o as i,t as o,k as w,f as V,T as C,F as S}from"./app-BAzZH7GZ.js";import{_ as A}from"./AppLayout-4MfulTDL.js";/* empty css            */import"./auth-BysJMb9A.js";import"./FlashToaster-Ci4DMZef.js";import"./ChevronDownIcon-XlQbJEkB.js";import"./UserIcon-CGMoGnvG.js";import"./DocumentTextIcon-CMK6amnj.js";import"./PhoneIcon-ZIaiO5dA.js";import"./EnvelopeIcon-CNc2UOAz.js";const N={class:"min-h-screen bg-gray-50 py-8"},T={class:"max-w-4xl mx-auto px-4"},D={key:0,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6"},P={class:"text-blue-800"},j={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg mb-6"},$={class:"text-red-800"},q={class:"bg-white rounded-lg shadow-sm p-6 md:p-8 space-y-8"},M={class:"grid md:grid-cols-2 gap-4"},F={class:"text-lg font-semibold text-gray-900"},E={class:"text-lg font-semibold text-gray-900"},H={class:"text-lg font-semibold text-gray-900"},O={class:"text-lg font-semibold text-gray-900"},z={class:"md:col-span-2"},L={class:"text-2xl font-bold text-primary"},Q={class:"border-t pt-6"},G={class:"bg-gray-50 rounded-lg p-4 space-y-2"},R={class:"flex justify-between items-center"},K={class:"flex items-center space-x-2"},J=["src","alt"],U={class:"font-semibold text-gray-900"},X={class:"flex justify-between"},W={class:"font-semibold text-gray-900"},Y={class:"flex justify-between"},Z={class:"font-semibold text-gray-900"},I={class:"flex justify-between"},tt={class:"font-semibold text-primary"},et={class:"flex justify-between"},st={class:"font-semibold text-gray-900"},nt={class:"border-t pt-6"},ot={class:"flex justify-center"},at={class:"bg-white p-4 rounded-lg border-2 border-gray-200"},it=["src"],rt={class:"border-t pt-6"},lt=["disabled"],dt={key:0},ct={key:1,class:"flex items-center justify-center"},gt={key:2},mt={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center"},_t={__name:"Create",props:{booking:{type:Object,required:!0},payment_info:{type:Object,required:!0},qr_url:{type:String,required:!0}},setup(n){const h=n,d=B({}),r=v(!1),m=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),u=s=>new Date(s).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),x=s=>s?`https://api.vietqr.io/img/${s}.png`:null,b=s=>s?s.bank_name&&s.bank_code?`${s.bank_name} (${s.bank_code})`:s.bank_name?s.bank_name:s.bank_code?y(s.bank_code):"":"",y=s=>({VCB:"Vietcombank",TCB:"Techcombank",BID:"BIDV",VTB:"VietinBank",ACB:"ACB",TPB:"TPBank",VPB:"VPBank",MSB:"MSB",HDB:"HDBank",VIB:"VIB",SHB:"SHB",STB:"Sacombank",OCB:"OCB",MB:"MB Bank",VCCB:"Viet Capital Bank",NAB:"Nam A Bank",BAB:"Bac A Bank",SCB:"SCB",VAB:"Viet A Bank",PGB:"PGBank",ABB:"An Bình",DAB:"Dong A Bank",EIB:"Eximbank",GPB:"GPBank",KLB:"Kienlongbank",LPB:"LienVietPostBank",NCB:"NCB",OJB:"OceanBank",PUB:"PublicBank",SEAB:"SeABank",VDB:"VietABank"})[s]||s,k=s=>{s.target.style.display="none"},f=()=>{r.value=!0,setTimeout(()=>{d.post(`/payment/${h.booking.id}/confirm`,{preserveScroll:!0,onFinish:()=>{r.value=!1}})},3e3)};return(s,e)=>(i(),a(S,null,[c(g(_),{title:"Thanh toán đặt phòng"}),c(A,null,{default:p(()=>[t("div",N,[t("div",T,[e[17]||(e[17]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Thanh toán đặt phòng"),t("p",{class:"text-gray-600 mt-1"},"Vui lòng quét mã QR để thanh toán")],-1)),s.$page.props.flash?.info?(i(),a("div",D,[t("p",P,o(s.$page.props.flash.info),1)])):l("",!0),s.$page.props.flash?.error?(i(),a("div",j,[t("p",$,o(s.$page.props.flash.error),1)])):l("",!0),t("div",q,[t("div",null,[e[5]||(e[5]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin đặt phòng",-1)),t("div",M,[t("div",null,[e[0]||(e[0]=t("p",{class:"text-sm text-gray-600"},"Mã đặt phòng",-1)),t("p",F,o(n.booking.booking_code),1)]),t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm text-gray-600"},"Nhà trọ",-1)),t("p",E,o(n.booking.house_name),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Phòng",-1)),t("p",H,"Phòng "+o(n.booking.room_number),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Thời gian",-1)),t("p",O,o(u(n.booking.start_date))+" - "+o(u(n.booking.end_date)),1)]),t("div",z,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Tổng tiền",-1)),t("p",L,o(m(n.booking.total_price)),1)])])]),t("div",Q,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin chuyển khoản",-1)),t("div",G,[t("div",R,[e[6]||(e[6]=t("span",{class:"text-gray-600"},"Ngân hàng:",-1)),t("div",K,[n.payment_info.bank_code?(i(),a("img",{key:0,src:x(n.payment_info.bank_code),alt:b(n.payment_info),class:"h-6 w-6 object-contain",onError:k},null,40,J)):l("",!0),t("span",U,o(b(n.payment_info)),1)])]),t("div",X,[e[7]||(e[7]=t("span",{class:"text-gray-600"},"Số tài khoản:",-1)),t("span",W,o(n.payment_info.bank_account_number),1)]),t("div",Y,[e[8]||(e[8]=t("span",{class:"text-gray-600"},"Tên chủ tài khoản:",-1)),t("span",Z,o(n.payment_info.bank_account_holder),1)]),t("div",I,[e[9]||(e[9]=t("span",{class:"text-gray-600"},"Số tiền:",-1)),t("span",tt,o(m(n.booking.total_price)),1)]),t("div",et,[e[10]||(e[10]=t("span",{class:"text-gray-600"},"Nội dung chuyển khoản:",-1)),t("span",st,o(n.booking.booking_code),1)])])]),t("div",nt,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4 text-center"},"Quét mã QR để thanh toán",-1)),t("div",ot,[t("div",at,[t("img",{src:n.qr_url,alt:"VietQR Code",class:"w-64 h-64 md:w-80 md:h-80"},null,8,it)])]),e[13]||(e[13]=t("p",{class:"text-center text-sm text-gray-600 mt-4"}," Vui lòng quét mã QR bằng ứng dụng ngân hàng của bạn để thanh toán ",-1))]),t("div",rt,[t("form",{onSubmit:w(f,["prevent"])},[t("button",{type:"submit",disabled:g(d).processing||r.value,class:"w-full px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-lg"},[!g(d).processing&&!r.value?(i(),a("span",dt,"Xác nhận đã chuyển khoản")):r.value?(i(),a("span",ct,[...e[14]||(e[14]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),V(" Đang kiểm tra thanh toán... ",-1)])])):(i(),a("span",gt,"Đang xử lý..."))],8,lt),e[15]||(e[15]=t("p",{class:"text-center text-sm text-gray-500 mt-2"}," Sau khi đã chuyển khoản thành công, vui lòng nhấn nút trên để xác nhận ",-1))],32)]),c(C,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[r.value?(i(),a("div",mt,[...e[16]||(e[16]=[t("div",{class:"bg-white rounded-lg p-8 max-w-md mx-4 text-center"},[t("svg",{class:"animate-spin h-12 w-12 text-primary mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Đang kiểm tra thanh toán"),t("p",{class:"text-sm text-gray-600"},"Vui lòng đợi trong giây lát...")],-1)])])):l("",!0)]),_:1})])])])]),_:1})],64))}};export{_t as default};
