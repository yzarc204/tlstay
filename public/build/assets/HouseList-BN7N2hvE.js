import{c as l,d as e,o as n,r as D,A as b,B as H,a as i,b as o,h as U,w as X,e as u,f as m,t as d,g as h,F as c,i as f,j as w,n as B,y as N,X as G,l as $}from"./app-ppQx7_BQ.js";import{_ as I}from"./AppLayout-Dce57s_x.js";import{_ as L}from"./HouseCard-DKN0YZ-E.js";import{g as K,b as q}from"./amenityIcons-D28qFCYA.js";import{a as T}from"./FlashToaster-DRaP0e7V.js";import{r as V}from"./MapPinIcon-L4fB1UUx.js";import{r as _}from"./ChevronDownIcon-DduOYqOw.js";import{r as E}from"./Squares2X2Icon-S2PGzFIi.js";import{r as O}from"./BuildingOfficeIcon-D5_B3Cmo.js";/* empty css            */import"./auth-Dd3eNE4X.js";import"./UserIcon-CSwJth4e.js";import"./DocumentTextIcon-BKIo3o-k.js";import"./PhoneIcon-CjeMPSAD.js";import"./EnvelopeIcon-5t1JJDL_.js";import"./HeartIcon-ByqfTEAb.js";function W(g,p){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const J={class:"house-list py-12 bg-light min-h-screen"},Q={class:"container mx-auto px-4"},Y={key:0,class:"mb-6 flex flex-wrap gap-2"},ee={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},te={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},re={key:2,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},se={class:"bg-white rounded-2xl shadow-md p-6 mb-8"},ae={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ne={class:"relative"},le=["value"],oe={class:"relative"},ie=["value"],de={class:"relative"},ue={class:"relative"},pe={class:"flex items-end space-x-2"},me={class:"flex items-center justify-between mb-6"},ce={class:"text-gray-600"},ge={class:"font-semibold text-secondary"},ye={key:0,class:"text-center py-20"},ve={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},fe={key:2,class:"space-y-6"},xe=["onClick"],be={class:"md:w-1/3 h-64 md:h-auto"},he=["src","alt"],we={class:"flex-1 p-6"},_e={class:"flex items-start justify-between mb-4"},ke={class:"text-2xl font-bold text-secondary mb-2"},Ce={class:"text-gray-600 flex items-center mb-1"},De={key:0,class:"flex items-center gap-2 text-sm text-gray-500"},$e={key:0},Te={key:1},Ve={key:2},Se={class:"badge bg-primary-100 text-primary-700"},Re={class:"flex flex-wrap gap-2 mb-4"},Fe={key:0,class:"badge bg-primary-50 text-primary flex items-center space-x-1.5"},Pe={class:"flex items-center justify-between pt-4 border-t"},Ae={class:"text-2xl font-bold text-primary"},We={__name:"HouseList",props:{houses:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},wards:{type:Array,default:()=>[]},streets:{type:Array,default:()=>[]}},setup(g){const p=g,y=D("grid"),v=D("default"),a=D({ward:p.filters?.ward||"",street:p.filters?.street||"",priceRange:p.filters?.priceRange||""}),S=b(()=>{if(!a.value.ward)return null;const s=p.wards.find(t=>t.name===a.value.ward);return s?s.id:null}),j=b(()=>S.value?p.streets.filter(s=>s.ward_id===S.value):p.streets);H(()=>a.value.ward,()=>{a.value.street=""});const R=b(()=>!!(a.value.ward||a.value.street||a.value.priceRange)),F=b(()=>{let s=[...p.houses];return v.value==="price-asc"?s.sort((t,r)=>t.pricePerDay-r.pricePerDay):v.value==="price-desc"?s.sort((t,r)=>r.pricePerDay-t.pricePerDay):v.value==="rating"&&s.sort((t,r)=>r.rating-t.rating),s}),M=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),Z=s=>s?s==="0-2000000"?"Dưới 2 triệu/ngày":s==="2000000-5000000"?"2 - 5 triệu/ngày":s==="5000000-10000000"?"5 - 10 triệu/ngày":s==="10000000+"?"Trên 10 triệu/ngày":s:"",x=()=>{const s=new URLSearchParams;a.value.ward&&s.append("ward",a.value.ward),a.value.street&&s.append("street",a.value.street),a.value.priceRange&&s.append("priceRange",a.value.priceRange);const t=s.toString();$.visit(`/houses${t?"?"+t:""}`,{preserveState:!0,preserveScroll:!0})},k=s=>{a.value[s]="",x()},P=()=>{a.value={ward:"",street:"",priceRange:""},$.visit("/houses",{preserveState:!1,preserveScroll:!0})},z=s=>{$.visit(`/houses/${s}`)};return(s,t)=>(n(),l(c,null,[i(o(U),{title:"Danh sách nhà trọ"}),i(I,null,{default:X(()=>[e("div",J,[e("div",Q,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("h1",{class:"text-4xl font-bold text-secondary mb-2"},"Danh sách nhà trọ"),e("p",{class:"text-gray-600"},"Tìm phòng trọ phù hợp với bạn")],-1)),R.value?(n(),l("div",Y,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-600 font-medium"},"Bộ lọc đang áp dụng:",-1)),a.value.ward?(n(),l("span",ee,[m(" Phường: "+d(a.value.ward)+" ",1),e("button",{onClick:t[0]||(t[0]=r=>k("ward")),class:"ml-2 hover:text-primary-900"},[i(o(T),{class:"w-4 h-4"})])])):u("",!0),a.value.street?(n(),l("span",te,[m(" Đường: "+d(a.value.street)+" ",1),e("button",{onClick:t[1]||(t[1]=r=>k("street")),class:"ml-2 hover:text-primary-900"},[i(o(T),{class:"w-4 h-4"})])])):u("",!0),a.value.priceRange?(n(),l("span",re,[m(" Giá: "+d(Z(a.value.priceRange))+" ",1),e("button",{onClick:t[2]||(t[2]=r=>k("priceRange")),class:"ml-2 hover:text-primary-900"},[i(o(T),{class:"w-4 h-4"})])])):u("",!0),R.value?(n(),l("button",{key:3,onClick:P,class:"text-sm text-red-600 hover:text-red-700 font-medium"}," Xóa tất cả bộ lọc ")):u("",!0)])):u("",!0),e("div",se,[e("div",ae,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên phường",-1)),e("div",ne,[i(o(V),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 z-10"}),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.ward=r),onChange:x,class:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[t[10]||(t[10]=e("option",{value:""},"Tất cả phường",-1)),(n(!0),l(c,null,f(g.wards,r=>(n(),l("option",{key:r.id,value:r.name},d(r.name),9,le))),128))],544),[[w,a.value.ward]]),i(o(_),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none z-10"})])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên đường",-1)),e("div",oe,[i(o(V),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 z-10"}),h(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.value.street=r),onChange:x,class:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[t[12]||(t[12]=e("option",{value:""},"Tất cả đường",-1)),(n(!0),l(c,null,f(j.value,r=>(n(),l("option",{key:r.id,value:r.name},d(r.name)+d(r.ward_name?` (${r.ward_name})`:""),9,ie))),128))],544),[[w,a.value.street]]),i(o(_),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none z-10"})])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Khoảng giá",-1)),e("div",de,[h(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>a.value.priceRange=r),onChange:x,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[...t[14]||(t[14]=[e("option",{value:""},"Tất cả mức giá",-1),e("option",{value:"0-2000000"},"Dưới 2 triệu/ngày",-1),e("option",{value:"2000000-5000000"},"2 - 5 triệu/ngày",-1),e("option",{value:"5000000-10000000"},"5 - 10 triệu/ngày",-1),e("option",{value:"10000000+"},"Trên 10 triệu/ngày",-1)])],544),[[w,a.value.priceRange]]),i(o(_),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sắp xếp",-1)),e("div",ue,[h(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>v.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[...t[16]||(t[16]=[e("option",{value:"default"},"Mặc định",-1),e("option",{value:"price-asc"},"Giá: Thấp đến cao",-1),e("option",{value:"price-desc"},"Giá: Cao đến thấp",-1),e("option",{value:"rating"},"Đánh giá cao nhất",-1)])],512),[[w,v.value]]),i(o(_),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})])]),e("div",pe,[e("button",{onClick:t[7]||(t[7]=r=>y.value="grid"),class:B(["flex-1 px-4 py-3 rounded-lg transition-all",y.value==="grid"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[i(o(E),{class:"w-5 h-5 mx-auto"})],2),e("button",{onClick:t[8]||(t[8]=r=>y.value="list"),class:B(["flex-1 px-4 py-3 rounded-lg transition-all",y.value==="list"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[i(o(W),{class:"w-5 h-5 mx-auto"})],2)])])]),e("div",me,[e("p",ce,[t[18]||(t[18]=m(" Tìm thấy ",-1)),e("span",ge,d(g.houses.length),1),t[19]||(t[19]=m(" nhà trọ ",-1))])]),e("div",null,[g.houses.length===0?(n(),l("div",ye,[i(o(O),{class:"w-24 h-24 mx-auto text-gray-300 mb-4"}),t[20]||(t[20]=e("h3",{class:"text-2xl font-bold text-gray-400 mb-2"},"Không tìm thấy nhà trọ",-1)),t[21]||(t[21]=e("p",{class:"text-gray-500 mb-4"},"Thử điều chỉnh bộ lọc của bạn",-1)),e("button",{onClick:P,class:"btn-primary"},"Xóa tất cả bộ lọc")])):y.value==="grid"?(n(),l("div",ve,[(n(!0),l(c,null,f(F.value,r=>(n(),N(L,{key:r.id,house:r},null,8,["house"]))),128))])):(n(),l("div",fe,[(n(!0),l(c,null,f(F.value,r=>(n(),l("div",{key:r.id,class:"card flex flex-col md:flex-row cursor-pointer hover:shadow-lg transition-shadow",onClick:A=>z(r.id)},[e("div",be,[e("img",{src:r.image,alt:r.name,class:"w-full h-full object-cover rounded-l-lg"},null,8,he)]),e("div",we,[e("div",_e,[e("div",null,[e("h3",ke,d(r.name),1),e("p",Ce,[i(o(V),{class:"w-5 h-5 mr-2"}),m(" "+d(r.address),1)]),r.ward_name||r.street_name?(n(),l("div",De,[r.ward_name?(n(),l("span",$e,d(r.ward_name),1)):u("",!0),r.ward_name&&r.street_name?(n(),l("span",Te,"•")):u("",!0),r.street_name?(n(),l("span",Ve,d(r.street_name),1)):u("",!0)])):u("",!0)]),e("span",Se,d(r.availableRooms)+" phòng trống ",1)]),e("div",Re,[(n(!0),l(c,null,f(r.amenities,(A,C)=>(n(),l(c,{key:C},[A?(n(),l("span",Fe,[(n(),N(G(o(K)(C)),{class:"w-4 h-4"})),e("span",null,d(o(q)(C)),1)])):u("",!0)],64))),128))]),e("div",Pe,[e("div",null,[e("p",Ae,[m(d(M(r.pricePerDay))+" ",1),t[22]||(t[22]=e("span",{class:"text-sm text-gray-500 font-normal"},"/ngày",-1))])]),t[23]||(t[23]=e("button",{class:"btn-secondary"},"Xem chi tiết",-1))])])],8,xe))),128))]))])])])]),_:1})],64))}};export{We as default};
