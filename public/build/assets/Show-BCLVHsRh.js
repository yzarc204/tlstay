import{c as r,d as e,o as n,r as k,a as i,b as o,h as V,w as g,e as u,q as K,f as x,y as f,t as a,n as b,F as _,i as L,k as $,g as H,v as F,l as C}from"./app-DkMcDY_j.js";import{_ as U}from"./AdminLayout-B47j-ur7.js";import{_ as v}from"./Button-D-AC1N9y.js";import{r as q}from"./ChevronLeftIcon-CE1IAL1X.js";import{r as z}from"./EnvelopeIcon-92plZQk_.js";import{r as A}from"./PhoneIcon-BclQ3jwF.js";import{r as w}from"./CalendarIcon-CYyGscdP.js";import{r as G}from"./IdentificationIcon-BFZM6KhV.js";import{r as O}from"./UserIcon-i10K0224.js";import{r as Q}from"./MapPinIcon-Bdg2GzGp.js";import{r as Z}from"./DocumentTextIcon-Br-0DCVn.js";import{r as E}from"./ShieldCheckIcon-dm1nN92w.js";/* empty css            */import"./FlashToaster-cbhzreBm.js";import"./PhotoIcon-vWwCUT0A.js";import"./BuildingOfficeIcon-CpNOb3Hr.js";function j(s,y){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})])}const R={class:"space-y-6"},I={class:"flex items-center justify-between"},J={class:"flex gap-2"},P={class:"bg-white rounded-lg shadow-sm p-6"},W={class:"flex items-start gap-6"},X={class:"flex-shrink-0"},Y={class:"h-20 w-20 rounded-full bg-primary/10 flex items-center justify-center"},ee={class:"text-3xl text-primary font-bold"},te={class:"flex-1"},se={class:"flex items-center gap-3 mb-2"},ne={class:"text-xl font-bold text-gray-900"},ae={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},re={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},ie={class:"space-y-2 text-sm text-gray-600"},le={class:"flex items-center gap-2"},de={key:0,class:"flex items-center gap-2"},oe={class:"flex items-center gap-2"},ue={key:1,class:"flex items-center gap-2 text-red-600"},ce={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},me={class:"text-sm text-red-700"},ge={class:"bg-white rounded-lg shadow-sm p-6"},xe={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={key:0,class:"flex items-start gap-3"},fe={class:"flex-shrink-0 mt-0.5"},be={class:"text-sm text-gray-900"},ve={key:1,class:"flex items-start gap-3"},ye={class:"flex-shrink-0 mt-0.5"},pe={class:"text-sm text-gray-900"},ke={key:2,class:"flex items-start gap-3"},we={class:"flex-shrink-0 mt-0.5"},_e={class:"text-sm text-gray-900"},$e={key:3,class:"flex items-start gap-3 md:col-span-2"},Ce={class:"flex-shrink-0 mt-0.5"},je={class:"flex-1"},Be={class:"text-sm text-gray-900"},Me={key:1,class:"text-center py-8 text-gray-500"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Te={class:"bg-white rounded-lg shadow-sm p-6"},Ne={class:"flex items-center justify-between"},De={class:"text-2xl font-bold text-gray-900 mt-1"},Ve={class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},Ke={class:"bg-white rounded-lg shadow-sm p-6"},Le={class:"flex items-center justify-between"},He={class:"text-2xl font-bold text-gray-900 mt-1"},Fe={class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},Ue={class:"bg-white rounded-lg shadow-sm p-6"},qe={class:"flex items-center justify-between"},ze={class:"bg-white rounded-lg shadow-sm p-6"},Ae={key:0,class:"space-y-4"},Ge={class:"flex items-center justify-between"},Oe={class:"font-medium text-gray-900"},Qe={class:"text-sm text-gray-500"},Ze={key:1,class:"text-center py-8 text-gray-500"},Ee={class:"flex items-center justify-center min-h-screen px-4"},Re={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},Ie={class:"mb-4"},Je={class:"flex justify-end gap-3"},mt={__name:"Show",props:{user:Object},setup(s){const y=s,c=k(!1),m=k(""),h=k(!1),B=()=>{m.value&&(h.value=!0,C.post(`/admin/users/${y.user.id}/ban`,{ban_reason:m.value},{preserveScroll:!0,onFinish:()=>{h.value=!1,c.value=!1,m.value=""}}))},M=()=>{confirm("Bạn có chắc chắn muốn mở khóa tài khoản này?")&&C.post(`/admin/users/${y.user.id}/unban`,{},{preserveScroll:!0})},p=l=>l?new Date(l).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",S=l=>l?new Date(l).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",T=l=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã ở",pending:"Chờ thanh toán",completed:"Đã kết thúc",cancelled:"Đã hủy"})[l]||l,N=l=>({upcoming:"bg-amber-100 text-amber-800 border border-amber-300",active:"bg-green-100 text-green-700",past:"bg-gray-100 text-gray-600",pending:"bg-yellow-100 text-yellow-700",completed:"bg-gray-100 text-gray-600",cancelled:"bg-red-100 text-red-700"})[l]||"bg-gray-100 text-gray-600",D=l=>({male:"Nam",female:"Nữ",other:"Khác"})[l]||l;return(l,t)=>(n(),r(_,null,[i(o(V),{title:"Chi tiết Tài khoản"}),i(U,{title:"Chi tiết Tài khoản"},{default:g(()=>[e("div",R,[e("div",I,[e("div",null,[i(o(K),{href:"/admin/users",class:"text-primary hover:text-primary-600 mb-2 inline-flex items-center text-sm"},{default:g(()=>[i(o(q),{class:"h-4 w-4 mr-1"}),t[5]||(t[5]=x(" Quay lại danh sách ",-1))]),_:1}),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Chi tiết Tài khoản",-1))]),e("div",J,[s.user.banned_at?(n(),f(v,{key:1,variant:"default",onClick:M},{default:g(()=>[...t[8]||(t[8]=[x(" Mở khóa tài khoản ",-1)])]),_:1})):(n(),f(v,{key:0,variant:"destructive",onClick:t[0]||(t[0]=d=>c.value=!0),disabled:s.user.role==="manager"||s.user.id===l.$page.props.auth.user.id},{default:g(()=>[...t[7]||(t[7]=[x(" Khóa tài khoản ",-1)])]),_:1},8,["disabled"]))])]),e("div",P,[e("div",W,[e("div",X,[e("div",Y,[e("span",ee,a(s.user.name.charAt(0).toUpperCase()),1)])]),e("div",te,[e("div",se,[e("h2",ne,a(s.user.name),1),e("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.user.role==="manager"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"])},a(s.user.role==="manager"?"Quản lý":"Khách hàng"),3),s.user.banned_at?(n(),r("span",ae," Đã khóa ")):(n(),r("span",re," Hoạt động "))]),e("div",ie,[e("div",le,[i(o(z),{class:"h-4 w-4"}),e("span",null,a(s.user.email),1)]),s.user.phone?(n(),r("div",de,[i(o(A),{class:"h-4 w-4"}),e("span",null,a(s.user.phone),1)])):u("",!0),e("div",oe,[i(o(w),{class:"h-4 w-4"}),e("span",null,"Tham gia: "+a(p(s.user.created_at)),1)]),s.user.banned_at?(n(),r("div",ue,[i(o(j),{class:"h-4 w-4"}),e("span",null,"Bị khóa vào: "+a(p(s.user.banned_at)),1)])):u("",!0)]),s.user.ban_reason?(n(),r("div",ce,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-red-800 mb-1"},"Lý do khóa:",-1)),e("p",me,a(s.user.ban_reason),1)])):u("",!0)])])]),e("div",ge,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin cá nhân",-1)),s.user.id_card_number||s.user.permanent_address||s.user.date_of_birth||s.user.gender?(n(),r("div",xe,[s.user.id_card_number?(n(),r("div",he,[e("div",fe,[i(o(G),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Số căn cước công dân",-1)),e("p",be,a(s.user.id_card_number),1)])])):u("",!0),s.user.date_of_birth?(n(),r("div",ve,[e("div",ye,[i(o(w),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Ngày sinh",-1)),e("p",pe,a(S(s.user.date_of_birth)),1)])])):u("",!0),s.user.gender?(n(),r("div",ke,[e("div",we,[i(o(O),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Giới tính",-1)),e("p",_e,a(D(s.user.gender)),1)])])):u("",!0),s.user.permanent_address?(n(),r("div",$e,[e("div",Ce,[i(o(Q),{class:"h-5 w-5 text-gray-400"})]),e("div",je,[t[13]||(t[13]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Địa chỉ thường trú",-1)),e("p",Be,a(s.user.permanent_address),1)])])):u("",!0)])):(n(),r("div",Me,[...t[14]||(t[14]=[e("p",{class:"text-sm"},"Chưa cập nhật thông tin cá nhân",-1)])]))]),e("div",Se,[e("div",Te,[e("div",Ne,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Tổng đặt phòng",-1)),e("p",De,a(s.user.bookings?.length||0),1)]),e("div",Ve,[i(o(w),{class:"h-6 w-6 text-blue-600"})])])]),e("div",Ke,[e("div",Le,[e("div",null,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Tổng hóa đơn",-1)),e("p",He,a(s.user.invoices?.length||0),1)]),e("div",Fe,[i(o(Z),{class:"h-6 w-6 text-green-600"})])])]),e("div",Ue,[e("div",qe,[e("div",null,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Trạng thái",-1)),e("p",{class:b(["text-lg font-semibold mt-1",s.user.banned_at?"text-red-600":"text-green-600"])},a(s.user.banned_at?"Đã khóa":"Hoạt động"),3)]),e("div",{class:b(["h-12 w-12 rounded-full flex items-center justify-center",s.user.banned_at?"bg-red-100":"bg-green-100"])},[s.user.banned_at?(n(),f(o(j),{key:1,class:"h-6 w-6 text-red-600"})):(n(),f(o(E),{key:0,class:"h-6 w-6 text-green-600"}))],2)])])]),e("div",ze,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Đặt phòng gần đây",-1)),s.user.bookings&&s.user.bookings.length>0?(n(),r("div",Ae,[(n(!0),r(_,null,L(s.user.bookings,d=>(n(),r("div",{key:d.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[e("div",Ge,[e("div",null,[e("p",Oe,a(d.booking_code?`Mã: ${d.booking_code}`:`Đặt phòng #${d.id}`),1),e("p",Qe,a(p(d.created_at)),1)]),e("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",N(d.booking_status||d.status)])},a(T(d.booking_status||d.status)),3)])]))),128))])):(n(),r("div",Ze,[...t[19]||(t[19]=[e("p",null,"Chưa có đặt phòng nào",-1)])]))]),c.value?(n(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=$(d=>c.value=!1,["self"]))},[e("div",Ee,[e("div",{class:"fixed inset-0 bg-black opacity-50",onClick:t[1]||(t[1]=d=>c.value=!1)}),e("div",Re,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Khóa tài khoản",-1)),e("form",{onSubmit:$(B,["prevent"])},[e("div",Ie,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[x(" Lý do khóa "),e("span",{class:"text-red-500"},"*")],-1)),H(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>m.value=d),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập lý do khóa tài khoản...",required:""},null,512),[[F,m.value]])]),e("div",Je,[i(v,{type:"button",variant:"outline",onClick:t[3]||(t[3]=d=>c.value=!1)},{default:g(()=>[...t[22]||(t[22]=[x(" Hủy ",-1)])]),_:1}),i(v,{type:"submit",variant:"destructive",disabled:!m.value||h.value},{default:g(()=>[x(a(h.value?"Đang xử lý...":"Khóa tài khoản"),1)]),_:1},8,["disabled"])])],32)])])])):u("",!0)])]),_:1})],64))}};export{mt as default};
