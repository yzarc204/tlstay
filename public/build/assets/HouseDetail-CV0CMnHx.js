import{c as a,d as e,o as i,u as V,r as $,A as g,B as D,a as l,b as n,h as z,w as j,e as m,t as d,F as b,i as A,y as p,X as F,f,q,l as B}from"./app-6d472UTg.js";import{u as E,_ as G}from"./AppLayout-DCJsWtxu.js";import{g as O,b as S}from"./amenityIcons-UnAfuAb6.js";import{_ as U,a as W}from"./ReviewItem-CsFi46JF.js";import{r as X}from"./ChevronLeftIcon-BvqHLeBb.js";import{r as Z}from"./ChevronRightIcon-C1YTxX0m.js";import{r as J}from"./MapPinIcon-7FxdwOJS.js";import{r as K}from"./StarIcon-zOzIwZMd.js";import{r as Q}from"./HeartIcon-BGrPpTqv.js";import{r as Y}from"./BuildingOfficeIcon-SYNwqpRa.js";import{b as H}from"./FlashToaster-zRPyk37K.js";import{r as ee}from"./CheckCircleIcon-CUTWnm4U.js";import{r as te}from"./MapIcon-DJvObyX2.js";import{r as se}from"./CalendarIcon-DWvWcjC0.js";import{r as C}from"./PhoneIcon-D-3M1N6E.js";import{r as re}from"./EnvelopeIcon-DA50D0Nd.js";/* empty css            */import"./auth-ePhw5Ljw.js";import"./ChevronDownIcon-Cp7WrXLc.js";import"./UserIcon-Chrmp5Vj.js";import"./DocumentTextIcon-CGuA7S-s.js";import"./PhotoIcon-B8t2eVA4.js";function oe(s,r){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function ie(s,r){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}const ne={class:"house-detail bg-light min-h-screen"},ae={key:0,class:"container mx-auto px-4 py-20 text-center"},le={key:1,class:"pb-12"},de={class:"relative h-96 md:h-[500px] bg-gray-900 overflow-hidden"},ce=["src","alt"],ue={class:"container mx-auto px-4 -mt-20 relative z-10"},me={class:"grid lg:grid-cols-3 gap-8"},he={class:"lg:col-span-2"},ge={class:"card p-8 mb-6"},xe={class:"flex items-start justify-between mb-6"},fe={class:"text-3xl md:text-4xl font-bold text-secondary mb-3"},ye={class:"flex items-center text-gray-600 mb-2"},ve={class:"flex items-center space-x-4"},be={class:"flex items-center"},pe={class:"font-semibold"},we={class:"text-gray-500 ml-1"},_e={class:"badge bg-primary-100 text-primary-700"},ke={class:"w-12 h-12 bg-secondary-50 rounded-full flex items-center justify-center hover:bg-secondary hover:text-white transition-all"},$e={class:"grid grid-cols-3 gap-4 py-6 border-y"},je={class:"text-center"},Ae={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Be={class:"text-2xl font-bold text-primary"},Ce={class:"text-center"},Ie={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Te={class:"text-2xl font-bold text-primary"},Ne={class:"text-center"},Le={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Pe={class:"text-2xl font-bold text-primary"},Re={class:"mt-6"},Me={class:"text-gray-600 leading-relaxed"},Ve={class:"mt-8"},De={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ze={class:"text-gray-700"},Fe={key:1,class:"text-center py-8 text-gray-500"},qe={class:"mt-8"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Oe={class:"flex items-center space-x-3"},Se={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Ue={class:"flex items-center space-x-3"},We={class:"mt-8"},Xe={key:0,class:"rounded-xl overflow-hidden shadow-lg"},Ze=["src"],Je={key:1,class:"bg-gray-200 rounded-xl h-80 flex items-center justify-center"},Ke={class:"text-center"},Qe={class:"mt-8"},Ye={class:"text-2xl font-bold text-secondary mb-4"},He={key:1,class:"space-y-6 mt-6"},et={key:2,class:"text-center py-8 text-gray-500"},tt={class:"lg:col-span-1"},st={class:"card p-6 sticky top-24"},rt={class:"mb-6"},ot={class:"space-y-3"},it={class:"flex items-center justify-between p-3 bg-light rounded-lg"},nt={class:"font-bold text-secondary"},at={class:"flex items-center justify-between p-3 bg-light rounded-lg"},lt={class:"text-right"},dt={class:"font-bold text-secondary"},ct={class:"flex items-center justify-between p-3 bg-primary/10 rounded-lg border-2 border-primary"},ut={class:"text-right"},mt={class:"font-bold text-primary text-lg"},ht={class:"w-full btn-outline"},gt={key:0,class:"text-sm text-center text-gray-500 mt-4"},xt={key:1,class:"mt-6 pt-6 border-t"},ft={class:"space-y-2 text-sm text-gray-600"},yt={class:"font-semibold text-gray-900 mb-2"},vt={key:0,class:"flex items-center"},bt=["href"],pt={key:1,class:"flex items-center"},wt=["href"],St={__name:"HouseDetail",props:{house:{type:Object,default:null},rooms:{type:Array,default:()=>[]},reviews:{type:Array,default:()=>[]},canReview:{type:Boolean,default:!1},reviewableBookingId:{type:Number,default:null}},setup(s){V();const r=s,{isAuthenticated:w}=E(),h=$(""),c=$(0),_=g(()=>r.house?.amenities?Array.isArray(r.house.amenities)?r.house.amenities.filter(Boolean):typeof r.house.amenities=="object"?Object.keys(r.house.amenities).filter(o=>r.house.amenities[o]):[]:[]);D(()=>r.house,o=>{if(o){const t=o.featured_images&&Array.isArray(o.featured_images)&&o.featured_images.length>0?o.featured_images:Array.isArray(o.images)&&o.images.length>0?o.images:[];t.length>0?(h.value=t[0],c.value=0):(h.value=o.image||"",c.value=0)}},{immediate:!0});const k=(o,t)=>{if(!o||!t)return 0;const u=o*t;let v=0;return t>=30?v=.2:t>=7&&(v=.1),Math.round(u*(1-v))},I=g(()=>r.house?k(r.house.pricePerDay,7):0),T=g(()=>r.house?k(r.house.pricePerDay,30):0),N=g(()=>{if(!r.house?.latitude||!r.house?.longitude)return"";const o=r.house.latitude,t=r.house.longitude;return`https://www.google.com/maps?q=${o},${t}&hl=vi&z=15&output=embed`}),x=g(()=>r.house?r.house.featured_images&&Array.isArray(r.house.featured_images)&&r.house.featured_images.length>0?r.house.featured_images:r.house.images&&Array.isArray(r.house.images)&&r.house.images.length>0?r.house.images:r.house.image?[r.house.image]:[]:[]),L=()=>{const o=x.value;!o||o.length===0||(c.value=(c.value+1)%o.length,h.value=o[c.value])},P=()=>{const o=x.value;!o||o.length===0||(c.value=c.value===0?o.length-1:c.value-1,h.value=o[c.value])},y=o=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o),R=()=>{r.house?.id&&B.visit(`/booking/${r.house.id}`)},M=()=>{B.reload({only:["reviews","canReview","reviewableBookingId"],preserveScroll:!0})};return(o,t)=>(i(),a(b,null,[l(n(z),{title:s.house?.name||"Chi tiết nhà trọ"},null,8,["title"]),l(G,null,{default:j(()=>[e("div",ne,[s.house?(i(),a("div",le,[e("div",de,[e("img",{src:h.value||s.house.image,alt:s.house.name,class:"w-full h-full object-cover transition-opacity duration-300"},null,8,ce),x.value.length>1?(i(),a("button",{key:0,onClick:P,class:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[l(n(X),{class:"w-6 h-6 text-gray-800"})])):m("",!0),x.value.length>1?(i(),a("button",{key:1,onClick:L,class:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[l(n(Z),{class:"w-6 h-6 text-gray-800"})])):m("",!0)]),e("div",ue,[e("div",me,[e("div",he,[e("div",ge,[e("div",xe,[e("div",null,[e("h1",fe,d(s.house.name),1),e("div",ye,[l(n(J),{class:"w-5 h-5 mr-2"}),e("span",null,d(s.house.address),1)]),e("div",ve,[e("div",be,[l(n(K),{class:"w-5 h-5 text-yellow-400 mr-1"}),e("span",pe,d(s.house.rating),1),e("span",we,"("+d(s.house.reviews)+" reviews)",1)]),e("span",_e,d(s.house.availableRooms)+" phòng trống ",1)])]),e("button",ke,[l(n(Q),{class:"w-6 h-6"})])]),e("div",$e,[e("div",je,[e("div",Ae,[l(n(Y),{class:"w-6 h-6 text-primary"})]),e("p",Be,d(s.house.floors),1),t[1]||(t[1]=e("p",{class:"text-sm text-gray-600"},"Tầng",-1))]),e("div",Ce,[e("div",Ie,[l(n(H),{class:"w-6 h-6 text-primary"})]),e("p",Te,d(s.house.totalRooms),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-600"},"Tổng phòng",-1))]),e("div",Ne,[e("div",Le,[l(n(ee),{class:"w-6 h-6 text-primary"})]),e("p",Pe,d(s.house.availableRooms),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-600"},"Còn trống",-1))])]),e("div",Re,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Mô tả",-1)),e("p",Me,d(s.house.description),1)]),e("div",Ve,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Tiện nghi",-1)),_.value.length>0?(i(),a("div",De,[(i(!0),a(b,null,A(_.value,u=>(i(),a("div",{key:u,class:"flex items-center space-x-3 p-3 bg-light rounded-lg hover:bg-gray-50 transition-colors"},[(i(),p(F(n(O)(u)),{class:"w-5 h-5 text-primary flex-shrink-0"})),e("span",ze,d(n(S)(u)),1)]))),128))])):(i(),a("div",Fe,[...t[5]||(t[5]=[e("p",null,"Chưa có thông tin tiện nghi",-1)])]))]),e("div",qe,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Giá dịch vụ",-1)),t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-4"},"Áp dụng cho gói thuê theo tháng",-1)),e("div",Ee,[e("div",Ge,[e("div",Oe,[l(n(ie),{class:"w-6 h-6 text-yellow-500"}),t[7]||(t[7]=e("div",null,[e("p",{class:"font-semibold text-gray-800"},"Điện"),e("p",{class:"text-sm text-gray-500"},"Tính theo số điện")],-1))]),t[8]||(t[8]=e("span",{class:"font-bold text-secondary text-lg"},"4.000đ / số",-1))]),e("div",Se,[e("div",Ue,[l(n(oe),{class:"w-6 h-6 text-blue-500"}),t[9]||(t[9]=e("div",null,[e("p",{class:"font-semibold text-gray-800"},"Nước"),e("p",{class:"text-sm text-gray-500"},"Tính theo khối")],-1))]),t[10]||(t[10]=e("span",{class:"font-bold text-secondary text-lg"},"25.000đ / khối",-1))])])]),e("div",We,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Vị trí",-1)),s.house.latitude&&s.house.longitude?(i(),a("div",Xe,[e("iframe",{src:N.value,width:"100%",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"w-full"},null,8,Ze)])):(i(),a("div",Je,[e("div",Ke,[l(n(te),{class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),t[13]||(t[13]=e("p",{class:"text-gray-500"},"Thông tin vị trí chưa có sẵn",-1))])]))]),e("div",Qe,[e("h2",Ye,"Đánh giá ("+d(s.reviews?.length||0)+")",1),s.canReview&&n(w)&&s.reviewableBookingId?(i(),p(U,{key:0,"booking-id":s.reviewableBookingId,"house-id":s.house.id,onReviewCreated:M},null,8,["booking-id","house-id"])):m("",!0),s.reviews&&s.reviews.length>0?(i(),a("div",He,[(i(!0),a(b,null,A(s.reviews,u=>(i(),p(W,{key:u.id,review:u},null,8,["review"]))),128))])):(i(),a("div",et,[...t[15]||(t[15]=[e("p",null,"Chưa có đánh giá nào",-1)])]))])])]),e("div",tt,[e("div",st,[e("div",rt,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-600 mb-2"},"Giá thuê",-1)),e("div",ot,[e("div",it,[t[16]||(t[16]=e("span",{class:"text-gray-700"},"Theo ngày",-1)),e("span",nt,d(y(s.house.pricePerDay)),1)]),e("div",at,[t[18]||(t[18]=e("span",{class:"text-gray-700"},"Theo tuần",-1)),e("div",lt,[e("span",dt,d(y(I.value)),1),t[17]||(t[17]=e("span",{class:"text-xs text-primary ml-2"},"(-10%)",-1))])]),e("div",ct,[t[20]||(t[20]=e("span",{class:"text-gray-700"},"Theo tháng",-1)),e("div",ut,[e("span",mt,d(y(T.value)),1),t[19]||(t[19]=e("span",{class:"text-xs text-primary ml-2"},"(-20%)",-1))])])])]),e("button",{onClick:R,class:"w-full btn-primary mb-3"},[l(n(se),{class:"w-5 h-5 inline mr-2"}),t[22]||(t[22]=f(" Đặt phòng ngay ",-1))]),e("button",ht,[l(n(C),{class:"w-5 h-5 inline mr-2"}),t[23]||(t[23]=f(" Liên hệ ",-1))]),n(w)?m("",!0):(i(),a("p",gt,[l(n(q),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:j(()=>[...t[24]||(t[24]=[f(" Đăng nhập ",-1)])]),_:1}),t[25]||(t[25]=f(" để đặt phòng ",-1))])),s.house.owner?(i(),a("div",xt,[t[26]||(t[26]=e("h3",{class:"font-semibold text-gray-800 mb-3"},"Thông tin liên hệ",-1)),e("div",ft,[e("p",yt,d(s.house.owner.name),1),s.house.owner.phone?(i(),a("p",vt,[l(n(C),{class:"w-4 h-4 mr-2"}),e("a",{href:`tel:${s.house.owner.phone}`,class:"hover:text-primary"},d(s.house.owner.phone),9,bt)])):m("",!0),s.house.owner.email?(i(),a("p",pt,[l(n(re),{class:"w-4 h-4 mr-2"}),e("a",{href:`mailto:${s.house.owner.email}`,class:"hover:text-primary break-all"},d(s.house.owner.email),9,wt)])):m("",!0)])])):m("",!0)])])])])])):(i(),a("div",ae,[...t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin nhà trọ...",-1)])]))])]),_:1})],64))}};export{St as default};
