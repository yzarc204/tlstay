import{c as a,d as t,o as i,u as S,A as m,r as B,B as E,a as l,b as n,h as F,w as C,e as h,t as d,F as b,i as I,y as w,X as q,f as g,q as G,l as T}from"./app-BdvrGfPi.js";import{u as O,_ as U}from"./AppLayout-BAX4DMM8.js";import{g as W,b as X}from"./amenityIcons-B8vimcpO.js";import{_ as Z,a as J}from"./ReviewItem-wiVuQx46.js";import{r as K}from"./ChevronLeftIcon-D1zwSkzB.js";import{r as Q}from"./ChevronRightIcon-BOlecxHw.js";import{r as Y}from"./MapPinIcon-nqipV6id.js";import{r as H}from"./StarIcon-ChL_dfro.js";import{r as tt}from"./HeartIcon-DxdqszTv.js";import{r as et}from"./BuildingOfficeIcon-CEx4fCQM.js";import{b as st}from"./FlashToaster-hPDfO9im.js";import{r as rt}from"./CheckCircleIcon-BWD_mS_3.js";import{r as ot}from"./MapIcon-BBa_WVtT.js";import{r as it}from"./CalendarIcon-MSb10H2b.js";import{r as N}from"./PhoneIcon-BpYhuJpP.js";import{r as nt}from"./EnvelopeIcon-CJ62BL6y.js";/* empty css            */import"./auth-CJFPJgpe.js";import"./ChevronDownIcon-uT6iWfgT.js";import"./UserIcon-vcAtQEth.js";import"./DocumentTextIcon-DPzBDB88.js";import"./PhotoIcon-CRNKT6Rd.js";function at(o,f){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function lt(o,f){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}const dt={class:"house-detail bg-light min-h-screen"},ct={key:0,class:"container mx-auto px-4 py-20 text-center"},ut={key:1,class:"pb-12"},mt={class:"relative h-96 md:h-[500px] bg-gray-900 overflow-hidden"},ht=["src","alt"],gt={class:"container mx-auto px-4 -mt-20 relative z-10"},xt={class:"grid lg:grid-cols-3 gap-8"},ft={class:"lg:col-span-2"},yt={class:"card p-8 mb-6"},vt={class:"flex items-start justify-between mb-6"},pt={class:"text-3xl md:text-4xl font-bold text-secondary mb-3"},bt={class:"flex items-center text-gray-600 mb-2"},wt={class:"flex items-center space-x-4"},_t={class:"flex items-center"},kt={class:"font-semibold"},jt={class:"text-gray-500 ml-1"},At={class:"badge bg-primary-100 text-primary-700"},$t={class:"w-12 h-12 bg-secondary-50 rounded-full flex items-center justify-center hover:bg-secondary hover:text-white transition-all"},Bt={class:"grid grid-cols-3 gap-4 py-6 border-y"},Ct={class:"text-center"},It={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Tt={class:"text-2xl font-bold text-primary"},Nt={class:"text-center"},Lt={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Pt={class:"text-2xl font-bold text-primary"},Rt={class:"text-center"},Mt={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Vt={class:"text-2xl font-bold text-primary"},Dt={class:"mt-6"},zt={class:"text-gray-600 leading-relaxed"},St={class:"mt-8"},Et={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ft={class:"text-gray-700"},qt={key:1,class:"text-center py-8 text-gray-500"},Gt={class:"mt-8"},Ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Wt={class:"flex items-center space-x-3"},Xt={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Zt={class:"flex items-center space-x-3"},Jt={class:"mt-8"},Kt={key:0,class:"rounded-xl overflow-hidden shadow-lg"},Qt=["src"],Yt={key:1,class:"bg-gray-200 rounded-xl h-80 flex items-center justify-center"},Ht={class:"text-center"},te={class:"mt-8"},ee={class:"text-2xl font-bold text-secondary mb-4"},se={key:1,class:"space-y-6 mt-6"},re={key:2,class:"text-center py-8 text-gray-500"},oe={class:"lg:col-span-1"},ie={class:"card p-6 sticky top-24"},ne={class:"mb-6"},ae={class:"space-y-3"},le={class:"flex items-center justify-between p-3 bg-light rounded-lg"},de={class:"font-bold text-secondary"},ce={class:"flex items-center justify-between p-3 bg-light rounded-lg"},ue={class:"text-right"},me={class:"font-bold text-secondary"},he={class:"flex items-center justify-between p-3 bg-primary/10 rounded-lg border-2 border-primary"},ge={class:"text-right"},xe={class:"font-bold text-primary text-lg"},fe={class:"w-full btn-outline"},ye={key:0,class:"text-sm text-center text-gray-500 mt-4"},ve={class:"mt-6 pt-6 border-t"},pe={class:"space-y-2 text-sm text-gray-600"},be={key:0,class:"flex items-center"},we={key:1,class:"flex items-center"},Oe={__name:"HouseDetail",props:{house:{type:Object,default:null},rooms:{type:Array,default:()=>[]},reviews:{type:Array,default:()=>[]},canReview:{type:Boolean,default:!1},reviewableBookingId:{type:Number,default:null}},setup(o){const f=S(),_=m(()=>f.props?.siteSettings?.contact_phone||"+84 123 456 789"),k=m(()=>f.props?.siteSettings?.contact_email||"contact@tlstay.com"),r=o,{isAuthenticated:j}=O(),x=B(""),c=B(0),A=m(()=>r.house?.amenities?Array.isArray(r.house.amenities)?r.house.amenities.filter(Boolean):typeof r.house.amenities=="object"?Object.keys(r.house.amenities).filter(s=>r.house.amenities[s]):[]:[]);E(()=>r.house,s=>{if(s){const e=s.featured_images&&Array.isArray(s.featured_images)&&s.featured_images.length>0?s.featured_images:Array.isArray(s.images)&&s.images.length>0?s.images:[];e.length>0?(x.value=e[0],c.value=0):(x.value=s.image||"",c.value=0)}},{immediate:!0});const $=(s,e)=>{if(!s||!e)return 0;const u=s*e;let p=0;return e>=30?p=.2:e>=7&&(p=.1),Math.round(u*(1-p))},L=m(()=>r.house?$(r.house.pricePerDay,7):0),P=m(()=>r.house?$(r.house.pricePerDay,30):0),R=m(()=>{if(!r.house?.latitude||!r.house?.longitude)return"";const s=r.house.latitude,e=r.house.longitude;return`https://www.google.com/maps?q=${s},${e}&hl=vi&z=15&output=embed`}),y=m(()=>r.house?r.house.featured_images&&Array.isArray(r.house.featured_images)&&r.house.featured_images.length>0?r.house.featured_images:r.house.images&&Array.isArray(r.house.images)&&r.house.images.length>0?r.house.images:r.house.image?[r.house.image]:[]:[]),M=()=>{const s=y.value;!s||s.length===0||(c.value=(c.value+1)%s.length,x.value=s[c.value])},V=()=>{const s=y.value;!s||s.length===0||(c.value=c.value===0?s.length-1:c.value-1,x.value=s[c.value])},v=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s),D=()=>{r.house?.id&&T.visit(`/booking/${r.house.id}`)},z=()=>{T.reload({only:["reviews","canReview","reviewableBookingId"],preserveScroll:!0})};return(s,e)=>(i(),a(b,null,[l(n(F),{title:o.house?.name||"Chi tiết nhà trọ"},null,8,["title"]),l(U,null,{default:C(()=>[t("div",dt,[o.house?(i(),a("div",ut,[t("div",mt,[t("img",{src:x.value||o.house.image,alt:o.house.name,class:"w-full h-full object-cover transition-opacity duration-300"},null,8,ht),y.value.length>1?(i(),a("button",{key:0,onClick:V,class:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[l(n(K),{class:"w-6 h-6 text-gray-800"})])):h("",!0),y.value.length>1?(i(),a("button",{key:1,onClick:M,class:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[l(n(Q),{class:"w-6 h-6 text-gray-800"})])):h("",!0)]),t("div",gt,[t("div",xt,[t("div",ft,[t("div",yt,[t("div",vt,[t("div",null,[t("h1",pt,d(o.house.name),1),t("div",bt,[l(n(Y),{class:"w-5 h-5 mr-2"}),t("span",null,d(o.house.address),1)]),t("div",wt,[t("div",_t,[l(n(H),{class:"w-5 h-5 text-yellow-400 mr-1"}),t("span",kt,d(o.house.rating),1),t("span",jt,"("+d(o.house.reviews)+" reviews)",1)]),t("span",At,d(o.house.availableRooms)+" phòng trống ",1)])]),t("button",$t,[l(n(tt),{class:"w-6 h-6"})])]),t("div",Bt,[t("div",Ct,[t("div",It,[l(n(et),{class:"w-6 h-6 text-primary"})]),t("p",Tt,d(o.house.floors),1),e[1]||(e[1]=t("p",{class:"text-sm text-gray-600"},"Tầng",-1))]),t("div",Nt,[t("div",Lt,[l(n(st),{class:"w-6 h-6 text-primary"})]),t("p",Pt,d(o.house.totalRooms),1),e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Tổng phòng",-1))]),t("div",Rt,[t("div",Mt,[l(n(rt),{class:"w-6 h-6 text-primary"})]),t("p",Vt,d(o.house.availableRooms),1),e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Còn trống",-1))])]),t("div",Dt,[e[4]||(e[4]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Mô tả",-1)),t("p",zt,d(o.house.description),1)]),t("div",St,[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Tiện nghi",-1)),A.value.length>0?(i(),a("div",Et,[(i(!0),a(b,null,I(A.value,u=>(i(),a("div",{key:u,class:"flex items-center space-x-3 p-3 bg-light rounded-lg hover:bg-gray-50 transition-colors"},[(i(),w(q(n(W)(u)),{class:"w-5 h-5 text-primary flex-shrink-0"})),t("span",Ft,d(n(X)(u)),1)]))),128))])):(i(),a("div",qt,[...e[5]||(e[5]=[t("p",null,"Chưa có thông tin tiện nghi",-1)])]))]),t("div",Gt,[e[11]||(e[11]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Giá dịch vụ",-1)),e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 mb-4"},"Áp dụng cho gói thuê theo tháng",-1)),t("div",Ot,[t("div",Ut,[t("div",Wt,[l(n(lt),{class:"w-6 h-6 text-yellow-500"}),e[7]||(e[7]=t("div",null,[t("p",{class:"font-semibold text-gray-800"},"Điện"),t("p",{class:"text-sm text-gray-500"},"Tính theo số điện")],-1))]),e[8]||(e[8]=t("span",{class:"font-bold text-secondary text-lg"},"4.000đ / số",-1))]),t("div",Xt,[t("div",Zt,[l(n(at),{class:"w-6 h-6 text-blue-500"}),e[9]||(e[9]=t("div",null,[t("p",{class:"font-semibold text-gray-800"},"Nước"),t("p",{class:"text-sm text-gray-500"},"Tính theo khối")],-1))]),e[10]||(e[10]=t("span",{class:"font-bold text-secondary text-lg"},"25.000đ / khối",-1))])])]),t("div",Jt,[e[14]||(e[14]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Vị trí",-1)),o.house.latitude&&o.house.longitude?(i(),a("div",Kt,[t("iframe",{src:R.value,width:"100%",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"w-full"},null,8,Qt)])):(i(),a("div",Yt,[t("div",Ht,[l(n(ot),{class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),e[13]||(e[13]=t("p",{class:"text-gray-500"},"Thông tin vị trí chưa có sẵn",-1))])]))]),t("div",te,[t("h2",ee,"Đánh giá ("+d(o.reviews?.length||0)+")",1),o.canReview&&n(j)&&o.reviewableBookingId?(i(),w(Z,{key:0,"booking-id":o.reviewableBookingId,"house-id":o.house.id,onReviewCreated:z},null,8,["booking-id","house-id"])):h("",!0),o.reviews&&o.reviews.length>0?(i(),a("div",se,[(i(!0),a(b,null,I(o.reviews,u=>(i(),w(J,{key:u.id,review:u},null,8,["review"]))),128))])):(i(),a("div",re,[...e[15]||(e[15]=[t("p",null,"Chưa có đánh giá nào",-1)])]))])])]),t("div",oe,[t("div",ie,[t("div",ne,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-600 mb-2"},"Giá thuê",-1)),t("div",ae,[t("div",le,[e[16]||(e[16]=t("span",{class:"text-gray-700"},"Theo ngày",-1)),t("span",de,d(v(o.house.pricePerDay)),1)]),t("div",ce,[e[18]||(e[18]=t("span",{class:"text-gray-700"},"Theo tuần",-1)),t("div",ue,[t("span",me,d(v(L.value)),1),e[17]||(e[17]=t("span",{class:"text-xs text-primary ml-2"},"(-10%)",-1))])]),t("div",he,[e[20]||(e[20]=t("span",{class:"text-gray-700"},"Theo tháng",-1)),t("div",ge,[t("span",xe,d(v(P.value)),1),e[19]||(e[19]=t("span",{class:"text-xs text-primary ml-2"},"(-20%)",-1))])])])]),t("button",{onClick:D,class:"w-full btn-primary mb-3"},[l(n(it),{class:"w-5 h-5 inline mr-2"}),e[22]||(e[22]=g(" Đặt phòng ngay ",-1))]),t("button",fe,[l(n(N),{class:"w-5 h-5 inline mr-2"}),e[23]||(e[23]=g(" Liên hệ ",-1))]),n(j)?h("",!0):(i(),a("p",ye,[l(n(G),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:C(()=>[...e[24]||(e[24]=[g(" Đăng nhập ",-1)])]),_:1}),e[25]||(e[25]=g(" để đặt phòng ",-1))])),t("div",ve,[e[26]||(e[26]=t("h3",{class:"font-semibold text-gray-800 mb-3"},"Thông tin liên hệ",-1)),t("div",pe,[_.value?(i(),a("p",be,[l(n(N),{class:"w-4 h-4 mr-2"}),g(" "+d(_.value),1)])):h("",!0),k.value?(i(),a("p",we,[l(n(nt),{class:"w-4 h-4 mr-2"}),g(" "+d(k.value),1)])):h("",!0)])])])])])])])):(i(),a("div",ct,[...e[0]||(e[0]=[t("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin nhà trọ...",-1)])]))])]),_:1})],64))}};export{Oe as default};
