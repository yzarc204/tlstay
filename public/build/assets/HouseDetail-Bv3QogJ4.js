import{c as n,d as e,o as i,u as F,r as y,A as u,H as I,a as d,b as a,h as q,w as W,e as h,t as l,n as T,F as k,i as B,y as _,Z as G,f as P,q as O,l as v,m as Z}from"./app-CToM1BLh.js";import{u as U,a as J,_ as K}from"./AppLayout-DJLQWfF9.js";import{g as Q,b as X}from"./amenityIcons-Bv3KFpq7.js";import{_ as Y,a as H}from"./ReviewItem-BVwHX4pk.js";import{r as ee}from"./ChevronLeftIcon-BfdHvGkT.js";import{r as te}from"./ChevronRightIcon-AxYvFnIT.js";import{r as se}from"./MapPinIcon-BdmmkFCn.js";import{r as re}from"./StarIcon-Br1Gp0G_.js";import{r as oe}from"./BuildingOfficeIcon-BSfrahlc.js";import{b as ie}from"./FlashToaster-BAEPXES7.js";import{r as ne}from"./CheckCircleIcon-BCfSz1eu.js";import{r as ae}from"./MapIcon-BFpYMmxH.js";import{r as le}from"./CalendarIcon-1FcouZeP.js";import{r as de}from"./PhoneIcon-D_b84UeB.js";import{r as ce}from"./EnvelopeIcon-Bznz8sUB.js";/* empty css            */import"./auth-BtqN1PUX.js";import"./ChevronDownIcon-B0Ek5pGr.js";import"./UserIcon-1Ls48XKe.js";import"./DocumentTextIcon-DywjITEI.js";import"./PhotoIcon-x2o2DaCh.js";function ue(o,s){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function he(o,s){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}const me={class:"house-detail bg-light min-h-screen"},ge={key:0,class:"container mx-auto px-4 py-20 text-center"},fe={key:1,class:"pb-12"},xe={class:"relative h-96 md:h-[500px] bg-gray-900 overflow-hidden"},ye=["src","alt"],ve={class:"container mx-auto px-4 -mt-20 relative z-10"},pe={class:"grid lg:grid-cols-3 gap-8"},be={class:"lg:col-span-2"},we={class:"card p-8 mb-6"},ke={class:"flex items-start justify-between mb-6"},_e={class:"text-3xl md:text-4xl font-bold text-secondary mb-3"},Pe={class:"flex items-center text-gray-600 mb-2"},$e={class:"flex items-center space-x-4"},je={class:"flex items-center"},Ae={class:"font-semibold"},Me={class:"text-gray-500 ml-1"},Ce={class:"badge bg-primary-100 text-primary-700"},Ie={class:"grid grid-cols-3 gap-4 py-6 border-y"},We={class:"text-center"},Te={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Be={class:"text-2xl font-bold text-primary"},De={class:"text-center"},Ne={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Le={class:"text-2xl font-bold text-primary"},Re={class:"text-center"},Ve={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},ze={class:"text-2xl font-bold text-primary"},Se={class:"mt-6"},Ee={class:"text-gray-600 leading-relaxed"},Fe={class:"mt-8"},qe={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ge={class:"text-gray-700"},Oe={key:1,class:"text-center py-8 text-gray-500"},Ze={class:"mt-8"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Je={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Ke={class:"flex items-center space-x-3"},Qe={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Xe={class:"flex items-center space-x-3"},Ye={class:"mt-8"},He={key:0,class:"rounded-xl overflow-hidden shadow-lg"},et=["src"],tt={key:1,class:"bg-gray-200 rounded-xl h-80 flex items-center justify-center"},st={class:"text-center"},rt={class:"mt-8"},ot={class:"text-2xl font-bold text-secondary mb-4"},it={key:1,class:"space-y-6 mt-6"},nt={key:2,class:"text-center py-8 text-gray-500"},at={class:"lg:col-span-1"},lt={class:"card p-6 sticky top-24"},dt={class:"mb-6"},ct={class:"space-y-3"},ut={class:"flex items-center justify-between p-3 bg-light rounded-lg"},ht={class:"font-bold text-secondary"},mt={class:"flex items-center justify-between p-3 bg-light rounded-lg"},gt={class:"text-right flex items-center gap-2"},ft={class:"font-bold text-secondary"},xt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800"},yt={class:"flex items-center justify-between p-3 bg-primary/10 rounded-lg border-2 border-primary"},vt={class:"text-right flex items-center gap-2"},pt={class:"font-bold text-primary text-lg"},bt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800"},wt={key:0,class:"text-sm text-center text-gray-500 mt-4"},kt={key:1,class:"mt-6 pt-6 border-t"},_t={class:"space-y-2 text-sm text-gray-600"},Pt={class:"font-semibold text-gray-900 mb-2"},$t={key:0,class:"flex items-center"},jt=["href"],At={key:1,class:"flex items-center"},Mt=["href"],Qt={__name:"HouseDetail",props:{house:{type:Object,default:null},rooms:{type:Array,default:()=>[]},reviews:{type:Array,default:()=>[]},canReview:{type:Boolean,default:!1},reviewableBookingId:{type:Number,default:null}},setup(o){F();const s=o,{isAuthenticated:p}=U(),g=y(""),c=y(0),f=y(s.house?.isInWishlist||!1),b=y(!1),$=u(()=>s.house?.amenities?Array.isArray(s.house.amenities)?s.house.amenities.filter(Boolean):typeof s.house.amenities=="object"?Object.keys(s.house.amenities).filter(r=>s.house.amenities[r]):[]:[]);I(()=>s.house,r=>{if(r){const t=r.featured_images&&Array.isArray(r.featured_images)&&r.featured_images.length>0?r.featured_images:Array.isArray(r.images)&&r.images.length>0?r.images:[];t.length>0?(g.value=t[0],c.value=0):(g.value=r.image||"",c.value=0)}},{immediate:!0});const D=u(()=>s.house?s.house.pricePerWeek?s.house.pricePerWeek:Math.round((s.house.pricePerDay||0)*7):0),N=u(()=>s.house?s.house.pricePerMonth?s.house.pricePerMonth:Math.round((s.house.pricePerDay||0)*30):0),j=u(()=>s.house?!!s.house.pricePerWeek:!1),A=u(()=>s.house?!!s.house.pricePerMonth:!1),M=u(()=>{if(!s.house||!j.value||!s.house.pricePerDay)return 0;const r=s.house.pricePerDay*7;if(r<=0||s.house.pricePerWeek>=r)return 0;const t=(r-s.house.pricePerWeek)/r*100;return Math.max(0,Math.round(t))}),C=u(()=>{if(!s.house||!A.value||!s.house.pricePerDay)return 0;const r=s.house.pricePerDay*30;if(r<=0||s.house.pricePerMonth>=r)return 0;const t=(r-s.house.pricePerMonth)/r*100;return Math.max(0,Math.round(t))}),L=u(()=>{if(!s.house?.latitude||!s.house?.longitude)return"";const r=s.house.latitude,t=s.house.longitude;return`https://www.google.com/maps?q=${r},${t}&hl=vi&z=15&output=embed`}),x=u(()=>s.house?s.house.featured_images&&Array.isArray(s.house.featured_images)&&s.house.featured_images.length>0?s.house.featured_images:s.house.images&&Array.isArray(s.house.images)&&s.house.images.length>0?s.house.images:s.house.image?[s.house.image]:[]:[]),R=()=>{const r=x.value;!r||r.length===0||(c.value=(c.value+1)%r.length,g.value=r[c.value])},V=()=>{const r=x.value;!r||r.length===0||(c.value=c.value===0?r.length-1:c.value-1,g.value=r[c.value])},w=r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),z=()=>{s.house?.id&&v.visit(`/booking/${s.house.id}`)},S=()=>{v.reload({only:["reviews","canReview","reviewableBookingId"],preserveScroll:!0})},E=async()=>{if(!p.value){v.visit("/login");return}if(!(b.value||!s.house?.id)){b.value=!0;try{const r=await Z.post("/wishlist/toggle",{house_id:s.house.id});f.value=r.data.isInWishlist,window.flash&&window.flash(r.data.message,r.data.isInWishlist?"success":"info")}catch(r){console.error("Error toggling wishlist:",r),r.response?.status===401&&v.visit("/login")}finally{b.value=!1}}};return I(()=>s.house,r=>{r&&(f.value=r.isInWishlist||!1)},{immediate:!0}),(r,t)=>(i(),n(k,null,[d(a(q),{title:o.house?.name||"Chi tiết nhà trọ"},null,8,["title"]),d(K,null,{default:W(()=>[e("div",me,[o.house?(i(),n("div",fe,[e("div",xe,[e("img",{src:g.value||o.house.image,alt:o.house.name,class:"w-full h-full object-cover transition-opacity duration-300"},null,8,ye),x.value.length>1?(i(),n("button",{key:0,onClick:V,class:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[d(a(ee),{class:"w-6 h-6 text-gray-800"})])):h("",!0),x.value.length>1?(i(),n("button",{key:1,onClick:R,class:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[d(a(te),{class:"w-6 h-6 text-gray-800"})])):h("",!0)]),e("div",ve,[e("div",pe,[e("div",be,[e("div",we,[e("div",ke,[e("div",null,[e("h1",_e,l(o.house.name),1),e("div",Pe,[d(a(se),{class:"w-5 h-5 mr-2"}),e("span",null,l(o.house.address),1)]),e("div",$e,[e("div",je,[d(a(re),{class:"w-5 h-5 text-yellow-400 mr-1"}),e("span",Ae,l(o.house.rating),1),e("span",Me,"("+l(o.house.reviews)+" reviews)",1)]),e("span",Ce,l(o.house.availableRooms)+" phòng trống ",1)])]),e("button",{onClick:E,class:T(["w-12 h-12 rounded-full flex items-center justify-center transition-all",f.value?"bg-secondary text-white":"bg-secondary-50 hover:bg-secondary hover:text-white"])},[d(a(J),{class:T(["w-6 h-6",f.value?"fill-current":""])},null,8,["class"])],2)]),e("div",Ie,[e("div",We,[e("div",Te,[d(a(oe),{class:"w-6 h-6 text-primary"})]),e("p",Be,l(o.house.floors),1),t[1]||(t[1]=e("p",{class:"text-sm text-gray-600"}," Tầng ",-1))]),e("div",De,[e("div",Ne,[d(a(ie),{class:"w-6 h-6 text-primary"})]),e("p",Le,l(o.house.totalRooms),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-600"}," Tổng phòng ",-1))]),e("div",Re,[e("div",Ve,[d(a(ne),{class:"w-6 h-6 text-primary"})]),e("p",ze,l(o.house.availableRooms),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-600"}," Còn trống ",-1))])]),e("div",Se,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"}," Mô tả ",-1)),e("p",Ee,l(o.house.description),1)]),e("div",Fe,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"}," Tiện nghi ",-1)),$.value.length>0?(i(),n("div",qe,[(i(!0),n(k,null,B($.value,m=>(i(),n("div",{key:m,class:"flex items-center space-x-3 p-3 bg-light rounded-lg hover:bg-gray-50 transition-colors"},[(i(),_(G(a(Q)(m)),{class:"w-5 h-5 text-primary flex-shrink-0"})),e("span",Ge,l(a(X)(m)),1)]))),128))])):(i(),n("div",Oe,[...t[5]||(t[5]=[e("p",null,"Chưa có thông tin tiện nghi",-1)])]))]),e("div",Ze,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"}," Giá dịch vụ ",-1)),t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-4"}," Áp dụng cho gói thuê theo tháng ",-1)),e("div",Ue,[e("div",Je,[e("div",Ke,[d(a(he),{class:"w-6 h-6 text-yellow-500"}),t[7]||(t[7]=e("div",null,[e("p",{class:"font-semibold text-gray-800"}," Điện "),e("p",{class:"text-sm text-gray-500"}," Tính theo số điện ")],-1))]),t[8]||(t[8]=e("span",{class:"font-bold text-secondary text-lg"},"4.000đ / số",-1))]),e("div",Qe,[e("div",Xe,[d(a(ue),{class:"w-6 h-6 text-blue-500"}),t[9]||(t[9]=e("div",null,[e("p",{class:"font-semibold text-gray-800"}," Nước "),e("p",{class:"text-sm text-gray-500"}," Tính theo khối ")],-1))]),t[10]||(t[10]=e("span",{class:"font-bold text-secondary text-lg"},"25.000đ / khối",-1))])])]),e("div",Ye,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"}," Vị trí ",-1)),o.house.latitude&&o.house.longitude?(i(),n("div",He,[e("iframe",{src:L.value,width:"100%",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"w-full"},null,8,et)])):(i(),n("div",tt,[e("div",st,[d(a(ae),{class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),t[13]||(t[13]=e("p",{class:"text-gray-500"}," Thông tin vị trí chưa có sẵn ",-1))])]))]),e("div",rt,[e("h2",ot," Đánh giá ("+l(o.reviews?.length||0)+") ",1),o.canReview&&a(p)&&o.reviewableBookingId?(i(),_(Y,{key:0,"booking-id":o.reviewableBookingId,"house-id":o.house.id,onReviewCreated:S},null,8,["booking-id","house-id"])):h("",!0),o.reviews&&o.reviews.length>0?(i(),n("div",it,[(i(!0),n(k,null,B(o.reviews,m=>(i(),_(H,{key:m.id,review:m},null,8,["review"]))),128))])):(i(),n("div",nt,[...t[15]||(t[15]=[e("p",null,"Chưa có đánh giá nào",-1)])]))])])]),e("div",at,[e("div",lt,[e("div",dt,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-600 mb-2"}," Giá thuê ",-1)),e("div",ct,[e("div",ut,[t[16]||(t[16]=e("span",{class:"text-gray-700"},"Theo ngày",-1)),e("span",ht,l(w(o.house.pricePerDay)),1)]),e("div",mt,[t[17]||(t[17]=e("span",{class:"text-gray-700"},"Theo tuần",-1)),e("div",gt,[e("span",ft,l(w(D.value)),1),j.value&&M.value>0?(i(),n("span",xt," Tiết kiệm "+l(M.value)+"% ",1)):h("",!0)])]),e("div",yt,[t[18]||(t[18]=e("span",{class:"text-gray-700"},"Theo tháng",-1)),e("div",vt,[e("span",pt,l(w(N.value)),1),A.value&&C.value>0?(i(),n("span",bt," Tiết kiệm "+l(C.value)+"% ",1)):h("",!0)])])])]),e("button",{onClick:z,class:"w-full btn-primary mb-3"},[d(a(le),{class:"w-5 h-5 inline mr-2"}),t[20]||(t[20]=P(" Đặt phòng ngay ",-1))]),a(p)?h("",!0):(i(),n("p",wt,[d(a(O),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:W(()=>[...t[21]||(t[21]=[P(" Đăng nhập ",-1)])]),_:1}),t[22]||(t[22]=P(" để đặt phòng ",-1))])),o.house.owner?(i(),n("div",kt,[t[23]||(t[23]=e("h3",{class:"font-semibold text-gray-800 mb-3"}," Thông tin liên hệ ",-1)),e("div",_t,[e("p",Pt,l(o.house.owner.name),1),o.house.owner.phone?(i(),n("p",$t,[d(a(de),{class:"w-4 h-4 mr-2"}),e("a",{href:`tel:${o.house.owner.phone}`,class:"hover:text-primary"},l(o.house.owner.phone),9,jt)])):h("",!0),o.house.owner.email?(i(),n("p",At,[d(a(ce),{class:"w-4 h-4 mr-2"}),e("a",{href:`mailto:${o.house.owner.email}`,class:"hover:text-primary break-all"},l(o.house.owner.email),9,Mt)])):h("",!0)])])):h("",!0)])])])])])):(i(),n("div",ge,[...t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin nhà trọ...",-1)])]))])]),_:1})],64))}};export{Qt as default};
