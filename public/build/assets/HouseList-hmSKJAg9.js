import{c as n,d as t,o as s,r as $,A as h,H as Z,a as u,b as o,h as q,w as U,e as m,f as c,t as i,g as w,F as g,i as v,j as k,n as _,y as S,Z as G,q as I,l as P}from"./app-Bt1z262F.js";import{_ as X}from"./AppLayout-Ddx7PIm4.js";import{_ as K}from"./HouseCard-jnobeK_i.js";import{g as O,b as E}from"./amenityIcons-B0G_oVm1.js";import{a as V}from"./FlashToaster-Cms5pOrK.js";import{r as H}from"./MapPinIcon-BbjlIJa0.js";import{r as T}from"./ChevronDownIcon-DKwfb7zy.js";import{r as W}from"./Squares2X2Icon-DnZh878L.js";import{r as J}from"./BuildingOfficeIcon-BL8SXywi.js";/* empty css            */import"./auth-CeThKYyE.js";import"./UserIcon-h1VzPKM1.js";import"./DocumentTextIcon-q_L84j7A.js";import"./PhoneIcon-BBaC4Ve5.js";import"./EnvelopeIcon-BxlORJDl.js";import"./StarIcon-Bb2xxkOY.js";function Q(d,p){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const Y={class:"house-list py-12 bg-light min-h-screen"},ee={class:"container mx-auto px-4"},te={key:0,class:"mb-6 flex flex-wrap gap-2"},re={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},se={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},ae={key:2,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-700"},ne={class:"bg-white rounded-2xl shadow-md p-6 mb-8"},le={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},oe={class:"relative"},ie=["value"],de={class:"relative"},ue=["value"],me={class:"relative"},ce={class:"relative"},pe={class:"flex items-end space-x-2"},ge={class:"flex items-center justify-between mb-6"},ye={class:"text-gray-600"},ve={key:0},fe={class:"font-semibold text-secondary"},xe={class:"font-semibold text-secondary"},be={class:"font-semibold text-secondary"},he={key:1},we={key:0,class:"text-center py-20"},ke={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},_e={key:2,class:"space-y-6"},Te=["onClick"],Ce={class:"md:w-1/3 h-64 md:h-auto"},De=["src","alt"],$e={class:"flex-1 p-6"},Se={class:"flex items-start justify-between mb-4"},Pe={class:"text-2xl font-bold text-secondary mb-2"},Ve={class:"text-gray-600 flex items-center mb-1"},He={key:0,class:"flex items-center gap-2 text-sm text-gray-500"},Me={key:0},Ne={key:1},Re={key:2},je={class:"badge bg-primary-100 text-primary-700"},Fe={class:"flex flex-wrap gap-2 mb-4"},Le={key:0,class:"badge bg-primary-50 text-primary flex items-center space-x-1.5"},ze={class:"flex items-center justify-between pt-4 border-t"},Ae={class:"text-2xl font-bold text-primary"},Be={key:3,class:"mt-8 flex justify-center"},Ze={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},qe=["innerHTML"],nt={__name:"HouseList",props:{houses:{type:Object,default:()=>({data:[],links:[]})},filters:{type:Object,default:()=>({})},wards:{type:Array,default:()=>[]},streets:{type:Array,default:()=>[]}},setup(d){const p=d,f=$("grid"),x=$("default"),l=$({ward:p.filters?.ward||"",street:p.filters?.street||"",priceRange:p.filters?.priceRange||""}),M=h(()=>{if(!l.value.ward)return null;const a=p.wards.find(e=>e.name===l.value.ward);return a?a.id:null}),L=h(()=>M.value?p.streets.filter(a=>a.ward_id===M.value):p.streets);Z(()=>l.value.ward,()=>{l.value.street=""});const N=h(()=>!!(l.value.ward||l.value.street||l.value.priceRange)),R=h(()=>{let a=p.houses.data?[...p.houses.data]:[];return x.value==="price-asc"?a.sort((e,r)=>e.pricePerDay-r.pricePerDay):x.value==="price-desc"?a.sort((e,r)=>r.pricePerDay-e.pricePerDay):x.value==="rating"&&a.sort((e,r)=>r.rating-e.rating),a}),z=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),A=a=>a?a==="0-2000000"?"Dưới 2 triệu/ngày":a==="2000000-5000000"?"2 - 5 triệu/ngày":a==="5000000-10000000"?"5 - 10 triệu/ngày":a==="10000000+"?"Trên 10 triệu/ngày":a:"",b=()=>{const a=new URLSearchParams;l.value.ward&&a.append("ward",l.value.ward),l.value.street&&a.append("street",l.value.street),l.value.priceRange&&a.append("priceRange",l.value.priceRange);const e=a.toString();P.visit(`/houses${e?"?"+e:""}`,{preserveState:!0,preserveScroll:!0})},C=a=>{l.value[a]="",b()},j=()=>{l.value={ward:"",street:"",priceRange:""},P.visit("/houses",{preserveState:!1,preserveScroll:!0})},B=a=>{P.visit(`/houses/${a}`)},F=a=>a&&a.replace(/&laquo;\s*Previous/gi,"Trước").replace(/Previous/gi,"Trước").replace(/&laquo;/g,"Trước").replace(/Next\s*&raquo;/gi,"Sau").replace(/Next/gi,"Sau").replace(/&raquo;/g,"Sau");return(a,e)=>(s(),n(g,null,[u(o(q),{title:"Danh sách nhà trọ"}),u(X,null,{default:U(()=>[t("div",Y,[t("div",ee,[e[27]||(e[27]=t("div",{class:"mb-8"},[t("h1",{class:"text-4xl font-bold text-secondary mb-2"},"Danh sách nhà trọ"),t("p",{class:"text-gray-600"},"Tìm phòng trọ phù hợp với bạn")],-1)),N.value?(s(),n("div",te,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-600 font-medium"},"Bộ lọc đang áp dụng:",-1)),l.value.ward?(s(),n("span",re,[c(" Phường: "+i(l.value.ward)+" ",1),t("button",{onClick:e[0]||(e[0]=r=>C("ward")),class:"ml-2 hover:text-primary-900"},[u(o(V),{class:"w-4 h-4"})])])):m("",!0),l.value.street?(s(),n("span",se,[c(" Đường: "+i(l.value.street)+" ",1),t("button",{onClick:e[1]||(e[1]=r=>C("street")),class:"ml-2 hover:text-primary-900"},[u(o(V),{class:"w-4 h-4"})])])):m("",!0),l.value.priceRange?(s(),n("span",ae,[c(" Giá: "+i(A(l.value.priceRange))+" ",1),t("button",{onClick:e[2]||(e[2]=r=>C("priceRange")),class:"ml-2 hover:text-primary-900"},[u(o(V),{class:"w-4 h-4"})])])):m("",!0),N.value?(s(),n("button",{key:3,onClick:j,class:"text-sm text-red-600 hover:text-red-700 font-medium"}," Xóa tất cả bộ lọc ")):m("",!0)])):m("",!0),t("div",ne,[t("div",le,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên phường",-1)),t("div",oe,[u(o(H),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 z-10"}),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.ward=r),onChange:b,class:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[e[10]||(e[10]=t("option",{value:""},"Tất cả phường",-1)),(s(!0),n(g,null,v(d.wards,r=>(s(),n("option",{key:r.id,value:r.name},i(r.name),9,ie))),128))],544),[[k,l.value.ward]]),u(o(T),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none z-10"})])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên đường",-1)),t("div",de,[u(o(H),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 z-10"}),w(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>l.value.street=r),onChange:b,class:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[e[12]||(e[12]=t("option",{value:""},"Tất cả đường",-1)),(s(!0),n(g,null,v(L.value,r=>(s(),n("option",{key:r.id,value:r.name},i(r.name)+i(r.ward_name?` (${r.ward_name})`:""),9,ue))),128))],544),[[k,l.value.street]]),u(o(T),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none z-10"})])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Khoảng giá",-1)),t("div",me,[w(t("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>l.value.priceRange=r),onChange:b,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[...e[14]||(e[14]=[t("option",{value:""},"Tất cả mức giá",-1),t("option",{value:"0-2000000"},"Dưới 2 triệu/ngày",-1),t("option",{value:"2000000-5000000"},"2 - 5 triệu/ngày",-1),t("option",{value:"5000000-10000000"},"5 - 10 triệu/ngày",-1),t("option",{value:"10000000+"},"Trên 10 triệu/ngày",-1)])],544),[[k,l.value.priceRange]]),u(o(T),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sắp xếp",-1)),t("div",ce,[w(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>x.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-gray-900 appearance-none bg-white cursor-pointer"},[...e[16]||(e[16]=[t("option",{value:"default"},"Mặc định",-1),t("option",{value:"price-asc"},"Giá: Thấp đến cao",-1),t("option",{value:"price-desc"},"Giá: Cao đến thấp",-1),t("option",{value:"rating"},"Đánh giá cao nhất",-1)])],512),[[k,x.value]]),u(o(T),{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})])]),t("div",pe,[t("button",{onClick:e[7]||(e[7]=r=>f.value="grid"),class:_(["flex-1 px-4 py-3 rounded-lg transition-all",f.value==="grid"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[u(o(W),{class:"w-5 h-5 mx-auto"})],2),t("button",{onClick:e[8]||(e[8]=r=>f.value="list"),class:_(["flex-1 px-4 py-3 rounded-lg transition-all",f.value==="list"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[u(o(Q),{class:"w-5 h-5 mx-auto"})],2)])])]),t("div",ge,[t("p",ye,[d.houses.data&&d.houses.data.length>0?(s(),n("span",ve,[e[18]||(e[18]=c(" Hiển thị ",-1)),t("span",fe,i(d.houses.from),1),e[19]||(e[19]=c(" đến ",-1)),t("span",xe,i(d.houses.to),1),e[20]||(e[20]=c(" trong tổng số ",-1)),t("span",be,i(d.houses.total),1),e[21]||(e[21]=c(" nhà trọ ",-1))])):(s(),n("span",he,[...e[22]||(e[22]=[c(" Tìm thấy ",-1),t("span",{class:"font-semibold text-secondary"},"0",-1),c(" nhà trọ ",-1)])]))])]),t("div",null,[!d.houses.data||d.houses.data.length===0?(s(),n("div",we,[u(o(J),{class:"w-24 h-24 mx-auto text-gray-300 mb-4"}),e[23]||(e[23]=t("h3",{class:"text-2xl font-bold text-gray-400 mb-2"},"Không tìm thấy nhà trọ",-1)),e[24]||(e[24]=t("p",{class:"text-gray-500 mb-4"},"Thử điều chỉnh bộ lọc của bạn",-1)),t("button",{onClick:j,class:"btn-primary"},"Xóa tất cả bộ lọc")])):f.value==="grid"?(s(),n("div",ke,[(s(!0),n(g,null,v(R.value,r=>(s(),S(K,{key:r.id,house:r},null,8,["house"]))),128))])):(s(),n("div",_e,[(s(!0),n(g,null,v(R.value,r=>(s(),n("div",{key:r.id,class:"card flex flex-col md:flex-row cursor-pointer hover:shadow-lg transition-shadow",onClick:y=>B(r.id)},[t("div",Ce,[t("img",{src:r.image,alt:r.name,class:"w-full h-full object-cover rounded-l-lg"},null,8,De)]),t("div",$e,[t("div",Se,[t("div",null,[t("h3",Pe,i(r.name),1),t("p",Ve,[u(o(H),{class:"w-5 h-5 mr-2"}),c(" "+i(r.address),1)]),r.ward_name||r.street_name?(s(),n("div",He,[r.ward_name?(s(),n("span",Me,i(r.ward_name),1)):m("",!0),r.ward_name&&r.street_name?(s(),n("span",Ne,"•")):m("",!0),r.street_name?(s(),n("span",Re,i(r.street_name),1)):m("",!0)])):m("",!0)]),t("span",je,i(r.availableRooms)+" phòng trống ",1)]),t("div",Fe,[(s(!0),n(g,null,v(r.amenities,(y,D)=>(s(),n(g,{key:D},[y?(s(),n("span",Le,[(s(),S(G(o(O)(D)),{class:"w-4 h-4"})),t("span",null,i(o(E)(D)),1)])):m("",!0)],64))),128))]),t("div",ze,[t("div",null,[t("p",Ae,[c(i(z(r.pricePerDay))+" ",1),e[25]||(e[25]=t("span",{class:"text-sm text-gray-500 font-normal"},"/ngày",-1))])]),e[26]||(e[26]=t("button",{class:"btn-secondary"},"Xem chi tiết",-1))])])],8,Te))),128))])),d.houses.links&&d.houses.links.length>3?(s(),n("div",Be,[t("nav",Ze,[(s(!0),n(g,null,v(d.houses.links,(r,y)=>(s(),n(g,{key:y},[r.url?(s(),S(o(I),{key:0,href:r.url,innerHTML:F(r.label),class:_(["relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors",r.active?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50",y===0?"rounded-l-md":"",y===d.houses.links.length-1?"rounded-r-md":""])},null,8,["href","innerHTML","class"])):(s(),n("span",{key:1,innerHTML:F(r.label),class:_(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-300",[y===0?"rounded-l-md":"",y===d.houses.links.length-1?"rounded-r-md":""]])},null,10,qe))],64))),128))])])):m("",!0)])])])]),_:1})],64))}};export{nt as default};
