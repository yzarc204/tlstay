import{r as k,z as L,c as a,a as i,b as r,h as H,w as f,d as t,e as u,o as l,t as o,n as g,y as w,g as _,f as c,E as j,q as S,F as Q}from"./app-BdvrGfPi.js";import{r as T,_ as X}from"./AppLayout-BAX4DMM8.js";import{r as C}from"./CheckCircleIcon-BWD_mS_3.js";import{r as $}from"./CheckIcon-DfohWGNv.js";import{r as D}from"./ArrowLeftIcon-BXJqUbbN.js";import{r as E,a as N}from"./InformationCircleIcon-Du6MYmPz.js";import{r as G}from"./PencilIcon-DBoqhZ8i.js";/* empty css            */import"./auth-CJFPJgpe.js";import"./FlashToaster-hPDfO9im.js";import"./ChevronDownIcon-uT6iWfgT.js";import"./UserIcon-vcAtQEth.js";import"./DocumentTextIcon-DPzBDB88.js";import"./PhoneIcon-BpYhuJpP.js";import"./EnvelopeIcon-CJ62BL6y.js";const O={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 md:py-12"},A={class:"max-w-4xl mx-auto px-4"},J={class:"text-center mb-8"},R={class:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6 animate-pulse"},U={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},W={class:"text-green-800"},Y={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},Z={class:"relative"},tt={class:"grid grid-cols-3 items-center"},et={class:"flex flex-col items-center relative z-10"},st={key:1,class:"text-xl"},nt={class:"flex flex-col items-center relative z-10"},ot={key:1,class:"text-xl"},rt={class:"flex flex-col items-center relative z-10"},lt={key:1,class:"text-xl"},it={class:"absolute top-7 left-0 right-0 h-1 z-0"},at={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},dt={class:"p-8"},gt={class:"space-y-6"},ct={class:"grid md:grid-cols-2 gap-6"},bt={class:"space-y-5"},mt={class:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4"},ut={class:"text-lg font-bold text-blue-900 font-mono"},xt={class:"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-4"},yt={class:"text-lg font-bold text-purple-900"},ft={class:"text-xs text-purple-700 mt-1"},ht={class:"bg-teal-50 border-l-4 border-teal-500 rounded-lg p-4"},pt={class:"text-lg font-bold text-teal-900"},vt={key:0,class:"mt-2"},kt={class:"space-y-5"},wt={class:"bg-amber-50 border-l-4 border-amber-500 rounded-lg p-4"},_t={class:"text-lg font-bold text-amber-900"},jt={class:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4"},St={class:"text-lg font-bold text-orange-900"},$t={class:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4"},Vt={class:"text-lg font-bold text-green-900"},Tt={key:0,class:"pt-6 border-t border-gray-200"},Ct={class:"text-gray-700 bg-gray-50 px-4 py-3 rounded-lg"},Dt={class:"pt-6 border-t border-gray-200 flex justify-end"},Nt={class:"p-8"},Mt={class:"space-y-6"},Bt={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200"},Pt={class:"space-y-4"},It={class:"flex justify-between items-center py-3 border-b border-gray-300"},zt={class:"font-semibold text-gray-900 text-lg"},Ft={key:0,class:"flex justify-between items-center py-3 border-b border-gray-300"},qt={class:"font-semibold text-green-600 text-lg"},Kt={class:"flex justify-between items-center pt-4 mt-2 border-t-2 border-gray-400"},Lt={class:"text-3xl font-bold text-primary"},Ht={class:"grid md:grid-cols-2 gap-6 pt-4"},Qt={class:"bg-gray-50 rounded-lg p-4"},Xt={class:"font-semibold text-gray-900 text-lg"},Et={key:0,class:"bg-gray-50 rounded-lg p-4"},Gt={class:"font-semibold text-gray-900 text-lg"},Ot={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},At={class:"font-mono text-sm text-blue-900 break-all"},Jt={class:"pt-6 border-t border-gray-200 flex justify-between"},Rt={class:"p-8"},Ut={key:0,class:"space-y-6"},Wt={class:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6"},Yt={class:"flex items-start"},Zt={class:"flex flex-col sm:flex-row gap-4"},te=["href"],ee={class:"pt-6 border-t border-gray-200 flex justify-start"},se={key:1,class:"space-y-6"},ne={class:"text-center py-8"},oe={class:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4"},re={key:0,class:"text-gray-600"},le={class:"bg-gray-50 rounded-lg p-6 border border-gray-200"},ie={class:"flex items-center justify-between mb-4"},ae={class:"text-sm text-gray-600 mt-1"},de=["href"],ge={class:"bg-green-50 border-l-4 border-green-500 rounded-lg p-6"},ce={class:"space-y-2 text-sm text-green-800"},be={class:"flex items-start"},me={class:"mt-8 flex flex-wrap gap-4 justify-center"},De={__name:"BookingSuccess",props:{booking:{type:Object,required:!0}},setup(s){const x=s,d=k(1),b=k(!1),m=k(!1);L(()=>{d.value=1,b.value=!1,m.value=!1,localStorage.removeItem(`booking_${x.booking.id}_step1`),localStorage.removeItem(`booking_${x.booking.id}_step2`),localStorage.removeItem(`booking_${x.booking.id}_currentStep`)});const y=n=>{n>=1&&n<=3&&(d.value=n,localStorage.setItem(`booking_${x.booking.id}_currentStep`,n.toString()))},M=()=>{b.value=!0,localStorage.setItem(`booking_${x.booking.id}_step1`,"confirmed"),y(2)},B=()=>{m.value=!0,localStorage.setItem(`booking_${x.booking.id}_step2`,"confirmed"),y(3)},h=n=>!n&&n!==0?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),p=n=>n?new Date(n).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",V=n=>n?new Date(n).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",P=(n,e)=>{if(!n||!e)return 0;const v=new Date(n),q=new Date(e),K=Math.abs(q-v);return Math.ceil(K/(1e3*60*60*24))+1},I=n=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã ở",pending:"Chờ thanh toán",completed:"Đã kết thúc",cancelled:"Đã hủy"})[n]||n,z=n=>({upcoming:"bg-amber-100 text-amber-700",active:"bg-green-100 text-green-700",past:"bg-gray-100 text-gray-600",pending:"bg-yellow-100 text-yellow-700",completed:"bg-gray-100 text-gray-600",cancelled:"bg-red-100 text-red-700"})[n]||"bg-gray-100 text-gray-600",F=n=>({bank_transfer:"Chuyển khoản ngân hàng",vnpay:"VNPay",wallet:"Ví điện tử",cash:"Tiền mặt"})[n]||n||"Chưa xác định";return(n,e)=>(l(),a(Q,null,[i(r(H),{title:"Đặt phòng thành công"}),i(X,null,{default:f(()=>[t("div",O,[t("div",A,[t("div",J,[t("div",R,[i(r(C),{class:"w-12 h-12 text-green-600"})]),e[2]||(e[2]=t("h1",{class:"text-4xl font-bold text-gray-900 mb-3"},"Đặt phòng thành công!",-1)),e[3]||(e[3]=t("p",{class:"text-lg text-gray-600"},"Vui lòng hoàn tất các bước sau để hoàn thành đặt phòng",-1))]),n.$page.props.flash?.success?(l(),a("div",U,[t("p",W,o(n.$page.props.flash.success),1)])):u("",!0),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("div",{class:g(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===1?"bg-primary text-white ring-4 ring-primary/20":b.value?"bg-secondary text-white":"bg-gray-200 text-gray-500"])},[b.value?(l(),w(r($),{key:0,class:"w-7 h-7"})):(l(),a("span",st,"1"))],2),t("p",{class:g(["mt-3 text-sm font-medium text-center",d.value===1?"text-primary font-semibold":b.value?"text-secondary":"text-gray-500"])}," Thông tin đặt phòng ",2)]),t("div",nt,[t("div",{class:g(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===2?"bg-primary text-white ring-4 ring-primary/20":m.value?"bg-secondary text-white":b.value?"bg-gray-300 text-gray-600":"bg-gray-200 text-gray-400"])},[m.value?(l(),w(r($),{key:0,class:"w-7 h-7"})):(l(),a("span",ot,"2"))],2),t("p",{class:g(["mt-3 text-sm font-medium text-center",d.value===2?"text-primary font-semibold":m.value?"text-secondary":b.value?"text-gray-600":"text-gray-400"])}," Thông tin thanh toán ",2)]),t("div",rt,[t("div",{class:g(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===3?"bg-primary text-white ring-4 ring-primary/20":s.booking.contract_signed?"bg-secondary text-white":m.value?"bg-gray-300 text-gray-600":"bg-gray-200 text-gray-400"])},[s.booking.contract_signed?(l(),w(r($),{key:0,class:"w-7 h-7"})):(l(),a("span",lt,"3"))],2),t("p",{class:g(["mt-3 text-sm font-medium text-center",d.value===3?"text-primary font-semibold":s.booking.contract_signed?"text-secondary":m.value?"text-gray-600":"text-gray-400"])}," Ký hợp đồng ",2)])]),t("div",it,[t("div",{class:g(["absolute h-1 transition-all duration-300",b.value?"bg-secondary":"bg-gray-200"]),style:{left:"calc(16.666% + 28px)",right:"calc(50% + 28px)"}},null,2),t("div",{class:g(["absolute h-1 transition-all duration-300",m.value?"bg-secondary":"bg-gray-200"]),style:{left:"calc(50% + 28px)",right:"calc(16.666% + 28px)"}},null,2)])])]),t("div",at,[_(t("div",dt,[e[15]||(e[15]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Thông tin đặt phòng"),t("p",{class:"text-gray-600"},"Vui lòng kiểm tra và xác nhận thông tin đặt phòng của bạn")],-1)),t("div",gt,[t("div",ct,[t("div",bt,[t("div",mt,[e[4]||(e[4]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-blue-900"},"Mã đặt phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-blue-200 text-blue-800 rounded-full"}," Quan trọng ")],-1)),t("p",ut,o(s.booking.booking_code),1),e[5]||(e[5]=t("p",{class:"text-xs text-blue-700 mt-1"},"Vui lòng lưu mã này để tra cứu sau",-1))]),t("div",xt,[e[6]||(e[6]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-purple-900"},"Nhà trọ"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-purple-200 text-purple-800 rounded-full"}," Địa điểm ")],-1)),t("p",yt,o(s.booking.house_name),1),t("p",ft,o(s.booking.house_address),1)]),t("div",ht,[e[7]||(e[7]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-teal-900"},"Phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-teal-200 text-teal-800 rounded-full"}," Phòng ")],-1)),t("p",pt," Phòng "+o(s.booking.room_number)+" - Tầng "+o(s.booking.floor),1),s.booking.booking_status?(l(),a("div",vt,[t("span",{class:g(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",z(s.booking.booking_status)])},o(I(s.booking.booking_status)),3)])):u("",!0)])]),t("div",kt,[t("div",wt,[e[8]||(e[8]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-amber-900"},"Ngày nhận phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-amber-200 text-amber-800 rounded-full"}," Lưu ý ")],-1)),t("p",_t,o(p(s.booking.start_date)),1),e[9]||(e[9]=t("p",{class:"text-xs text-amber-700 mt-1"},"Vui lòng đến đúng ngày để nhận phòng",-1))]),t("div",jt,[e[10]||(e[10]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-orange-900"},"Ngày trả phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-orange-200 text-orange-800 rounded-full"}," Hạn chót ")],-1)),t("p",St,o(p(s.booking.end_date)),1),e[11]||(e[11]=t("p",{class:"text-xs text-orange-700 mt-1"},"Vui lòng trả phòng đúng hạn",-1))]),t("div",$t,[e[12]||(e[12]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-green-900"},"Số ngày thuê"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-green-200 text-green-800 rounded-full"}," Thông tin ")],-1)),t("p",Vt,o(P(s.booking.start_date,s.booking.end_date))+" ngày ",1)])])]),s.booking.notes?(l(),a("div",Tt,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Ghi chú",-1)),t("p",Ct,o(s.booking.notes),1)])):u("",!0),t("div",Dt,[t("button",{onClick:M,class:"px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm hover:shadow-md"},[e[14]||(e[14]=c(" Xác nhận và tiếp tục ",-1)),i(r(T),{class:"w-5 h-5 inline-block ml-2"})])])])],512),[[j,d.value===1]]),_(t("div",Nt,[e[24]||(e[24]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Thông tin thanh toán"),t("p",{class:"text-gray-600"},"Vui lòng kiểm tra và xác nhận thông tin thanh toán")],-1)),t("div",Mt,[t("div",Bt,[t("div",Pt,[t("div",It,[e[16]||(e[16]=t("span",{class:"text-gray-700 font-medium"},"Tổng tiền phòng",-1)),t("span",zt,o(h(s.booking.total_price+s.booking.discount_amount)),1)]),s.booking.discount_amount>0?(l(),a("div",Ft,[e[17]||(e[17]=t("span",{class:"text-gray-700 font-medium"},"Giảm giá",-1)),t("span",qt," -"+o(h(s.booking.discount_amount)),1)])):u("",!0),t("div",Kt,[e[18]||(e[18]=t("span",{class:"text-xl font-bold text-gray-900"},"Tổng thanh toán",-1)),t("span",Lt,o(h(s.booking.total_price)),1)])])]),t("div",Ht,[t("div",Qt,[e[19]||(e[19]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Phương thức thanh toán",-1)),t("p",Xt,o(F(s.booking.payment_method)),1)]),s.booking.paid_at?(l(),a("div",Et,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Thời gian thanh toán",-1)),t("p",Gt,o(V(s.booking.paid_at)),1)])):u("",!0)]),s.booking.vnpay_transaction_id?(l(),a("div",Ot,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-blue-900 block mb-2"},"Mã giao dịch",-1)),t("p",At,o(s.booking.vnpay_transaction_id),1)])):u("",!0),t("div",Jt,[t("button",{onClick:e[0]||(e[0]=v=>y(1)),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},[i(r(D),{class:"w-5 h-5 inline-block mr-2"}),e[22]||(e[22]=c(" Quay lại ",-1))]),t("button",{onClick:B,class:"px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm hover:shadow-md"},[e[23]||(e[23]=c(" Xác nhận và tiếp tục ",-1)),i(r(T),{class:"w-5 h-5 inline-block ml-2"})])])])],512),[[j,d.value===2]]),_(t("div",Rt,[e[36]||(e[36]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Ký hợp đồng"),t("p",{class:"text-gray-600"},"Ký hợp đồng để hoàn tất thủ tục đặt phòng")],-1)),s.booking.contract_signed?(l(),a("div",se,[t("div",ne,[t("div",oe,[i(r(C),{class:"w-12 h-12 text-green-600"})]),e[29]||(e[29]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-2"},"Đã ký hợp đồng",-1)),s.booking.signed_at?(l(),a("p",re," Đã ký vào: "+o(V(s.booking.signed_at)),1)):u("",!0)]),t("div",le,[t("div",ie,[t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm font-medium text-gray-500"},"Hợp đồng thuê trọ",-1)),t("p",ae,"Mã đặt phòng: "+o(s.booking.booking_code),1)]),t("a",{href:`/contract/${s.booking.id}`,target:"_blank",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium text-gray-700"},[i(r(N),{class:"w-4 h-4 mr-2"}),e[31]||(e[31]=c(" Tải PDF ",-1))],8,de)])]),t("div",ge,[e[35]||(e[35]=t("h3",{class:"font-semibold text-green-900 mb-3"},"Thông tin quan trọng",-1)),t("ul",ce,[t("li",be,[e[32]||(e[32]=t("span",{class:"text-green-600 mr-2"},"✓",-1)),t("span",null,"Vui lòng đến nhận phòng đúng ngày "+o(p(s.booking.start_date)),1)]),e[33]||(e[33]=t("li",{class:"flex items-start"},[t("span",{class:"text-green-600 mr-2"},"✓"),t("span",null,"Mang theo CMND/CCCD và hợp đồng thuê khi đến nhận phòng")],-1)),e[34]||(e[34]=t("li",{class:"flex items-start"},[t("span",{class:"text-green-600 mr-2"},"✓"),t("span",null,"Nếu có thắc mắc, vui lòng liên hệ với chủ nhà trọ")],-1))])])])):(l(),a("div",Ut,[t("div",Wt,[t("div",Yt,[i(r(E),{class:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5"}),e[25]||(e[25]=t("div",null,[t("h3",{class:"font-semibold text-blue-900 mb-3"},"Thông tin quan trọng"),t("ul",{class:"space-y-2 text-sm text-blue-800"},[t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Vui lòng đọc kỹ hợp đồng trước khi ký")]),t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Hợp đồng có hiệu lực pháp lý sau khi được ký")]),t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Bạn có thể tải hợp đồng bất cứ lúc nào")])])],-1))])]),t("div",Zt,[t("a",{href:`/contract/${s.booking.id}`,target:"_blank",class:"flex-1 px-6 py-4 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium text-center flex items-center justify-center"},[i(r(N),{class:"w-5 h-5 mr-2"}),e[26]||(e[26]=c(" Xem hợp đồng ",-1))],8,te),i(r(S),{href:`/contract/${s.booking.id}/sign`,class:"flex-1 px-6 py-4 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium text-center flex items-center justify-center shadow-sm hover:shadow-md"},{default:f(()=>[i(r(G),{class:"w-5 h-5 mr-2"}),e[27]||(e[27]=c(" Ký hợp đồng ",-1))]),_:1},8,["href"])]),t("div",ee,[t("button",{onClick:e[1]||(e[1]=v=>y(2)),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},[i(r(D),{class:"w-5 h-5 inline-block mr-2"}),e[28]||(e[28]=c(" Quay lại ",-1))])])]))],512),[[j,d.value===3]])]),t("div",me,[i(r(S),{href:"/history",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium"},{default:f(()=>[...e[37]||(e[37]=[c(" Lịch sử thuê ",-1)])]),_:1}),i(r(S),{href:"/",class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium"},{default:f(()=>[...e[38]||(e[38]=[c(" Về trang chủ ",-1)])]),_:1})])])])]),_:1})],64))}};export{De as default};
