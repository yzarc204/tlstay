import{A as N,r as _,p as S,c as n,a as i,b as t,h as I,w as v,d as e,e as d,o as a,t as c,k as U,f as l,g as y,n as b,v as h,j as D,q as $,F as T}from"./app-3lGO_R9W.js";import{_ as F}from"./AppLayout-DdyBiNnT.js";import{S as B}from"./SignaturePad-ruvXP2ZA.js";import{_ as k}from"./DatePicker-BR-zzZAP.js";import{r as M}from"./UserIcon-Ckbft10_.js";import{r as j}from"./IdentificationIcon-CBrb_UFW.js";import{a as E}from"./FlashToaster-BoExKWgK.js";import{r as P}from"./PencilIcon-D372ikXj.js";/* empty css            */import"./auth-CrTZoY8G.js";import"./ChevronDownIcon-BTXLF7AA.js";import"./DocumentTextIcon-EH4S9NlU.js";import"./PhoneIcon-Bi84PCxz.js";import"./EnvelopeIcon-D8x7c1b-.js";import"./CalendarIcon-R-FZwqaT.js";import"./ChevronLeftIcon-D5IveGys.js";import"./ChevronRightIcon-BaXOSuBF.js";const G={class:"min-h-screen bg-gray-50 py-8"},Q={class:"max-w-4xl mx-auto px-4"},z={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},A={class:"text-green-800"},H={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},K={class:"text-red-800"},L={class:"space-y-6"},O={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},R={class:"grid md:grid-cols-2 gap-6"},J={key:0,class:"mt-1 text-sm text-red-600"},W=["value"],X={key:0,class:"mt-1 text-sm text-red-600"},Y={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"space-y-6 border-t pt-6"},ee={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},re={class:"grid md:grid-cols-2 gap-6"},te={key:0,class:"mt-1 text-sm text-red-600"},se={class:"md:col-span-2"},oe={key:0,class:"mt-1 text-sm text-red-600"},ne={class:"md:col-span-2"},ae={key:0,class:"mt-1 text-sm text-red-600"},de={class:"md:col-span-2"},le={class:"space-y-3"},ie={key:0,class:"relative"},ue={class:"relative inline-block"},me=["src"],ce={key:0,class:"mt-2 text-xs text-gray-500"},pe={key:1,class:"mt-2 text-xs text-blue-600"},ge={key:1,class:"mt-1 text-sm text-red-600"},be={key:0,class:"space-y-6 border-t pt-6"},fe={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},ye={class:"flex justify-end space-x-4 pt-6 border-t"},he=["disabled"],xe={key:0},_e={key:1},Ee={__name:"Index",props:{user:{type:Object,required:!0}},setup(f){const u=f,x=N(()=>new Date().toISOString().split("T")[0]),g=_(null),p=_(null),s=S({name:u.user.name||"",phone:u.user.phone||"",id_card_number:u.user.id_card_number||"",id_card_issue_date:u.user.id_card_issue_date||"",id_card_issue_place:u.user.id_card_issue_place||"",permanent_address:u.user.permanent_address||"",date_of_birth:u.user.date_of_birth||"",gender:u.user.gender||"",signature:u.user.signature||"",id_card_image:null},{forceFormData:!0}),C=async m=>{const r=m.target.files[0];if(!r||!r.type.startsWith("image/"))return;if(r.size>5*1024*1024){alert("Kích thước ảnh không được vượt quá 5MB"),g.value&&(g.value.value="");return}const o=new FileReader;o.onload=q=>{p.value=q.target.result},o.readAsDataURL(r),s.id_card_image=r},w=()=>{p.value=null,s.id_card_image=null,g.value&&(g.value.value="")},V=()=>{s.post("/profile/personal-info",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p.value=null,g.value&&(g.value.value=""),window.location.reload()},onError:m=>{console.error("Form errors:",m)}})};return(m,r)=>(a(),n(T,null,[i(t(I),{title:"Thông tin tài khoản"}),i(F,null,{default:v(()=>[e("div",G,[e("div",Q,[r[29]||(r[29]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Thông tin của tôi"),e("p",{class:"text-gray-600 mt-1"},"Quản lý thông tin cá nhân và tài khoản của bạn")],-1)),m.$page.props.flash?.success?(a(),n("div",z,[e("p",A,c(m.$page.props.flash.success),1)])):d("",!0),m.$page.props.flash?.error?(a(),n("div",H,[e("p",K,c(m.$page.props.flash.error),1)])):d("",!0),e("form",{onSubmit:U(V,["prevent"]),class:"bg-white rounded-lg shadow-sm p-6 space-y-8"},[e("div",L,[e("div",null,[e("h2",O,[i(t(M),{class:"w-5 h-5 mr-2 text-primary"}),r[9]||(r[9]=l(" Thông tin cơ bản ",-1))]),e("div",R,[e("div",null,[r[10]||(r[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Họ và tên "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>t(s).name=o),type:"text",class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.name?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập họ và tên",required:""},null,2),[[h,t(s).name]]),t(s).errors.name?(a(),n("p",J,c(t(s).errors.name),1)):d("",!0)]),e("div",null,[r[11]||(r[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),e("input",{value:f.user.email,type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed",disabled:""},null,8,W),r[12]||(r[12]=e("p",{class:"mt-1 text-xs text-gray-500"},"Email không thể thay đổi",-1))]),e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Số điện thoại ",-1)),y(e("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>t(s).phone=o),type:"text",class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.phone?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số điện thoại"},null,2),[[h,t(s).phone]]),t(s).errors.phone?(a(),n("p",X,c(t(s).errors.phone),1)):d("",!0)]),e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Ngày sinh "),e("span",{class:"text-red-500"},"*")],-1)),i(k,{modelValue:t(s).date_of_birth,"onUpdate:modelValue":r[2]||(r[2]=o=>t(s).date_of_birth=o),max:x.value,error:t(s).errors.date_of_birth,format:"dd/mm/yyyy",placeholder:"dd/mm/yyyy"},null,8,["modelValue","max","error"])]),e("div",null,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Giới tính "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":r[3]||(r[3]=o=>t(s).gender=o),class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.gender?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),required:""},[...r[15]||(r[15]=[e("option",{value:""},"Chọn giới tính",-1),e("option",{value:"male"},"Nam",-1),e("option",{value:"female"},"Nữ",-1),e("option",{value:"other"},"Khác",-1)])],2),[[D,t(s).gender]]),t(s).errors.gender?(a(),n("p",Y,c(t(s).errors.gender),1)):d("",!0)])])])]),e("div",Z,[e("div",null,[e("h2",ee,[i(t(j),{class:"w-5 h-5 mr-2 text-primary"}),r[17]||(r[17]=l(" Thông tin căn cước công dân ",-1))]),e("div",re,[e("div",null,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Số CCCD "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":r[4]||(r[4]=o=>t(s).id_card_number=o),type:"text",class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.id_card_number?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số căn cước công dân",required:""},null,2),[[h,t(s).id_card_number]]),t(s).errors.id_card_number?(a(),n("p",te,c(t(s).errors.id_card_number),1)):d("",!0)]),e("div",null,[r[19]||(r[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Ngày cấp "),e("span",{class:"text-red-500"},"*")],-1)),i(k,{modelValue:t(s).id_card_issue_date,"onUpdate:modelValue":r[5]||(r[5]=o=>t(s).id_card_issue_date=o),max:x.value,error:t(s).errors.id_card_issue_date,format:"dd/mm/yyyy",placeholder:"dd/mm/yyyy"},null,8,["modelValue","max","error"])]),e("div",se,[r[20]||(r[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Nơi cấp "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":r[6]||(r[6]=o=>t(s).id_card_issue_place=o),type:"text",list:"id-card-issue-places",class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.id_card_issue_place?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Chọn hoặc nhập nơi cấp CCCD",required:""},null,2),[[h,t(s).id_card_issue_place]]),r[21]||(r[21]=e("datalist",{id:"id-card-issue-places"},[e("option",{value:"Cục Cảnh sát quản lý hành chính về trật tự xã hội"},"Cục Cảnh sát quản lý hành chính về trật tự xã hội"),e("option",{value:"Cục Cảnh sát đăng ký quản lý cư trú và dữ liệu Quốc gia về dân cư"},"Cục Cảnh sát đăng ký quản lý cư trú và dữ liệu Quốc gia về dân cư")],-1)),t(s).errors.id_card_issue_place?(a(),n("p",oe,c(t(s).errors.id_card_issue_place),1)):d("",!0),r[22]||(r[22]=e("p",{class:"mt-1 text-xs text-gray-500"},"Bạn có thể chọn từ danh sách hoặc nhập tùy chỉnh",-1))]),e("div",ne,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[l(" Địa chỉ thường trú "),e("span",{class:"text-red-500"},"*")],-1)),y(e("textarea",{"onUpdate:modelValue":r[7]||(r[7]=o=>t(s).permanent_address=o),rows:"3",class:b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",t(s).errors.permanent_address?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập địa chỉ thường trú",required:""},null,2),[[h,t(s).permanent_address]]),t(s).errors.permanent_address?(a(),n("p",ae,c(t(s).errors.permanent_address),1)):d("",!0)]),e("div",de,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ảnh căn cước công dân ",-1)),e("div",le,[p.value||f.user.id_card_image?(a(),n("div",ie,[e("div",ue,[e("img",{src:p.value||f.user.id_card_image,alt:"Ảnh CCCD",class:"max-w-md w-full h-auto rounded-lg border-2 border-gray-300 object-contain",style:{"max-height":"400px"}},null,8,me),p.value?(a(),n("button",{key:0,type:"button",onClick:w,class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Xóa ảnh"},[i(t(E),{class:"w-5 h-5"})])):d("",!0)]),f.user.id_card_image&&!p.value?(a(),n("p",ce," Ảnh CCCD hiện tại ")):p.value?(a(),n("p",pe," Ảnh mới (chưa lưu) ")):d("",!0)])):d("",!0),e("input",{ref_key:"idCardImageInput",ref:g,type:"file",accept:"image/*",onChange:C,class:b(["block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-secondary",t(s).errors.id_card_image?"border-red-500":""])},null,34),t(s).errors.id_card_image?(a(),n("p",ge,c(t(s).errors.id_card_image),1)):d("",!0),r[24]||(r[24]=e("p",{class:"text-xs text-gray-500"}," Tải lên ảnh căn cước công dân (JPG, PNG, tối đa 5MB) ",-1))])])])])]),f.user.role==="manager"?(a(),n("div",be,[e("div",null,[e("h2",fe,[i(t(P),{class:"w-5 h-5 mr-2 text-primary"}),r[26]||(r[26]=l(" Chữ ký ",-1))]),r[27]||(r[27]=e("p",{class:"text-sm text-gray-600 mb-4"}," Chữ ký của bạn sẽ được hiển thị trên hợp đồng thuê trọ khi bạn là quản lý nhà trọ ",-1)),i(B,{modelValue:t(s).signature,"onUpdate:modelValue":r[8]||(r[8]=o=>t(s).signature=o),"has-error":!!t(s).errors.signature,"error-message":t(s).errors.signature,label:"Chữ ký của bạn",hint:"Vẽ chữ ký của bạn bằng chuột hoặc ngón tay. Chữ ký này sẽ được sử dụng trên hợp đồng thuê trọ.",required:!1,width:600,height:200},null,8,["modelValue","has-error","error-message"])])])):d("",!0),e("div",ye,[i(t($),{href:"/",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:v(()=>[...r[28]||(r[28]=[l(" Hủy ",-1)])]),_:1}),e("button",{type:"submit",disabled:t(s).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t(s).processing?(a(),n("span",_e,"Đang lưu...")):(a(),n("span",xe,"Lưu thông tin"))],8,he)])],32)])])]),_:1})],64))}};export{Ee as default};
