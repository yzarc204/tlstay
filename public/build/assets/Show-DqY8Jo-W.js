import{c as n,a as g,b as m,h as T,w as y,d as t,q as c,f as u,t as o,o as i,e as d,n as h,F as k,i as C}from"./app-aSgyFo0X.js";import{_ as D}from"./AdminLayout-CNDFy5fk.js";import{r as M}from"./ChevronLeftIcon-Ch2xdibq.js";/* empty css            */import"./FlashToaster-BuA4IbkD.js";import"./MapPinIcon-Dw12BWZl.js";import"./CalendarIcon-CTaZNyS6.js";import"./PhotoIcon-D5e3D0c4.js";import"./BuildingOfficeIcon-mpjZvsth.js";const $={class:"space-y-6"},V={class:"flex items-center justify-between"},j={class:"text-2xl font-bold text-gray-900"},P={class:"text-primary"},S={key:0,class:"text-center py-20"},B={key:1,class:"grid lg:grid-cols-3 gap-6"},H={class:"lg:col-span-2 space-y-6"},F={class:"bg-white rounded-lg shadow-sm p-6"},G={class:"grid md:grid-cols-2 gap-6"},L={class:"space-y-4"},X={class:"text-lg font-semibold text-gray-900"},q={class:"text-sm text-gray-600 mt-1"},E={class:"text-lg font-semibold text-gray-900"},z={key:0,class:"text-sm text-gray-600 mt-1"},I={class:"text-sm text-gray-600 mt-1"},K={class:"space-y-4"},O={class:"text-lg font-semibold text-gray-900"},Q={class:"text-lg font-semibold text-gray-900"},A={class:"text-lg font-semibold text-primary"},J={key:0,class:"mt-6 pt-6 border-t"},R={class:"text-gray-700 bg-gray-50 px-4 py-3 rounded-lg whitespace-pre-wrap"},U={class:"bg-white rounded-lg shadow-sm p-6"},W={class:"space-y-4"},Y={class:"flex justify-between items-center py-3 border-b"},Z={class:"font-semibold text-gray-900 text-lg"},tt={key:0,class:"flex justify-between items-center py-3 border-b"},et={class:"font-semibold text-green-600 text-lg"},st={class:"flex justify-between items-center pt-4 mt-2 border-t-2 border-gray-400"},ot={class:"text-3xl font-bold text-primary"},nt={class:"grid md:grid-cols-2 gap-6 mt-6 pt-6 border-t"},it={key:0},at={class:"font-semibold text-gray-900"},lt={key:1},dt={class:"font-semibold text-gray-900"},rt={key:2},gt={class:"font-mono text-sm text-gray-900 break-all"},mt={class:"bg-white rounded-lg shadow-sm p-6"},bt={class:"space-y-4"},xt={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},yt={class:"text-sm text-gray-600 mt-1"},ut={key:0,class:"text-green-600"},ct={key:1,class:"text-yellow-600"},ht={key:0,class:"text-xs text-gray-500 mt-1"},kt={class:"flex space-x-2"},ft=["href"],vt=["href"],pt={key:0,class:"bg-white rounded-lg shadow-sm p-6"},wt={class:"space-y-4"},_t={class:"flex items-start justify-between mb-3"},Nt={class:"font-semibold text-gray-900"},Tt={key:0,class:"text-sm text-gray-500 mt-1"},Ct={class:"grid md:grid-cols-2 gap-4 mb-4"},Dt={class:"font-semibold text-gray-900"},Mt={class:"font-semibold text-gray-900"},$t={class:"font-semibold text-gray-900"},Vt={class:"font-semibold text-primary text-lg"},jt={key:0,class:"text-xs text-gray-500"},Pt={key:1,class:"text-xs text-green-600 mt-1"},St={class:"space-y-6"},Bt={class:"bg-white rounded-lg shadow-sm p-6"},Ht={class:"space-y-4"},Ft={class:"font-semibold text-gray-900"},Gt={class:"text-gray-900"},Lt={key:0},Xt={class:"text-gray-900"},qt={key:1},Et={class:"text-gray-900"},zt={key:2},It={class:"text-gray-900"},Kt={key:3},Ot={class:"text-gray-900"},Qt={key:4},At={class:"text-gray-900"},Jt={class:"pt-4 border-t"},Rt={class:"bg-white rounded-lg shadow-sm p-6"},Ut={class:"space-y-3 text-sm"},Wt={class:"font-medium text-gray-900"},Yt={class:"font-mono text-gray-900"},re={__name:"Show",props:{booking:{type:Object,required:!0}},setup(s){const b=a=>a?new Date(a).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",x=a=>a?new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",r=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a),f=(a,e)=>{const l=new Date(a),_=new Date(e),N=Math.abs(_-l);return Math.ceil(N/(1e3*60*60*24))},v=a=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã kết thúc"})[a]||a,p=a=>({upcoming:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",past:"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800",w=a=>({vnpay:"VNPay",cash:"Tiền mặt",bank_transfer:"Chuyển khoản"})[a]||a;return(a,e)=>(i(),n(k,null,[g(m(T),{title:`Chi tiết đặt phòng #${s.booking?.booking_code||""}`},null,8,["title"]),g(D,{title:"Chi tiết đặt phòng"},{default:y(()=>[t("div",$,[t("div",V,[t("div",null,[g(m(c),{href:"/admin/bookings",class:"text-primary hover:text-primary-600 mb-2 inline-flex items-center text-sm"},{default:y(()=>[g(m(M),{class:"h-4 w-4 mr-1"}),e[0]||(e[0]=u(" Quay lại danh sách ",-1))]),_:1}),t("h1",j,[e[1]||(e[1]=u(" Chi tiết đặt phòng ",-1)),t("span",P,o(s.booking?.booking_code||`#${s.booking?.id}`),1)])])]),s.booking?(i(),n("div",B,[t("div",H,[t("div",F,[e[11]||(e[11]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Thông tin đặt phòng",-1)),t("div",G,[t("div",L,[t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Nhà trọ",-1)),t("p",X,o(s.booking.house.name),1),t("p",q,o(s.booking.house.address),1),g(m(c),{href:`/admin/houses/${s.booking.house.id}`,class:"text-primary hover:text-primary-dark text-sm mt-2 inline-block"},{default:y(()=>[...e[3]||(e[3]=[u(" Xem chi tiết nhà trọ → ",-1)])]),_:1},8,["href"])]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Phòng",-1)),t("p",E," Phòng "+o(s.booking.room.room_number)+" - Tầng "+o(s.booking.room.floor),1),s.booking.room.area?(i(),n("p",z," Diện tích: "+o(s.booking.room.area)+" m² ",1)):d("",!0),t("p",I," Giá: "+o(r(s.booking.room.price_per_day))+"/ngày ",1)])]),t("div",K,[t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Ngày nhận phòng",-1)),t("p",O,o(b(s.booking.start_date)),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Ngày trả phòng",-1)),t("p",Q,o(b(s.booking.end_date)),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Số ngày thuê",-1)),t("p",A,o(f(s.booking.start_date,s.booking.end_date))+" ngày",1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Trạng thái",-1)),t("span",{class:h(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",p(s.booking.booking_status)])},o(v(s.booking.booking_status)),3)])])]),s.booking.notes?(i(),n("div",J,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Ghi chú",-1)),t("p",R,o(s.booking.notes),1)])):d("",!0)]),t("div",U,[e[19]||(e[19]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Thông tin thanh toán",-1)),t("div",W,[t("div",Y,[e[12]||(e[12]=t("span",{class:"text-gray-700 font-medium"},"Tổng tiền phòng",-1)),t("span",Z,o(r(s.booking.total_price+s.booking.discount_amount)),1)]),s.booking.discount_amount>0?(i(),n("div",tt,[e[13]||(e[13]=t("span",{class:"text-gray-700 font-medium"},"Giảm giá",-1)),t("span",et," -"+o(r(s.booking.discount_amount)),1)])):d("",!0),t("div",st,[e[14]||(e[14]=t("span",{class:"text-xl font-bold text-gray-900"},"Tổng thanh toán",-1)),t("span",ot,o(r(s.booking.total_price)),1)])]),t("div",nt,[t("div",null,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Trạng thái thanh toán",-1)),t("span",{class:h(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",s.booking.payment_status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(s.booking.payment_status==="paid"?"Đã thanh toán":"Chưa thanh toán"),3)]),s.booking.payment_method?(i(),n("div",it,[e[16]||(e[16]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Phương thức thanh toán",-1)),t("p",at,o(w(s.booking.payment_method)),1)])):d("",!0),s.booking.paid_at?(i(),n("div",lt,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Thời gian thanh toán",-1)),t("p",dt,o(x(s.booking.paid_at)),1)])):d("",!0),s.booking.vnpay_transaction_id?(i(),n("div",rt,[e[18]||(e[18]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Mã giao dịch",-1)),t("p",gt,o(s.booking.vnpay_transaction_id),1)])):d("",!0)])]),t("div",mt,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Hợp đồng",-1)),t("div",bt,[t("div",xt,[t("div",null,[e[20]||(e[20]=t("p",{class:"font-semibold text-gray-900"},"Trạng thái hợp đồng",-1)),t("p",yt,[s.booking.contract_signed?(i(),n("span",ut,"Đã ký hợp đồng")):(i(),n("span",ct,"Chưa ký hợp đồng"))]),s.booking.signed_at?(i(),n("p",ht," Đã ký vào: "+o(x(s.booking.signed_at)),1)):d("",!0)]),t("div",kt,[t("a",{href:`/contract/${s.booking.id}/preview`,target:"_blank",class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors"}," Xem hợp đồng ",8,ft),t("a",{href:`/contract/${s.booking.id}`,target:"_blank",class:"px-4 py-2 border-2 border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-colors"}," Tải PDF ",8,vt)])])])]),s.booking.invoices&&s.booking.invoices.length>0?(i(),n("div",pt,[e[26]||(e[26]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Hóa đơn dịch vụ",-1)),t("div",wt,[(i(!0),n(k,null,C(s.booking.invoices,l=>(i(),n("div",{key:l.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[t("div",_t,[t("div",null,[t("p",Nt,o(l.month_year||`Hóa đơn ${l.month}/${l.year}`),1),l.invoice_code?(i(),n("p",Tt," Mã: "+o(l.invoice_code),1)):d("",!0)]),t("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",l.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(l.status==="paid"?"Đã thanh toán":"Chưa thanh toán"),3)]),t("div",Ct,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-600"},"Điện",-1)),t("p",Dt,o(r(l.electricity_amount)),1)]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-sm text-gray-600"},"Nước",-1)),t("p",Mt,o(r(l.water_amount)),1)]),t("div",null,[e[24]||(e[24]=t("p",{class:"text-sm text-gray-600"},"Phí khác",-1)),t("p",$t,o(r(l.other_fees||0)),1)]),t("div",null,[e[25]||(e[25]=t("p",{class:"text-sm text-gray-600"},"Tổng tiền",-1)),t("p",Vt,o(r(l.amount)),1)])]),l.due_date?(i(),n("div",jt," Hạn thanh toán: "+o(b(l.due_date)),1)):d("",!0),l.paid_at?(i(),n("div",Pt," Đã thanh toán: "+o(x(l.paid_at)),1)):d("",!0)]))),128))])])):d("",!0)]),t("div",St,[t("div",Bt,[e[35]||(e[35]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin khách hàng",-1)),t("div",Ht,[t("div",null,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Họ tên",-1)),t("p",Ft,o(s.booking.user.name),1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Email",-1)),t("p",Gt,o(s.booking.user.email),1)]),s.booking.user.phone?(i(),n("div",Lt,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Số điện thoại",-1)),t("p",Xt,o(s.booking.user.phone),1)])):d("",!0),s.booking.user.id_card_number?(i(),n("div",qt,[e[30]||(e[30]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"CMND/CCCD",-1)),t("p",Et,o(s.booking.user.id_card_number),1)])):d("",!0),s.booking.user.permanent_address?(i(),n("div",zt,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Địa chỉ thường trú",-1)),t("p",It,o(s.booking.user.permanent_address),1)])):d("",!0),s.booking.user.date_of_birth?(i(),n("div",Kt,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Ngày sinh",-1)),t("p",Ot,o(b(s.booking.user.date_of_birth)),1)])):d("",!0),s.booking.user.gender?(i(),n("div",Qt,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500 block mb-1"},"Giới tính",-1)),t("p",At,o(s.booking.user.gender==="male"?"Nam":s.booking.user.gender==="female"?"Nữ":"Khác"),1)])):d("",!0),t("div",Jt,[g(m(c),{href:`/admin/users/${s.booking.user.id}`,class:"text-primary hover:text-primary-dark text-sm font-medium"},{default:y(()=>[...e[34]||(e[34]=[u(" Xem chi tiết khách hàng → ",-1)])]),_:1},8,["href"])])])]),t("div",Rt,[e[38]||(e[38]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin khác",-1)),t("div",Ut,[t("div",null,[e[36]||(e[36]=t("label",{class:"text-gray-500"},"Ngày tạo đơn",-1)),t("p",Wt,o(x(s.booking.created_at)),1)]),t("div",null,[e[37]||(e[37]=t("label",{class:"text-gray-500"},"Mã đặt phòng",-1)),t("p",Yt,o(s.booking.booking_code||`#${s.booking.id}`),1)])])])])])):(i(),n("div",S,[...e[2]||(e[2]=[t("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin...",-1)])]))])]),_:1})],64))}};export{re as default};
