import{c as r,d as e,o as n,A as T,r as _,a as i,b as l,h as A,w as g,e as c,q as D,f as x,y as v,t as a,n as y,F as M,i as K,k as $,g as L,v as F,l as C}from"./app-Q4frB4sj.js";import{_ as U}from"./AdminLayout-CVKx4mcn.js";import{_ as b}from"./Button-CNiAn4Aw.js";import{r as q}from"./ChevronLeftIcon-Ma9REeVf.js";import{r as z}from"./EnvelopeIcon-COSwqff5.js";import{r as G}from"./PhoneIcon-CK8KfLDH.js";import{r as k}from"./CalendarIcon-XIBo46Rf.js";import{r as O}from"./IdentificationIcon-CeZoIpRM.js";import{r as Q}from"./UserIcon-DRE7pUcH.js";import{r as E}from"./MapPinIcon-DI9eWFIp.js";import{r as I}from"./DocumentTextIcon-ixAgXsVf.js";import{r as P}from"./ShieldCheckIcon-BfMbzlbl.js";/* empty css            */import"./FlashToaster-pcLPGBCJ.js";import"./PhotoIcon-BirSBV19.js";import"./BuildingOfficeIcon-Dv5srJWW.js";function R(s,u){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})])}function J(s,u){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function V(s,u){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})])}const W={class:"space-y-6"},X={class:"flex items-center justify-between"},Y={class:"flex gap-2"},ee={class:"bg-white rounded-lg shadow-sm p-6"},te={class:"flex items-start gap-6"},se={class:"flex-shrink-0"},ne={class:"h-20 w-20 rounded-full bg-primary/10 flex items-center justify-center"},re={class:"text-3xl text-primary font-bold"},ae={class:"flex-1"},ie={class:"flex items-center gap-3 mb-2"},le={class:"text-xl font-bold text-gray-900"},de={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},oe={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},ue={class:"space-y-2 text-sm text-gray-600"},ce={class:"flex items-center gap-2"},me={key:0,class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},ge={key:1,class:"flex items-center gap-2 text-red-600"},xe={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},fe={class:"text-sm text-red-700"},ve={class:"bg-white rounded-lg shadow-sm p-6"},ye={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={key:0,class:"flex items-start gap-3"},pe={class:"flex-shrink-0 mt-0.5"},_e={class:"text-sm text-gray-900"},ke={key:1,class:"flex items-start gap-3"},we={class:"flex-shrink-0 mt-0.5"},Me={class:"text-sm text-gray-900"},$e={key:2,class:"flex items-start gap-3 md:col-span-2"},Ce={class:"flex-shrink-0 mt-0.5"},Ve={class:"flex-1"},je={class:"text-sm text-gray-900"},Ze={key:3,class:"flex items-start gap-3"},Be={class:"flex-shrink-0 mt-0.5"},He={class:"text-sm text-gray-900"},Ne={key:4,class:"flex items-start gap-3"},Se={class:"flex-shrink-0 mt-0.5"},Te={class:"text-sm text-gray-900"},Ae={key:5,class:"flex items-start gap-3 md:col-span-2"},De={class:"flex-shrink-0 mt-0.5"},Ke={class:"flex-1"},Le={class:"text-sm text-gray-900"},Fe={key:1,class:"text-center py-8 text-gray-500"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},qe={class:"bg-white rounded-lg shadow-sm p-6"},ze={class:"flex items-center justify-between"},Ge={class:"text-2xl font-bold text-gray-900 mt-1"},Oe={class:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center"},Qe={class:"bg-white rounded-lg shadow-sm p-6"},Ee={class:"flex items-center justify-between"},Ie={class:"text-2xl font-bold text-gray-900 mt-1"},Pe={class:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"},Re={class:"bg-white rounded-lg shadow-sm p-6"},Je={class:"flex items-center justify-between"},We={class:"bg-white rounded-lg shadow-sm p-6"},Xe={key:0,class:"space-y-4"},Ye={class:"flex items-center justify-between"},et={class:"font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},st={key:1,class:"text-center py-8 text-gray-500"},nt={class:"flex items-center justify-center min-h-screen px-4"},rt={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},at={class:"mb-4"},it={class:"flex justify-end gap-3"},wt={__name:"Show",props:{user:Object},setup(s){const u=s,j=T(()=>u.user.id_card_number||u.user.id_card_issue_date||u.user.id_card_issue_place||u.user.permanent_address||u.user.date_of_birth||u.user.gender),m=_(!1),h=_(""),f=_(!1),Z=()=>{h.value&&(f.value=!0,C.post(`/admin/users/${u.user.id}/ban`,{ban_reason:h.value},{preserveScroll:!0,onFinish:()=>{f.value=!1,m.value=!1,h.value=""}}))},B=()=>{confirm("Bạn có chắc chắn muốn mở khóa tài khoản này?")&&C.post(`/admin/users/${u.user.id}/unban`,{},{preserveScroll:!0})},p=d=>d?new Date(d).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",w=d=>d?new Date(d).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",H=d=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã ở",pending:"Chờ thanh toán",completed:"Đã kết thúc",cancelled:"Đã hủy"})[d]||d,N=d=>({upcoming:"bg-amber-100 text-amber-800 border border-amber-300",active:"bg-green-100 text-green-700",past:"bg-gray-100 text-gray-600",pending:"bg-yellow-100 text-yellow-700",completed:"bg-gray-100 text-gray-600",cancelled:"bg-red-100 text-red-700"})[d]||"bg-gray-100 text-gray-600",S=d=>({male:"Nam",female:"Nữ",other:"Khác"})[d]||d;return(d,t)=>(n(),r(M,null,[i(l(A),{title:"Chi tiết Tài khoản"}),i(U,{title:"Chi tiết Tài khoản"},{default:g(()=>[e("div",W,[e("div",X,[e("div",null,[i(l(D),{href:"/admin/users",class:"text-primary hover:text-primary-600 mb-2 inline-flex items-center text-sm"},{default:g(()=>[i(l(q),{class:"h-4 w-4 mr-1"}),t[5]||(t[5]=x(" Quay lại danh sách ",-1))]),_:1}),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Chi tiết Tài khoản",-1))]),e("div",Y,[s.user.banned_at?(n(),v(b,{key:1,variant:"default",onClick:B},{default:g(()=>[...t[8]||(t[8]=[x(" Mở khóa tài khoản ",-1)])]),_:1})):(n(),v(b,{key:0,variant:"destructive",onClick:t[0]||(t[0]=o=>m.value=!0),disabled:s.user.role==="manager"||s.user.id===d.$page.props.auth.user.id},{default:g(()=>[...t[7]||(t[7]=[x(" Khóa tài khoản ",-1)])]),_:1},8,["disabled"]))])]),e("div",ee,[e("div",te,[e("div",se,[e("div",ne,[e("span",re,a(s.user.name.charAt(0).toUpperCase()),1)])]),e("div",ae,[e("div",ie,[e("h2",le,a(s.user.name),1),e("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.user.role==="manager"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"])},a(s.user.role==="manager"?"Quản lý":"Khách hàng"),3),s.user.banned_at?(n(),r("span",de," Đã khóa ")):(n(),r("span",oe," Hoạt động "))]),e("div",ue,[e("div",ce,[i(l(z),{class:"h-4 w-4"}),e("span",null,a(s.user.email),1)]),s.user.phone?(n(),r("div",me,[i(l(G),{class:"h-4 w-4"}),e("span",null,a(s.user.phone),1)])):c("",!0),e("div",he,[i(l(k),{class:"h-4 w-4"}),e("span",null,"Tham gia: "+a(p(s.user.created_at)),1)]),s.user.banned_at?(n(),r("div",ge,[i(l(V),{class:"h-4 w-4"}),e("span",null,"Bị khóa vào: "+a(p(s.user.banned_at)),1)])):c("",!0)]),s.user.ban_reason?(n(),r("div",xe,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-red-800 mb-1"},"Lý do khóa:",-1)),e("p",fe,a(s.user.ban_reason),1)])):c("",!0)])])]),e("div",ve,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin cá nhân",-1)),j.value?(n(),r("div",ye,[s.user.id_card_number?(n(),r("div",be,[e("div",pe,[i(l(O),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Số căn cước công dân",-1)),e("p",_e,a(s.user.id_card_number),1)])])):c("",!0),s.user.id_card_issue_date?(n(),r("div",ke,[e("div",we,[i(l(J),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Ngày cấp",-1)),e("p",Me,a(w(s.user.id_card_issue_date)),1)])])):c("",!0),s.user.id_card_issue_place?(n(),r("div",$e,[e("div",Ce,[i(l(R),{class:"h-5 w-5 text-gray-400"})]),e("div",Ve,[t[12]||(t[12]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Nơi cấp",-1)),e("p",je,a(s.user.id_card_issue_place),1)])])):c("",!0),s.user.date_of_birth?(n(),r("div",Ze,[e("div",Be,[i(l(k),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Ngày sinh",-1)),e("p",He,a(w(s.user.date_of_birth)),1)])])):c("",!0),s.user.gender?(n(),r("div",Ne,[e("div",Se,[i(l(Q),{class:"h-5 w-5 text-gray-400"})]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Giới tính",-1)),e("p",Te,a(S(s.user.gender)),1)])])):c("",!0),s.user.permanent_address?(n(),r("div",Ae,[e("div",De,[i(l(E),{class:"h-5 w-5 text-gray-400"})]),e("div",Ke,[t[15]||(t[15]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Địa chỉ thường trú",-1)),e("p",Le,a(s.user.permanent_address),1)])])):c("",!0)])):(n(),r("div",Fe,[...t[16]||(t[16]=[e("p",{class:"text-sm"},"Chưa cập nhật thông tin cá nhân",-1)])]))]),e("div",Ue,[e("div",qe,[e("div",ze,[e("div",null,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Tổng đặt phòng",-1)),e("p",Ge,a(s.user.bookings?.length||0),1)]),e("div",Oe,[i(l(k),{class:"h-6 w-6 text-blue-600"})])])]),e("div",Qe,[e("div",Ee,[e("div",null,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-600"},"Tổng hóa đơn",-1)),e("p",Ie,a(s.user.invoices?.length||0),1)]),e("div",Pe,[i(l(I),{class:"h-6 w-6 text-green-600"})])])]),e("div",Re,[e("div",Je,[e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm font-medium text-gray-600"},"Trạng thái",-1)),e("p",{class:y(["text-lg font-semibold mt-1",s.user.banned_at?"text-red-600":"text-green-600"])},a(s.user.banned_at?"Đã khóa":"Hoạt động"),3)]),e("div",{class:y(["h-12 w-12 rounded-full flex items-center justify-center",s.user.banned_at?"bg-red-100":"bg-green-100"])},[s.user.banned_at?(n(),v(l(V),{key:1,class:"h-6 w-6 text-red-600"})):(n(),v(l(P),{key:0,class:"h-6 w-6 text-green-600"}))],2)])])]),e("div",We,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Đặt phòng gần đây",-1)),s.user.bookings&&s.user.bookings.length>0?(n(),r("div",Xe,[(n(!0),r(M,null,K(s.user.bookings,o=>(n(),r("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50"},[e("div",Ye,[e("div",null,[e("p",et,a(o.booking_code?`Mã: ${o.booking_code}`:`Đặt phòng #${o.id}`),1),e("p",tt,a(p(o.created_at)),1)]),e("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",N(o.booking_status||o.status)])},a(H(o.booking_status||o.status)),3)])]))),128))])):(n(),r("div",st,[...t[21]||(t[21]=[e("p",null,"Chưa có đặt phòng nào",-1)])]))]),m.value?(n(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[4]||(t[4]=$(o=>m.value=!1,["self"]))},[e("div",nt,[e("div",{class:"fixed inset-0 bg-black opacity-50",onClick:t[1]||(t[1]=o=>m.value=!1)}),e("div",rt,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Khóa tài khoản",-1)),e("form",{onSubmit:$(Z,["prevent"])},[e("div",at,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[x(" Lý do khóa "),e("span",{class:"text-red-500"},"*")],-1)),L(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>h.value=o),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập lý do khóa tài khoản...",required:""},null,512),[[F,h.value]])]),e("div",it,[i(b,{type:"button",variant:"outline",onClick:t[3]||(t[3]=o=>m.value=!1)},{default:g(()=>[...t[24]||(t[24]=[x(" Hủy ",-1)])]),_:1}),i(b,{type:"submit",variant:"destructive",disabled:!h.value||f.value},{default:g(()=>[x(a(f.value?"Đang xử lý...":"Khóa tài khoản"),1)]),_:1},8,["disabled"])])],32)])])])):c("",!0)])]),_:1})],64))}};export{wt as default};
