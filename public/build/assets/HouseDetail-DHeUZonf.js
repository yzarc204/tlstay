import{c as l,d as t,o as a,u as V,A as u,r as j,B as D,a as i,b as n,h as z,w as A,e as f,t as d,F as $,i as E,y as F,X as R,f as m,q as S,l as q}from"./app-ppQx7_BQ.js";import{u as G,_ as O}from"./AppLayout-Dce57s_x.js";import{g as Z,b as U}from"./amenityIcons-D28qFCYA.js";import{r as W}from"./ChevronLeftIcon-DRQc4L3z.js";import{r as X}from"./ChevronRightIcon-B2ECy7WU.js";import{r as J}from"./MapPinIcon-L4fB1UUx.js";import{r as K}from"./HeartIcon-ByqfTEAb.js";import{r as Q}from"./BuildingOfficeIcon-D5_B3Cmo.js";import{b as Y}from"./FlashToaster-DRaP0e7V.js";import{r as H}from"./CheckCircleIcon-atlLlc5X.js";import{r as tt}from"./MapIcon-B-UU43go.js";import{r as et}from"./CalendarIcon-B2fvGfwC.js";import{r as C}from"./PhoneIcon-CjeMPSAD.js";import{r as st}from"./EnvelopeIcon-5t1JJDL_.js";/* empty css            */import"./auth-Dd3eNE4X.js";import"./ChevronDownIcon-DduOYqOw.js";import"./UserIcon-CSwJth4e.js";import"./DocumentTextIcon-BKIo3o-k.js";function rt(o,h){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function ot(o,h){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function nt(o,h){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}const it={class:"house-detail bg-light min-h-screen"},at={key:0,class:"container mx-auto px-4 py-20 text-center"},lt={key:1,class:"pb-12"},dt={class:"relative h-96 md:h-[500px] bg-gray-900 overflow-hidden"},ct=["src","alt"],ut={class:"container mx-auto px-4 -mt-20 relative z-10"},mt={class:"grid lg:grid-cols-3 gap-8"},ht={class:"lg:col-span-2"},gt={class:"card p-8 mb-6"},xt={class:"flex items-start justify-between mb-6"},ft={class:"text-3xl md:text-4xl font-bold text-secondary mb-3"},yt={class:"flex items-center text-gray-600 mb-2"},pt={class:"flex items-center space-x-4"},vt={class:"flex items-center"},bt={class:"font-semibold"},_t={class:"text-gray-500 ml-1"},wt={class:"badge bg-primary-100 text-primary-700"},kt={class:"w-12 h-12 bg-secondary-50 rounded-full flex items-center justify-center hover:bg-secondary hover:text-white transition-all"},jt={class:"grid grid-cols-3 gap-4 py-6 border-y"},At={class:"text-center"},$t={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Ct={class:"text-2xl font-bold text-primary"},Tt={class:"text-center"},Lt={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Bt={class:"text-2xl font-bold text-primary"},Nt={class:"text-center"},Pt={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},It={class:"text-2xl font-bold text-primary"},Mt={class:"mt-6"},Vt={class:"text-gray-600 leading-relaxed"},Dt={class:"mt-8"},zt={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Et={class:"text-gray-700"},Ft={key:1,class:"text-center py-8 text-gray-500"},Rt={class:"mt-8"},St={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qt={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Gt={class:"flex items-center space-x-3"},Ot={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Zt={class:"flex items-center space-x-3"},Ut={class:"mt-8"},Wt={key:0,class:"rounded-xl overflow-hidden shadow-lg"},Xt=["src"],Jt={key:1,class:"bg-gray-200 rounded-xl h-80 flex items-center justify-center"},Kt={class:"text-center"},Qt={class:"lg:col-span-1"},Yt={class:"card p-6 sticky top-24"},Ht={class:"mb-6"},te={class:"space-y-3"},ee={class:"flex items-center justify-between p-3 bg-light rounded-lg"},se={class:"font-bold text-secondary"},re={class:"flex items-center justify-between p-3 bg-light rounded-lg"},oe={class:"text-right"},ne={class:"font-bold text-secondary"},ie={class:"flex items-center justify-between p-3 bg-primary/10 rounded-lg border-2 border-primary"},ae={class:"text-right"},le={class:"font-bold text-primary text-lg"},de={class:"w-full btn-outline"},ce={key:0,class:"text-sm text-center text-gray-500 mt-4"},ue={class:"mt-6 pt-6 border-t"},me={class:"space-y-2 text-sm text-gray-600"},he={key:0,class:"flex items-center"},ge={key:1,class:"flex items-center"},Me={__name:"HouseDetail",props:{house:{type:Object,default:null},rooms:{type:Array,default:()=>[]}},setup(o){const h=V(),b=u(()=>h.props?.siteSettings?.contact_phone||"+84 123 456 789"),_=u(()=>h.props?.siteSettings?.contact_email||"contact@tlstay.com"),r=o,{isAuthenticated:T}=G(),g=j(""),c=j(0),w=u(()=>r.house?.amenities?Array.isArray(r.house.amenities)?r.house.amenities.filter(Boolean):typeof r.house.amenities=="object"?Object.keys(r.house.amenities).filter(s=>r.house.amenities[s]):[]:[]);D(()=>r.house,s=>{if(s){const e=s.featured_images&&Array.isArray(s.featured_images)&&s.featured_images.length>0?s.featured_images:Array.isArray(s.images)&&s.images.length>0?s.images:[];e.length>0?(g.value=e[0],c.value=0):(g.value=s.image||"",c.value=0)}},{immediate:!0});const k=(s,e)=>{if(!s||!e)return 0;const x=s*e;let v=0;return e>=30?v=.2:e>=7&&(v=.1),Math.round(x*(1-v))},L=u(()=>r.house?k(r.house.pricePerDay,7):0),B=u(()=>r.house?k(r.house.pricePerDay,30):0),N=u(()=>{if(!r.house?.latitude||!r.house?.longitude)return"";const s=r.house.latitude,e=r.house.longitude;return`https://www.google.com/maps?q=${s},${e}&hl=vi&z=15&output=embed`}),y=u(()=>r.house?r.house.featured_images&&Array.isArray(r.house.featured_images)&&r.house.featured_images.length>0?r.house.featured_images:r.house.images&&Array.isArray(r.house.images)&&r.house.images.length>0?r.house.images:r.house.image?[r.house.image]:[]:[]),P=()=>{const s=y.value;!s||s.length===0||(c.value=(c.value+1)%s.length,g.value=s[c.value])},I=()=>{const s=y.value;!s||s.length===0||(c.value=c.value===0?s.length-1:c.value-1,g.value=s[c.value])},p=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s),M=()=>{r.house?.id&&q.visit(`/booking/${r.house.id}`)};return(s,e)=>(a(),l($,null,[i(n(z),{title:o.house?.name||"Chi tiết nhà trọ"},null,8,["title"]),i(O,null,{default:A(()=>[t("div",it,[o.house?(a(),l("div",lt,[t("div",dt,[t("img",{src:g.value||o.house.image,alt:o.house.name,class:"w-full h-full object-cover transition-opacity duration-300"},null,8,ct),y.value.length>1?(a(),l("button",{key:0,onClick:I,class:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[i(n(W),{class:"w-6 h-6 text-gray-800"})])):f("",!0),y.value.length>1?(a(),l("button",{key:1,onClick:P,class:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[i(n(X),{class:"w-6 h-6 text-gray-800"})])):f("",!0)]),t("div",ut,[t("div",mt,[t("div",ht,[t("div",gt,[t("div",xt,[t("div",null,[t("h1",ft,d(o.house.name),1),t("div",yt,[i(n(J),{class:"w-5 h-5 mr-2"}),t("span",null,d(o.house.address),1)]),t("div",pt,[t("div",vt,[i(n(nt),{class:"w-5 h-5 text-yellow-400 mr-1"}),t("span",bt,d(o.house.rating),1),t("span",_t,"("+d(o.house.reviews)+" reviews)",1)]),t("span",wt,d(o.house.availableRooms)+" phòng trống ",1)])]),t("button",kt,[i(n(K),{class:"w-6 h-6"})])]),t("div",jt,[t("div",At,[t("div",$t,[i(n(Q),{class:"w-6 h-6 text-primary"})]),t("p",Ct,d(o.house.floors),1),e[1]||(e[1]=t("p",{class:"text-sm text-gray-600"},"Tầng",-1))]),t("div",Tt,[t("div",Lt,[i(n(Y),{class:"w-6 h-6 text-primary"})]),t("p",Bt,d(o.house.totalRooms),1),e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Tổng phòng",-1))]),t("div",Nt,[t("div",Pt,[i(n(H),{class:"w-6 h-6 text-primary"})]),t("p",It,d(o.house.availableRooms),1),e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Còn trống",-1))])]),t("div",Mt,[e[4]||(e[4]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Mô tả",-1)),t("p",Vt,d(o.house.description),1)]),t("div",Dt,[e[6]||(e[6]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Tiện nghi",-1)),w.value.length>0?(a(),l("div",zt,[(a(!0),l($,null,E(w.value,x=>(a(),l("div",{key:x,class:"flex items-center space-x-3 p-3 bg-light rounded-lg hover:bg-gray-50 transition-colors"},[(a(),F(R(n(Z)(x)),{class:"w-5 h-5 text-primary flex-shrink-0"})),t("span",Et,d(n(U)(x)),1)]))),128))])):(a(),l("div",Ft,[...e[5]||(e[5]=[t("p",null,"Chưa có thông tin tiện nghi",-1)])]))]),t("div",Rt,[e[11]||(e[11]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Giá dịch vụ",-1)),e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 mb-4"},"Áp dụng cho gói thuê theo tháng",-1)),t("div",St,[t("div",qt,[t("div",Gt,[i(n(ot),{class:"w-6 h-6 text-yellow-500"}),e[7]||(e[7]=t("div",null,[t("p",{class:"font-semibold text-gray-800"},"Điện"),t("p",{class:"text-sm text-gray-500"},"Tính theo số điện")],-1))]),e[8]||(e[8]=t("span",{class:"font-bold text-secondary text-lg"},"4.000đ / số",-1))]),t("div",Ot,[t("div",Zt,[i(n(rt),{class:"w-6 h-6 text-blue-500"}),e[9]||(e[9]=t("div",null,[t("p",{class:"font-semibold text-gray-800"},"Nước"),t("p",{class:"text-sm text-gray-500"},"Tính theo khối")],-1))]),e[10]||(e[10]=t("span",{class:"font-bold text-secondary text-lg"},"25.000đ / khối",-1))])])]),t("div",Ut,[e[14]||(e[14]=t("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Vị trí",-1)),o.house.latitude&&o.house.longitude?(a(),l("div",Wt,[t("iframe",{src:N.value,width:"100%",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"w-full"},null,8,Xt)])):(a(),l("div",Jt,[t("div",Kt,[i(n(tt),{class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),e[13]||(e[13]=t("p",{class:"text-gray-500"},"Thông tin vị trí chưa có sẵn",-1))])]))])])]),t("div",Qt,[t("div",Yt,[t("div",Ht,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-600 mb-2"},"Giá thuê",-1)),t("div",te,[t("div",ee,[e[15]||(e[15]=t("span",{class:"text-gray-700"},"Theo ngày",-1)),t("span",se,d(p(o.house.pricePerDay)),1)]),t("div",re,[e[17]||(e[17]=t("span",{class:"text-gray-700"},"Theo tuần",-1)),t("div",oe,[t("span",ne,d(p(L.value)),1),e[16]||(e[16]=t("span",{class:"text-xs text-primary ml-2"},"(-10%)",-1))])]),t("div",ie,[e[19]||(e[19]=t("span",{class:"text-gray-700"},"Theo tháng",-1)),t("div",ae,[t("span",le,d(p(B.value)),1),e[18]||(e[18]=t("span",{class:"text-xs text-primary ml-2"},"(-20%)",-1))])])])]),t("button",{onClick:M,class:"w-full btn-primary mb-3"},[i(n(et),{class:"w-5 h-5 inline mr-2"}),e[21]||(e[21]=m(" Đặt phòng ngay ",-1))]),t("button",de,[i(n(C),{class:"w-5 h-5 inline mr-2"}),e[22]||(e[22]=m(" Liên hệ ",-1))]),n(T)?f("",!0):(a(),l("p",ce,[i(n(S),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:A(()=>[...e[23]||(e[23]=[m(" Đăng nhập ",-1)])]),_:1}),e[24]||(e[24]=m(" để đặt phòng ",-1))])),t("div",ue,[e[25]||(e[25]=t("h3",{class:"font-semibold text-gray-800 mb-3"},"Thông tin liên hệ",-1)),t("div",me,[b.value?(a(),l("p",he,[i(n(C),{class:"w-4 h-4 mr-2"}),m(" "+d(b.value),1)])):f("",!0),_.value?(a(),l("p",ge,[i(n(st),{class:"w-4 h-4 mr-2"}),m(" "+d(_.value),1)])):f("",!0)])])])])])])])):(a(),l("div",at,[...e[0]||(e[0]=[t("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin nhà trọ...",-1)])]))])]),_:1})],64))}};export{Me as default};
