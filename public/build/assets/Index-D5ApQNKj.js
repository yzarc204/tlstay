import{c as r,d as e,o as l,x as P,r as f,z as Y,p as E,H as G,a as m,b as o,h as J,w as H,e as u,n as C,t as d,k as W,f as g,g as y,s as M,F as V,i as I,v,q as ee,j as te,l as L}from"./app-Bt1z262F.js";import{_ as se}from"./AdminLayout-BWBzxaGH.js";import{r as oe,u as re}from"./FlashToaster-Cms5pOrK.js";import{u as le}from"./useConfirm-CJ45mfKP.js";import{r as ae}from"./ArrowPathIcon-II6zwCTt.js";import{r as ne}from"./PhotoIcon-XxQ97rfc.js";import{r as ie}from"./PhoneIcon-BBaC4Ve5.js";import{r as de}from"./PlusIcon-4deMBA9o.js";import{r as ce}from"./PencilIcon-iU7jfV3l.js";import{r as ue}from"./TrashIcon-CTlhtgkE.js";/* empty css            */import"./MapPinIcon-BbjlIJa0.js";import"./CalendarIcon-BObuev7c.js";import"./BuildingOfficeIcon-BL8SXywi.js";function X(x,b){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const pe={class:"space-y-6"},me={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-3"},ye=["disabled"],be={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},fe={class:"text-green-800 whitespace-pre-line"},xe={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},he={class:"text-red-800 whitespace-pre-line"},ve={key:0,class:"space-y-6"},ke={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},_e={class:"space-y-6"},we={class:"space-y-2"},Ce={class:"space-y-4"},Le={key:0,class:"flex items-center space-x-4"},$e={class:"relative"},Ve=["src"],Te={key:0,class:"text-sm text-red-600 mt-1"},Se={key:1,class:"flex items-center space-x-2 pt-2 border-t"},Ue={key:0,class:"space-y-2"},je={class:"block text-sm font-medium text-gray-700"},Fe={key:0,class:"text-xs text-gray-500 font-normal block mt-1"},Ne=["onUpdate:modelValue","placeholder"],Ae=["onUpdate:modelValue","placeholder"],Ie=["onUpdate:modelValue","placeholder"],Be={key:3,class:"text-sm text-red-600"},Ee={key:1,class:"space-y-6 border-t pt-6"},He={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Me={class:"space-y-6"},Xe={key:0,class:"space-y-2"},De={class:"block text-sm font-medium text-gray-700"},Oe={key:0,class:"text-xs text-gray-500 font-normal block mt-1"},ze=["onUpdate:modelValue","placeholder"],Re=["onUpdate:modelValue","placeholder"],Ze={key:2,class:"text-sm text-red-600"},qe={class:"flex justify-end space-x-4 pt-6 border-t"},Qe=["disabled"],Ke={key:0},Pe={key:1},Ye={class:"bg-white rounded-lg shadow-sm p-6 space-y-6"},Ge={class:"flex items-center justify-between"},Je={class:"text-lg font-semibold text-gray-900 mb-1 flex items-center"},We={key:0,class:"border rounded-lg p-4 bg-gray-50"},et={class:"font-semibold text-gray-900 mb-4"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},st={class:"md:col-span-2"},ot={class:"flex items-end"},rt={class:"flex items-center"},lt={class:"flex justify-end space-x-3 mt-4"},at=["disabled"],nt={key:1,class:"space-y-3"},it={class:"flex items-center space-x-4 flex-1"},dt={class:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center"},ct={class:"text-sm font-semibold text-gray-600 uppercase"},ut={class:"flex-1"},pt={class:"flex items-center space-x-2"},mt={class:"font-medium text-gray-900"},gt={class:"text-sm text-gray-600 mt-1"},yt={class:"text-sm text-gray-500"},bt={class:"flex items-center space-x-2 ml-4"},ft=["onClick"],xt=["onClick"],ht={key:2,class:"text-center py-8 text-gray-500"},At={__name:"Index",props:{settings:{type:Object,required:!0},socialLinks:{type:Array,default:()=>[]}},setup(x){const b=x,j=re(),B=le(),p=P({settings:{}}),k=f(null),h=f(null),F=f(null),_=f(!0),$=f(!1);Y(()=>{b.settings&&typeof b.settings=="object"&&Object.keys(b.settings).forEach(a=>{b.settings[a]&&Array.isArray(b.settings[a])&&b.settings[a].forEach(s=>{s&&s.key&&(p.settings[s.key]=s.value||"",s.key==="site_logo"&&s.value&&(h.value=s.value),s.key==="site_logo_show_text"&&(_.value=s.value==="1"||s.value==="true"||s.value===!0||s.value===1))})}),_.value===void 0&&(_.value=!0)});const i=E({settings:[],logo:null,delete_logo:!1}),T=f(null),D=a=>{const s=a.target.files[0];if(s){F.value=s,i.delete_logo=!1;const t=new FileReader;t.onload=c=>{k.value=c.target.result},t.readAsDataURL(s)}},O=()=>{k.value=null,F.value=null,h.value=null,i.delete_logo=!0,T.value&&(T.value.value="")},z=()=>{const a=Object.keys(p.settings).map(s=>({key:s,value:p.settings[s]||""}));a.push({key:"site_logo_show_text",value:_.value?"1":"0"}),i.settings=a,i.logo=F.value,i.post("/admin/settings",{preserveScroll:!0,forceFormData:!0,onSuccess:s=>{if(j.success("Cài đặt đã được cập nhật thành công!"),k.value=null,F.value=null,s.props.settings){const t=Object.values(s.props.settings).flat().find(U=>U&&U.key==="site_logo");t?h.value=t.value||null:h.value=null;const c=Object.values(s.props.settings).flat().find(U=>U&&U.key==="site_logo_show_text");c&&(_.value=c.value==="1"||c.value==="true")}L.reload({only:["settings"]})},onError:()=>{j.error("Có lỗi xảy ra khi cập nhật cài đặt. Vui lòng thử lại.")}})},R=()=>{B.show({title:"Xóa cache cài đặt",message:"Bạn có chắc chắn muốn xóa cache cài đặt? Điều này sẽ giúp website load dữ liệu mới nhất từ database.",confirmText:"Xóa cache",cancelText:"Hủy",confirmVariant:"danger",cancelVariant:"outline",onConfirm:()=>{$.value=!0,L.post("/admin/settings/clear-cache",{},{preserveScroll:!0,onSuccess:()=>{$.value=!1,j.success("Đã xóa cache cài đặt thành công!"),setTimeout(()=>{L.reload()},500)},onError:()=>{$.value=!1,j.error("Có lỗi xảy ra khi xóa cache. Vui lòng thử lại.")}})}})},S=f(!1),w=f(null),N=f([...b.socialLinks]),n=E({name:"",icon:"",url:"",order:0,is_active:!0}),Z=a=>a?a.charAt(0).toUpperCase():"?",q=a=>{w.value=a,n.name=a.name,n.icon=a.icon,n.url=a.url,n.order=a.order,n.is_active=a.is_active,S.value=!1},A=()=>{S.value=!1,w.value=null,n.reset(),n.clearErrors()},Q=()=>{w.value?n.put(`/admin/settings/social-links/${w.value.id}`,{preserveScroll:!0,onSuccess:()=>{L.reload({only:["socialLinks"]}),A()}}):n.post("/admin/settings/social-links",{preserveScroll:!0,onSuccess:()=>{L.reload({only:["socialLinks"]}),A()}})},K=a=>{B("Bạn có chắc chắn muốn xóa link này?")&&L.delete(`/admin/settings/social-links/${a}`,{preserveScroll:!0,onSuccess:()=>{L.reload({only:["socialLinks"]})}})};return G(()=>b.socialLinks,a=>{N.value=[...a]},{deep:!0}),(a,s)=>(l(),r(V,null,[m(o(J),{title:"Cài đặt website"}),m(se,{title:"Cài đặt website"},{default:H(()=>[e("div",pe,[e("div",me,[s[8]||(s[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Cài đặt website"),e("p",{class:"text-gray-600 mt-1"},"Quản lý thông tin cơ bản của website")],-1)),e("div",ge,[e("button",{onClick:R,disabled:$.value,type:"button",class:"px-4 py-2 border border-orange-300 text-orange-700 rounded-lg hover:bg-orange-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Xóa cache cài đặt để đảm bảo dữ liệu được cập nhật mới nhất"},[m(o(ae),{class:C(["w-5 h-5",{"animate-spin":$.value}])},null,8,["class"]),e("span",null,d($.value?"Đang xóa...":"Xóa cache"),1)],8,ye)])]),a.$page.props.flash?.success?(l(),r("div",be,[e("p",fe,d(a.$page.props.flash.success),1)])):u("",!0),a.$page.props.flash?.error?(l(),r("div",xe,[e("p",he,d(a.$page.props.flash.error),1)])):u("",!0),e("form",{onSubmit:W(z,["prevent"]),enctype:"multipart/form-data",class:"bg-white rounded-lg shadow-sm p-6 space-y-8"},[x.settings&&x.settings.general?(l(),r("div",ve,[e("div",null,[e("h2",ke,[m(o(oe),{class:"w-5 h-5 mr-2 text-primary"}),s[9]||(s[9]=g(" Thông tin chung ",-1))]),e("div",_e,[e("div",we,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Logo website "),e("span",{class:"text-xs text-gray-500 font-normal block mt-1"}," Logo của website. Nếu không có logo, sẽ hiển thị tên website dạng text. ")],-1)),e("div",Ce,[k.value||h.value?(l(),r("div",Le,[e("div",$e,[e("img",{src:k.value||h.value,alt:"Logo preview",class:"h-20 w-auto object-contain border border-gray-300 rounded-lg p-2 bg-white"},null,8,Ve)]),e("div",{class:"flex-1"},[s[10]||(s[10]=e("p",{class:"text-sm text-gray-600"},"Logo hiện tại",-1)),e("button",{type:"button",onClick:O,class:"mt-2 text-sm text-red-600 hover:text-red-700"}," Xóa logo ")])])):u("",!0),e("div",null,[e("input",{ref:t=>{t&&(T.value=t)},type:"file",accept:"image/*",onChange:D,class:"hidden"},null,544),e("button",{type:"button",onClick:s[0]||(s[0]=()=>T.value&&T.value.click()),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2"},[m(o(ne),{class:"w-5 h-5"}),e("span",null,d(k.value||h.value?"Thay đổi logo":"Chọn logo"),1)]),o(i).errors.logo?(l(),r("p",Te,d(o(i).errors.logo),1)):u("",!0)]),k.value||h.value?(l(),r("div",Se,[y(e("input",{id:"logo-show-text","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[M,_.value]]),s[11]||(s[11]=e("label",{for:"logo-show-text",class:"text-sm text-gray-700 cursor-pointer"}," Hiển thị tên website cùng logo ",-1))])):u("",!0)])]),(l(!0),r(V,null,I(x.settings.general||[],t=>(l(),r(V,{key:t.id},[t&&t.type&&t.type!=="file"?(l(),r("div",Ue,[e("label",je,[g(d(t.label)+" ",1),t.description?(l(),r("span",Fe,d(t.description),1)):u("",!0)]),t.type==="text"?y((l(),r("input",{key:0,"onUpdate:modelValue":c=>p.settings[t.key]=c,type:"text",class:C(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ne)),[[v,p.settings[t.key]]]):t.type==="textarea"?y((l(),r("textarea",{key:1,"onUpdate:modelValue":c=>p.settings[t.key]=c,rows:"3",class:C(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ae)),[[v,p.settings[t.key]]]):t.type==="email"?y((l(),r("input",{key:2,"onUpdate:modelValue":c=>p.settings[t.key]=c,type:"email",class:C(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ie)),[[v,p.settings[t.key]]]):u("",!0),o(i).errors[`settings.${t.key}.value`]?(l(),r("p",Be,d(o(i).errors[`settings.${t.key}.value`]),1)):u("",!0)])):u("",!0)],64))),128))])])])):u("",!0),x.settings&&x.settings.contact?(l(),r("div",Ee,[e("div",null,[e("h2",He,[m(o(ie),{class:"w-5 h-5 mr-2 text-primary"}),s[13]||(s[13]=g(" Thông tin liên hệ ",-1))]),e("div",Me,[(l(!0),r(V,null,I(x.settings.contact||[],t=>(l(),r(V,{key:t.id},[t&&t.type?(l(),r("div",Xe,[e("label",De,[g(d(t.label)+" ",1),t.description?(l(),r("span",Oe,d(t.description),1)):u("",!0)]),t.type==="text"?y((l(),r("input",{key:0,"onUpdate:modelValue":c=>p.settings[t.key]=c,type:"text",class:C(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,ze)),[[v,p.settings[t.key]]]):t.type==="email"?y((l(),r("input",{key:1,"onUpdate:modelValue":c=>p.settings[t.key]=c,type:"email",class:C(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Re)),[[v,p.settings[t.key]]]):u("",!0),o(i).errors[`settings.${t.key}.value`]?(l(),r("p",Ze,d(o(i).errors[`settings.${t.key}.value`]),1)):u("",!0)])):u("",!0)],64))),128))])])])):u("",!0),e("div",qe,[m(o(ee),{href:"/admin",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:H(()=>[...s[14]||(s[14]=[g(" Hủy ",-1)])]),_:1}),e("button",{type:"submit",disabled:o(i).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[o(i).processing?(l(),r("span",Pe,"Đang lưu...")):(l(),r("span",Ke,"Lưu cài đặt"))],8,Qe)])],32),e("div",Ye,[e("div",Ge,[e("div",null,[e("h2",Je,[m(o(X),{class:"w-5 h-5 mr-2 text-primary"}),s[15]||(s[15]=g(" Link mạng xã hội ",-1))]),s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Quản lý các link mạng xã hội hiển thị trên website",-1))]),e("button",{onClick:s[2]||(s[2]=t=>S.value=!S.value),class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center"},[m(o(de),{class:"w-5 h-5 mr-2"}),s[17]||(s[17]=g(" Thêm link ",-1))])]),S.value||w.value?(l(),r("div",We,[e("h3",et,d(w.value?"Chỉnh sửa link":"Thêm link mới"),1),e("div",tt,[e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Tên mạng xã hội "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(n).name=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ví dụ: Facebook"},null,512),[[v,o(n).name]])]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Icon "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(n).icon=t),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...s[19]||(s[19]=[e("option",{value:""},"Chọn icon",-1),e("option",{value:"facebook"},"Facebook",-1),e("option",{value:"twitter"},"Twitter",-1),e("option",{value:"instagram"},"Instagram",-1),e("option",{value:"youtube"},"YouTube",-1),e("option",{value:"linkedin"},"LinkedIn",-1),e("option",{value:"tiktok"},"TikTok",-1),e("option",{value:"zalo"},"Zalo",-1),e("option",{value:"telegram"},"Telegram",-1)])],512),[[te,o(n).icon]])]),e("div",st,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" URL "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(n).url=t),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://facebook.com/yourpage"},null,512),[[v,o(n).url]])]),e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Thứ tự hiển thị ",-1)),y(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o(n).order=t),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"},null,512),[[v,o(n).order,void 0,{number:!0}]])]),e("div",ot,[e("label",rt,[y(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o(n).is_active=t),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[M,o(n).is_active]]),s[23]||(s[23]=e("span",{class:"ml-2 text-sm text-gray-700"},"Kích hoạt",-1))])])]),e("div",lt,[e("button",{onClick:A,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"}," Hủy "),e("button",{onClick:Q,disabled:o(n).processing,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50"},d(w.value?"Cập nhật":"Thêm"),9,at)])])):u("",!0),N.value.length>0?(l(),r("div",nt,[(l(!0),r(V,null,I(N.value,t=>(l(),r("div",{key:t.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors"},[e("div",it,[e("div",dt,[e("span",ct,d(Z(t.icon)),1)]),e("div",ut,[e("div",pt,[e("span",mt,d(t.name),1),e("span",{class:C(["px-2 py-1 text-xs rounded-full",t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"])},d(t.is_active?"Hoạt động":"Tắt"),3)]),e("p",gt,d(t.url),1)]),e("div",yt," Thứ tự: "+d(t.order),1)]),e("div",bt,[e("button",{onClick:c=>q(t),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chỉnh sửa"},[m(o(ce),{class:"w-5 h-5"})],8,ft),e("button",{onClick:c=>K(t.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xóa"},[m(o(ue),{class:"w-5 h-5"})],8,xt)])]))),128))])):(l(),r("div",ht,[m(o(X),{class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s[24]||(s[24]=e("p",null,"Chưa có link mạng xã hội nào",-1))]))])])]),_:1})],64))}};export{At as default};
