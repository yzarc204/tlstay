import{u as y,r as m,z as w,m as f,c as b,d as s,t as r,k as _,n as g,a as i,b as n,f as P,l as h,o as k}from"./app-CMA34vXU.js";import{a as D}from"./AppLayout-BEJ_A-J9.js";import{r as I}from"./MapPinIcon-R0714Wun.js";import{r as M}from"./BuildingOfficeIcon-DWu6c7zk.js";import{b as N}from"./FlashToaster-kFl7lRTI.js";import{r as W}from"./StarIcon-CpNSdcgP.js";const C={class:"relative overflow-hidden h-56"},V=["src","alt"],$={class:"absolute top-4 left-4"},j={class:"badge bg-primary text-white"},B={class:"p-5"},z={class:"text-xl font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors"},E={class:"flex items-start space-x-2 text-gray-600 mb-4"},R={class:"text-sm"},T={class:"flex items-center space-x-4 text-sm text-gray-600 mb-4 pb-4 border-b"},q={class:"flex items-center space-x-1"},F={class:"flex items-center space-x-1"},H={class:"flex items-center space-x-1"},L={class:"flex items-center justify-between"},O={class:"text-2xl font-bold text-primary"},S={class:"text-sm text-gray-500"},U={__name:"HouseCard",props:{house:{type:Object,required:!0}},setup(t){const u=y(),o=t,l=m(o.house.isInWishlist||!1),c=m(!1);w(async()=>{if(u.props.auth?.user)try{const a=await f.get("/wishlist/check",{params:{house_id:o.house.id}});l.value=a.data.isInWishlist}catch{}});const p=async a=>{if(a.stopPropagation(),!u.props.auth?.user){h.visit("/login");return}if(!c.value){c.value=!0;try{const e=await f.post("/wishlist/toggle",{house_id:o.house.id});l.value=e.data.isInWishlist,window.flash&&window.flash(e.data.message,e.data.isInWishlist?"success":"info")}catch(e){console.error("Error toggling wishlist:",e),e.response?.status===401&&h.visit("/login")}finally{c.value=!1}}},d=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a),x=()=>o.house.pricePerMonth?o.house.pricePerMonth:o.house.pricePerDay?Math.round(o.house.pricePerDay*30):0,v=()=>{h.visit(`/houses/${o.house.id}`)};return(a,e)=>(k(),b("div",{class:"card group cursor-pointer",onClick:v},[s("div",C,[s("img",{src:t.house.image,alt:t.house.name,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"},null,8,V),s("div",$,[s("span",j,r(t.house.availableRooms)+" phòng trống ",1)]),s("div",{class:"absolute top-4 right-4",onClick:e[0]||(e[0]=_(()=>{},["stop"]))},[s("button",{onClick:p,class:g(["w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 shadow-md hover:shadow-lg",l.value?"bg-secondary text-white":"bg-white hover:bg-primary hover:text-white"])},[i(n(D),{class:g(["w-5 h-5",l.value?"fill-current":""])},null,8,["class"])],2)])]),s("div",B,[s("h3",z,r(t.house.name),1),s("div",E,[i(n(I),{class:"w-5 h-5 mt-0.5 flex-shrink-0"}),s("span",R,r(t.house.address),1)]),s("div",T,[s("div",q,[i(n(M),{class:"w-5 h-5"}),s("span",null,r(t.house.floors)+" tầng",1)]),s("div",F,[i(n(N),{class:"w-5 h-5"}),s("span",null,r(t.house.totalRooms)+" phòng",1)]),s("div",H,[i(n(W),{class:"w-5 h-5 text-yellow-400"}),s("span",null,r(t.house.rating),1)])]),s("div",L,[s("div",null,[s("p",O,[P(r(d(x()))+" ",1),e[1]||(e[1]=s("span",{class:"text-sm text-gray-500 font-normal"},"/tháng",-1))]),s("p",S,r(d(t.house.pricePerDay))+"/ngày ",1)]),e[2]||(e[2]=s("button",{class:"px-5 py-2.5 bg-primary text-white rounded-lg hover:bg-secondary transition-all duration-300 font-medium shadow-md hover:shadow-lg transform hover:-translate-y-0.5"}," Xem chi tiết ",-1))])])]))}};export{U as _};
