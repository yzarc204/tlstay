import{u as H,r as w,z as Q,c as i,a,b as r,h as X,w as p,d as t,e as x,o as l,t as o,n as b,y as _,g as S,f as m,M as j,q as $,F as G}from"./app-BAzZH7GZ.js";import{r as T,_ as E}from"./AppLayout-4MfulTDL.js";import{r as D}from"./CheckCircleIcon-DdpmlONj.js";import{r as V}from"./CheckIcon-D28ZuF8-.js";import{r as N}from"./ArrowLeftIcon-CJ-Xix1w.js";import{r as O,a as M}from"./InformationCircleIcon-DSW2hGS3.js";import{r as R}from"./PencilIcon-CHkD6hx_.js";/* empty css            */import"./auth-BysJMb9A.js";import"./FlashToaster-Ci4DMZef.js";import"./ChevronDownIcon-XlQbJEkB.js";import"./UserIcon-CGMoGnvG.js";import"./DocumentTextIcon-CMK6amnj.js";import"./PhoneIcon-ZIaiO5dA.js";import"./EnvelopeIcon-CNc2UOAz.js";const U={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 md:py-12"},A={class:"max-w-4xl mx-auto px-4"},J={class:"text-center mb-8"},W={class:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6 animate-pulse"},Y={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},Z={class:"text-green-800"},tt={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},et={class:"relative"},st={class:"grid grid-cols-3 items-center"},nt={class:"flex flex-col items-center relative z-10"},ot={key:1,class:"text-xl"},rt={class:"flex flex-col items-center relative z-10"},lt={key:1,class:"text-xl"},at={class:"flex flex-col items-center relative z-10"},it={key:1,class:"text-xl"},dt={class:"absolute top-7 left-0 right-0 h-1 z-0"},gt={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},ct={class:"p-8"},bt={class:"space-y-6"},mt={class:"grid md:grid-cols-2 gap-6"},ut={class:"space-y-5"},xt={class:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4"},yt={class:"text-lg font-bold text-blue-900 font-mono"},ht={class:"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-4"},ft={class:"text-lg font-bold text-purple-900"},pt={class:"text-xs text-purple-700 mt-1"},vt={class:"bg-teal-50 border-l-4 border-teal-500 rounded-lg p-4"},kt={class:"text-lg font-bold text-teal-900"},wt={key:0,class:"mt-2"},_t={class:"space-y-5"},St={class:"bg-amber-50 border-l-4 border-amber-500 rounded-lg p-4"},jt={class:"text-lg font-bold text-amber-900"},$t={class:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4"},Vt={class:"text-lg font-bold text-orange-900"},Ct={class:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4"},Tt={class:"text-lg font-bold text-green-900"},Dt={key:0,class:"pt-6 border-t border-gray-200"},Nt={class:"text-gray-700 bg-gray-50 px-4 py-3 rounded-lg"},Mt={class:"pt-6 border-t border-gray-200 flex justify-end"},Pt={class:"p-8"},Bt={class:"space-y-6"},It={class:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200"},zt={class:"space-y-4"},Ft={class:"flex justify-between items-center py-3 border-b border-gray-300"},Lt={class:"font-semibold text-gray-900 text-lg"},qt={key:0,class:"flex justify-between items-center py-3 border-b border-gray-300"},Kt={class:"font-semibold text-green-600 text-lg"},Ht={class:"flex justify-between items-center pt-4 mt-2 border-t-2 border-gray-400"},Qt={class:"text-3xl font-bold text-primary"},Xt={class:"grid md:grid-cols-2 gap-6 pt-4"},Gt={class:"bg-gray-50 rounded-lg p-4"},Et={class:"font-semibold text-gray-900 text-lg"},Ot={key:0,class:"bg-gray-50 rounded-lg p-4"},Rt={class:"font-semibold text-gray-900 text-lg"},Ut={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},At={class:"font-mono text-sm text-blue-900 break-all"},Jt={class:"pt-6 border-t border-gray-200 flex justify-between"},Wt={class:"p-8"},Yt={key:0,class:"space-y-6"},Zt={class:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6"},te={class:"flex items-start"},ee={class:"flex flex-col sm:flex-row gap-4"},se=["href"],ne={class:"pt-6 border-t border-gray-200 flex justify-start"},oe={key:1,class:"space-y-6"},re={class:"text-center py-8"},le={class:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4"},ae={key:0,class:"text-gray-600"},ie={class:"bg-gray-50 rounded-lg p-6 border border-gray-200"},de={class:"flex items-center justify-between mb-4"},ge={class:"text-sm text-gray-600 mt-1"},ce=["href"],be={class:"bg-green-50 border-l-4 border-green-500 rounded-lg p-6"},me={class:"space-y-2 text-sm text-green-800"},ue={class:"flex items-start"},xe={class:"mt-8 flex flex-wrap gap-4 justify-center"},Me={__name:"BookingSuccess",props:{booking:{type:Object,required:!0}},setup(s){const u=s,P=H(),d=w(1),g=w(!1),c=w(!1);Q(()=>{const n=P.props.flash?.success||"",e=n.includes("ký hợp đồng thành công")||n.includes("đã ký hợp đồng"),f=new URLSearchParams(window.location.search).get("signed");u.booking.contract_signed&&(e||f==="1"||f==="true")?(d.value=3,g.value=!0,c.value=!0):(d.value=1,g.value=!1,c.value=!1,localStorage.removeItem(`booking_${u.booking.id}_step1`),localStorage.removeItem(`booking_${u.booking.id}_step2`),localStorage.removeItem(`booking_${u.booking.id}_currentStep`))});const y=n=>{n>=1&&n<=3&&(d.value=n,localStorage.setItem(`booking_${u.booking.id}_currentStep`,n.toString()))},B=()=>{g.value=!0,localStorage.setItem(`booking_${u.booking.id}_step1`,"confirmed"),y(2)},I=()=>{c.value=!0,localStorage.setItem(`booking_${u.booking.id}_step2`,"confirmed"),y(3)},v=n=>!n&&n!==0?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),k=n=>n?new Date(n).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",C=n=>n?new Date(n).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",z=(n,e)=>{if(!n||!e)return 0;const h=new Date(n),f=new Date(e),K=Math.abs(f-h);return Math.ceil(K/(1e3*60*60*24))+1},F=n=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã ở",pending:"Chờ thanh toán",completed:"Đã kết thúc",cancelled:"Đã hủy"})[n]||n,L=n=>({upcoming:"bg-amber-100 text-amber-800 border border-amber-300",active:"bg-green-100 text-green-700",past:"bg-gray-100 text-gray-600",pending:"bg-yellow-100 text-yellow-700",completed:"bg-gray-100 text-gray-600",cancelled:"bg-red-100 text-red-700"})[n]||"bg-gray-100 text-gray-600",q=n=>({bank_transfer:"Chuyển khoản ngân hàng",vnpay:"VNPay",wallet:"Ví điện tử",cash:"Tiền mặt"})[n]||n||"Chưa xác định";return(n,e)=>(l(),i(G,null,[a(r(X),{title:"Đặt phòng thành công"}),a(E,null,{default:p(()=>[t("div",U,[t("div",A,[t("div",J,[t("div",W,[a(r(D),{class:"w-12 h-12 text-green-600"})]),e[2]||(e[2]=t("h1",{class:"text-4xl font-bold text-gray-900 mb-3"},"Đặt phòng thành công!",-1)),e[3]||(e[3]=t("p",{class:"text-lg text-gray-600"},"Vui lòng hoàn tất các bước sau để hoàn thành đặt phòng",-1))]),n.$page.props.flash?.success?(l(),i("div",Y,[t("p",Z,o(n.$page.props.flash.success),1)])):x("",!0),t("div",tt,[t("div",et,[t("div",st,[t("div",nt,[t("div",{class:b(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===1?"bg-primary text-white ring-4 ring-primary/20":g.value?"bg-secondary text-white":"bg-gray-200 text-gray-500"])},[g.value?(l(),_(r(V),{key:0,class:"w-7 h-7"})):(l(),i("span",ot,"1"))],2),t("p",{class:b(["mt-3 text-sm font-medium text-center",d.value===1?"text-primary font-semibold":g.value?"text-secondary":"text-gray-500"])}," Thông tin đặt phòng ",2)]),t("div",rt,[t("div",{class:b(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===2?"bg-primary text-white ring-4 ring-primary/20":c.value?"bg-secondary text-white":g.value?"bg-gray-300 text-gray-600":"bg-gray-200 text-gray-400"])},[c.value?(l(),_(r(V),{key:0,class:"w-7 h-7"})):(l(),i("span",lt,"2"))],2),t("p",{class:b(["mt-3 text-sm font-medium text-center",d.value===2?"text-primary font-semibold":c.value?"text-secondary":g.value?"text-gray-600":"text-gray-400"])}," Thông tin thanh toán ",2)]),t("div",at,[t("div",{class:b(["flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg transition-all duration-300",d.value===3?"bg-primary text-white ring-4 ring-primary/20":s.booking.contract_signed?"bg-secondary text-white":c.value?"bg-gray-300 text-gray-600":"bg-gray-200 text-gray-400"])},[s.booking.contract_signed?(l(),_(r(V),{key:0,class:"w-7 h-7"})):(l(),i("span",it,"3"))],2),t("p",{class:b(["mt-3 text-sm font-medium text-center",d.value===3?"text-primary font-semibold":s.booking.contract_signed?"text-secondary":c.value?"text-gray-600":"text-gray-400"])}," Ký hợp đồng ",2)])]),t("div",dt,[t("div",{class:b(["absolute h-1 transition-all duration-300",g.value?"bg-secondary":"bg-gray-200"]),style:{left:"calc(16.666% + 28px)",right:"calc(50% + 28px)"}},null,2),t("div",{class:b(["absolute h-1 transition-all duration-300",c.value?"bg-secondary":"bg-gray-200"]),style:{left:"calc(50% + 28px)",right:"calc(16.666% + 28px)"}},null,2)])])]),t("div",gt,[S(t("div",ct,[e[15]||(e[15]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Thông tin đặt phòng"),t("p",{class:"text-gray-600"},"Vui lòng kiểm tra và xác nhận thông tin đặt phòng của bạn")],-1)),t("div",bt,[t("div",mt,[t("div",ut,[t("div",xt,[e[4]||(e[4]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-blue-900"},"Mã đặt phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-blue-200 text-blue-800 rounded-full"}," Quan trọng ")],-1)),t("p",yt,o(s.booking.booking_code),1),e[5]||(e[5]=t("p",{class:"text-xs text-blue-700 mt-1"},"Vui lòng lưu mã này để tra cứu sau",-1))]),t("div",ht,[e[6]||(e[6]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-purple-900"},"Nhà trọ"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-purple-200 text-purple-800 rounded-full"}," Địa điểm ")],-1)),t("p",ft,o(s.booking.house_name),1),t("p",pt,o(s.booking.house_address),1)]),t("div",vt,[e[7]||(e[7]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-teal-900"},"Phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-teal-200 text-teal-800 rounded-full"}," Phòng ")],-1)),t("p",kt," Phòng "+o(s.booking.room_number)+" - Tầng "+o(s.booking.floor),1),s.booking.booking_status?(l(),i("div",wt,[t("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",L(s.booking.booking_status)])},o(F(s.booking.booking_status)),3)])):x("",!0)])]),t("div",_t,[t("div",St,[e[8]||(e[8]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-amber-900"},"Ngày nhận phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-amber-200 text-amber-800 rounded-full"}," Lưu ý ")],-1)),t("p",jt,o(k(s.booking.start_date)),1),e[9]||(e[9]=t("p",{class:"text-xs text-amber-700 mt-1"},"Vui lòng đến đúng ngày để nhận phòng",-1))]),t("div",$t,[e[10]||(e[10]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-orange-900"},"Ngày trả phòng"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-orange-200 text-orange-800 rounded-full"}," Hạn chót ")],-1)),t("p",Vt,o(k(s.booking.end_date)),1),e[11]||(e[11]=t("p",{class:"text-xs text-orange-700 mt-1"},"Vui lòng trả phòng đúng hạn",-1))]),t("div",Ct,[e[12]||(e[12]=t("div",{class:"flex items-center justify-between mb-2"},[t("label",{class:"text-sm font-medium text-green-900"},"Số ngày thuê"),t("span",{class:"px-2 py-1 text-xs font-semibold bg-green-200 text-green-800 rounded-full"}," Thông tin ")],-1)),t("p",Tt,o(z(s.booking.start_date,s.booking.end_date))+" ngày ",1)])])]),s.booking.notes?(l(),i("div",Dt,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Ghi chú",-1)),t("p",Nt,o(s.booking.notes),1)])):x("",!0),t("div",Mt,[t("button",{onClick:B,class:"px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm hover:shadow-md"},[e[14]||(e[14]=m(" Xác nhận và tiếp tục ",-1)),a(r(T),{class:"w-5 h-5 inline-block ml-2"})])])])],512),[[j,d.value===1]]),S(t("div",Pt,[e[24]||(e[24]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Thông tin thanh toán"),t("p",{class:"text-gray-600"},"Vui lòng kiểm tra và xác nhận thông tin thanh toán")],-1)),t("div",Bt,[t("div",It,[t("div",zt,[t("div",Ft,[e[16]||(e[16]=t("span",{class:"text-gray-700 font-medium"},"Tổng tiền phòng",-1)),t("span",Lt,o(v(s.booking.total_price+s.booking.discount_amount)),1)]),s.booking.discount_amount>0?(l(),i("div",qt,[e[17]||(e[17]=t("span",{class:"text-gray-700 font-medium"},"Giảm giá",-1)),t("span",Kt," -"+o(v(s.booking.discount_amount)),1)])):x("",!0),t("div",Ht,[e[18]||(e[18]=t("span",{class:"text-xl font-bold text-gray-900"},"Tổng thanh toán",-1)),t("span",Qt,o(v(s.booking.total_price)),1)])])]),t("div",Xt,[t("div",Gt,[e[19]||(e[19]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Phương thức thanh toán",-1)),t("p",Et,o(q(s.booking.payment_method)),1)]),s.booking.paid_at?(l(),i("div",Ot,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-gray-500 block mb-2"},"Thời gian thanh toán",-1)),t("p",Rt,o(C(s.booking.paid_at)),1)])):x("",!0)]),s.booking.vnpay_transaction_id?(l(),i("div",Ut,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-blue-900 block mb-2"},"Mã giao dịch",-1)),t("p",At,o(s.booking.vnpay_transaction_id),1)])):x("",!0),t("div",Jt,[t("button",{onClick:e[0]||(e[0]=h=>y(1)),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},[a(r(N),{class:"w-5 h-5 inline-block mr-2"}),e[22]||(e[22]=m(" Quay lại ",-1))]),t("button",{onClick:I,class:"px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm hover:shadow-md"},[e[23]||(e[23]=m(" Xác nhận và tiếp tục ",-1)),a(r(T),{class:"w-5 h-5 inline-block ml-2"})])])])],512),[[j,d.value===2]]),S(t("div",Wt,[e[36]||(e[36]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Ký hợp đồng"),t("p",{class:"text-gray-600"},"Ký hợp đồng để hoàn tất thủ tục đặt phòng")],-1)),s.booking.contract_signed?(l(),i("div",oe,[t("div",re,[t("div",le,[a(r(D),{class:"w-12 h-12 text-green-600"})]),e[29]||(e[29]=t("h3",{class:"text-2xl font-bold text-gray-900 mb-2"},"Đã ký hợp đồng",-1)),s.booking.signed_at?(l(),i("p",ae," Đã ký vào: "+o(C(s.booking.signed_at)),1)):x("",!0)]),t("div",ie,[t("div",de,[t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm font-medium text-gray-500"},"Hợp đồng thuê trọ",-1)),t("p",ge,"Mã đặt phòng: "+o(s.booking.booking_code),1)]),t("a",{href:`/contract/${s.booking.id}`,target:"_blank",class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium text-gray-700"},[a(r(M),{class:"w-4 h-4 mr-2"}),e[31]||(e[31]=m(" Tải PDF ",-1))],8,ce)])]),t("div",be,[e[35]||(e[35]=t("h3",{class:"font-semibold text-green-900 mb-3"},"Thông tin quan trọng",-1)),t("ul",me,[t("li",ue,[e[32]||(e[32]=t("span",{class:"text-green-600 mr-2"},"✓",-1)),t("span",null,"Vui lòng đến nhận phòng đúng ngày "+o(k(s.booking.start_date)),1)]),e[33]||(e[33]=t("li",{class:"flex items-start"},[t("span",{class:"text-green-600 mr-2"},"✓"),t("span",null,"Mang theo CMND/CCCD và hợp đồng thuê khi đến nhận phòng")],-1)),e[34]||(e[34]=t("li",{class:"flex items-start"},[t("span",{class:"text-green-600 mr-2"},"✓"),t("span",null,"Nếu có thắc mắc, vui lòng liên hệ với chủ nhà trọ")],-1))])])])):(l(),i("div",Yt,[t("div",Zt,[t("div",te,[a(r(O),{class:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5"}),e[25]||(e[25]=t("div",null,[t("h3",{class:"font-semibold text-blue-900 mb-3"},"Thông tin quan trọng"),t("ul",{class:"space-y-2 text-sm text-blue-800"},[t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Vui lòng đọc kỹ hợp đồng trước khi ký")]),t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Hợp đồng có hiệu lực pháp lý sau khi được ký")]),t("li",{class:"flex items-start"},[t("span",{class:"text-blue-600 mr-2"},"•"),t("span",null,"Bạn có thể tải hợp đồng bất cứ lúc nào")])])],-1))])]),t("div",ee,[t("a",{href:`/contract/${s.booking.id}`,target:"_blank",class:"flex-1 px-6 py-4 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium text-center flex items-center justify-center"},[a(r(M),{class:"w-5 h-5 mr-2"}),e[26]||(e[26]=m(" Xem hợp đồng ",-1))],8,se),a(r($),{href:`/contract/${s.booking.id}/sign`,class:"flex-1 px-6 py-4 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium text-center flex items-center justify-center shadow-sm hover:shadow-md"},{default:p(()=>[a(r(R),{class:"w-5 h-5 mr-2"}),e[27]||(e[27]=m(" Ký hợp đồng ",-1))]),_:1},8,["href"])]),t("div",ne,[t("button",{onClick:e[1]||(e[1]=h=>y(2)),class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"},[a(r(N),{class:"w-5 h-5 inline-block mr-2"}),e[28]||(e[28]=m(" Quay lại ",-1))])])]))],512),[[j,d.value===3]])]),t("div",xe,[a(r($),{href:"/history",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium"},{default:p(()=>[...e[37]||(e[37]=[m(" Lịch sử thuê ",-1)])]),_:1}),a(r($),{href:"/",class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors font-medium"},{default:p(()=>[...e[38]||(e[38]=[m(" Về trang chủ ",-1)])]),_:1})])])])]),_:1})],64))}};export{Me as default};
