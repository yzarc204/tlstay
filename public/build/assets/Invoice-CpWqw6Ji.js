import{p as B,r as k,c as o,a as g,b as u,h as _,w as y,d as t,e as r,o as a,t as i,k as w,f as V,T as C,F as N}from"./app-6d472UTg.js";import{_ as T}from"./AppLayout-DCJsWtxu.js";/* empty css            */import"./auth-ePhw5Ljw.js";import"./FlashToaster-zRPyk37K.js";import"./ChevronDownIcon-Cp7WrXLc.js";import"./UserIcon-Chrmp5Vj.js";import"./DocumentTextIcon-CGuA7S-s.js";import"./PhoneIcon-D-3M1N6E.js";import"./EnvelopeIcon-DA50D0Nd.js";const A={class:"min-h-screen bg-gray-50 py-8"},S={class:"max-w-4xl mx-auto px-4"},P={key:0,class:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6"},j={class:"text-blue-800"},D={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg mb-6"},$={class:"text-red-800"},q={class:"bg-white rounded-lg shadow-sm p-6 md:p-8 space-y-8"},M={class:"grid md:grid-cols-2 gap-4"},F={class:"text-lg font-semibold text-gray-900"},E={class:"text-lg font-semibold text-gray-900"},H={class:"text-lg font-semibold text-gray-900"},O={class:"text-lg font-semibold text-gray-900"},z={key:0},L={class:"text-lg font-semibold text-gray-900"},Q={key:1},G={class:"text-lg font-semibold text-gray-900"},R={class:"mt-6 pt-6 border-t"},K={class:"space-y-3"},J={class:"flex justify-between items-center"},U={class:"font-medium text-gray-900"},X={class:"flex justify-between items-center"},I={class:"font-medium text-gray-900"},W={key:0,class:"flex justify-between items-center"},Y={class:"font-medium text-gray-900"},Z={class:"flex justify-between items-center pt-3 border-t"},tt={class:"text-2xl font-bold text-primary"},et={class:"border-t pt-6"},st={class:"bg-gray-50 rounded-lg p-4 space-y-2"},nt={class:"flex justify-between items-center"},it={class:"flex items-center space-x-2"},ot=["src","alt"],at={class:"font-semibold text-gray-900"},rt={class:"flex justify-between"},lt={class:"font-semibold text-gray-900"},dt={class:"flex justify-between"},ct={class:"font-semibold text-gray-900"},mt={class:"flex justify-between"},gt={class:"font-semibold text-primary"},ut={class:"flex justify-between"},xt={class:"font-semibold text-gray-900"},yt={class:"border-t pt-6"},ht={class:"flex justify-center"},bt={class:"bg-white p-4 rounded-lg border-2 border-gray-200"},ft=["src"],pt={class:"border-t pt-6"},vt=["disabled"],Bt={key:0},kt={key:1,class:"flex items-center justify-center"},_t={key:2},wt={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center"},qt={__name:"Invoice",props:{invoice:{type:Object,required:!0},payment_info:{type:Object,required:!0},qr_url:{type:String,required:!0}},setup(n){const h=n,c=B({}),l=k(!1),d=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),m=s=>s?new Date(s).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",b=s=>s?`https://api.vietqr.io/img/${s}.png`:null,x=s=>s?s.bank_name&&s.bank_code?`${s.bank_name} (${s.bank_code})`:s.bank_name?s.bank_name:s.bank_code?f(s.bank_code):"":"",f=s=>({VCB:"Vietcombank",TCB:"Techcombank",BID:"BIDV",VTB:"VietinBank",ACB:"ACB",TPB:"TPBank",VPB:"VPBank",MSB:"MSB",HDB:"HDBank",VIB:"VIB",SHB:"SHB",STB:"Sacombank",OCB:"OCB",MB:"MB Bank",VCCB:"Viet Capital Bank",NAB:"Nam A Bank",BAB:"Bac A Bank",SCB:"SCB",VAB:"Viet A Bank",PGB:"PGBank",ABB:"An Bình",DAB:"Dong A Bank",EIB:"Eximbank",GPB:"GPBank",KLB:"Kienlongbank",LPB:"LienVietPostBank",NCB:"NCB",OJB:"OceanBank",PUB:"PublicBank",SEAB:"SeABank",VDB:"VietABank"})[s]||s,p=s=>{s.target.style.display="none"},v=()=>{l.value=!0,setTimeout(()=>{c.post(`/payment/invoice/${h.invoice.id}/confirm`,{preserveScroll:!0,onFinish:()=>{l.value=!1}})},3e3)};return(s,e)=>(a(),o(N,null,[g(u(_),{title:"Thanh toán hóa đơn"}),g(T,null,{default:y(()=>[t("div",A,[t("div",S,[e[23]||(e[23]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Thanh toán hóa đơn"),t("p",{class:"text-gray-600 mt-1"},"Vui lòng quét mã QR để thanh toán")],-1)),s.$page.props.flash?.info?(a(),o("div",P,[t("p",j,i(s.$page.props.flash.info),1)])):r("",!0),s.$page.props.flash?.error?(a(),o("div",D,[t("p",$,i(s.$page.props.flash.error),1)])):r("",!0),t("div",q,[t("div",null,[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin hóa đơn",-1)),t("div",M,[t("div",null,[e[0]||(e[0]=t("p",{class:"text-sm text-gray-600"},"Mã hóa đơn",-1)),t("p",F,i(n.invoice.invoice_code),1)]),t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm text-gray-600"},"Kỳ hóa đơn",-1)),t("p",E,i(n.invoice.month_year),1)]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Nhà trọ",-1)),t("p",H,i(n.invoice.house_name),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Phòng",-1)),t("p",O,"Phòng "+i(n.invoice.room_number),1)]),n.invoice.start_date&&n.invoice.end_date?(a(),o("div",z,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Thời gian",-1)),t("p",L,i(m(n.invoice.start_date))+" - "+i(m(n.invoice.end_date)),1)])):r("",!0),n.invoice.due_date?(a(),o("div",Q,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"Ngày đến hạn",-1)),t("p",G,i(m(n.invoice.due_date)),1)])):r("",!0)]),t("div",R,[e[10]||(e[10]=t("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-4"},"Chi tiết hóa đơn",-1)),t("div",K,[t("div",J,[e[6]||(e[6]=t("span",{class:"text-gray-700"},"Tiền điện:",-1)),t("span",U,i(d(n.invoice.electricity_amount)),1)]),t("div",X,[e[7]||(e[7]=t("span",{class:"text-gray-700"},"Tiền nước:",-1)),t("span",I,i(d(n.invoice.water_amount)),1)]),n.invoice.other_fees>0?(a(),o("div",W,[e[8]||(e[8]=t("span",{class:"text-gray-700"},"Phí khác:",-1)),t("span",Y,i(d(n.invoice.other_fees)),1)])):r("",!0),t("div",Z,[e[9]||(e[9]=t("span",{class:"text-lg font-semibold text-gray-900"},"Tổng cộng:",-1)),t("span",tt,i(d(n.invoice.total)),1)])])])]),t("div",et,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin chuyển khoản",-1)),t("div",st,[t("div",nt,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Ngân hàng:",-1)),t("div",it,[n.payment_info.bank_code?(a(),o("img",{key:0,src:b(n.payment_info.bank_code),alt:x(n.payment_info),class:"h-6 w-6 object-contain",onError:p},null,40,ot)):r("",!0),t("span",at,i(x(n.payment_info)),1)])]),t("div",rt,[e[13]||(e[13]=t("span",{class:"text-gray-600"},"Số tài khoản:",-1)),t("span",lt,i(n.payment_info.bank_account_number),1)]),t("div",dt,[e[14]||(e[14]=t("span",{class:"text-gray-600"},"Tên chủ tài khoản:",-1)),t("span",ct,i(n.payment_info.bank_account_holder),1)]),t("div",mt,[e[15]||(e[15]=t("span",{class:"text-gray-600"},"Số tiền:",-1)),t("span",gt,i(d(n.invoice.total)),1)]),t("div",ut,[e[16]||(e[16]=t("span",{class:"text-gray-600"},"Nội dung chuyển khoản:",-1)),t("span",xt,i(n.invoice.invoice_code),1)])])]),t("div",yt,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4 text-center"},"Quét mã QR để thanh toán",-1)),t("div",ht,[t("div",bt,[t("img",{src:n.qr_url,alt:"VietQR Code",class:"w-64 h-64 md:w-80 md:h-80"},null,8,ft)])]),e[19]||(e[19]=t("p",{class:"text-center text-sm text-gray-600 mt-4"}," Vui lòng quét mã QR bằng ứng dụng ngân hàng của bạn để thanh toán ",-1))]),t("div",pt,[t("form",{onSubmit:w(v,["prevent"])},[t("button",{type:"submit",disabled:u(c).processing||l.value,class:"w-full px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-lg"},[!u(c).processing&&!l.value?(a(),o("span",Bt,"Xác nhận đã chuyển khoản")):l.value?(a(),o("span",kt,[...e[20]||(e[20]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),V(" Đang kiểm tra thanh toán... ",-1)])])):(a(),o("span",_t,"Đang xử lý..."))],8,vt),e[21]||(e[21]=t("p",{class:"text-center text-sm text-gray-500 mt-2"}," Sau khi đã chuyển khoản thành công, vui lòng nhấn nút trên để xác nhận ",-1))],32)]),g(C,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[l.value?(a(),o("div",wt,[...e[22]||(e[22]=[t("div",{class:"bg-white rounded-lg p-8 max-w-md mx-4 text-center"},[t("svg",{class:"animate-spin h-12 w-12 text-primary mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Đang kiểm tra thanh toán"),t("p",{class:"text-sm text-gray-600"},"Vui lòng đợi trong giây lát...")],-1)])])):r("",!0)]),_:1})])])])]),_:1})],64))}};export{qt as default};
