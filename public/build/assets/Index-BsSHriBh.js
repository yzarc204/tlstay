import{c as r,d as e,o as l,x as q,r as x,z as Q,p as A,B as X,a as m,b as o,h as K,w as I,e as c,t as u,k as P,f as y,g,s as B,F as C,i as N,n as L,v as h,q as Y,j as G,l as T}from"./app-ppQx7_BQ.js";import{r as J,_ as W}from"./AdminLayout-BFmvflv5.js";import{r as ee}from"./FlashToaster-DRaP0e7V.js";import{r as te}from"./PhoneIcon-CjeMPSAD.js";import{r as se}from"./PlusIcon-_41a6Qdj.js";import{r as oe}from"./PencilIcon-B9Rk9ltY.js";import{r as re}from"./TrashIcon-Dflq_pNl.js";/* empty css            */import"./MapPinIcon-L4fB1UUx.js";import"./CalendarIcon-B2fvGfwC.js";import"./BuildingOfficeIcon-D5_B3Cmo.js";function M(f,b){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const le={class:"space-y-6"},ae={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},ne={class:"text-green-800 whitespace-pre-line"},ie={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},de={class:"text-red-800 whitespace-pre-line"},ue={key:0,class:"space-y-6"},ce={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},pe={class:"space-y-6"},me={class:"space-y-2"},ye={class:"space-y-4"},ge={key:0,class:"flex items-center space-x-4"},be={class:"relative"},fe=["src"],ve={key:0,class:"text-sm text-red-600 mt-1"},xe={key:1,class:"flex items-center space-x-2 pt-2 border-t"},he={key:0,class:"space-y-2"},ke={class:"block text-sm font-medium text-gray-700"},_e={key:0,class:"text-xs text-gray-500 font-normal block mt-1"},we=["onUpdate:modelValue","placeholder"],Ce=["onUpdate:modelValue","placeholder"],Le=["onUpdate:modelValue","placeholder"],$e={key:3,class:"text-sm text-red-600"},Ve={key:1,class:"space-y-6 border-t pt-6"},Se={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Te={class:"space-y-6"},Ue={key:0,class:"space-y-2"},je={class:"block text-sm font-medium text-gray-700"},Fe={key:0,class:"text-xs text-gray-500 font-normal block mt-1"},Ne=["onUpdate:modelValue","placeholder"],Ae=["onUpdate:modelValue","placeholder"],Ie={key:2,class:"text-sm text-red-600"},Be={class:"flex justify-end space-x-4 pt-6 border-t"},Me=["disabled"],De={key:0},Oe={key:1},Ee={class:"bg-white rounded-lg shadow-sm p-6 space-y-6"},He={class:"flex items-center justify-between"},ze={class:"text-lg font-semibold text-gray-900 mb-1 flex items-center"},Re={key:0,class:"border rounded-lg p-4 bg-gray-50"},Ze={class:"font-semibold text-gray-900 mb-4"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qe={class:"md:col-span-2"},Xe={class:"flex items-end"},Ke={class:"flex items-center"},Pe={class:"flex justify-end space-x-3 mt-4"},Ye=["disabled"],Ge={key:1,class:"space-y-3"},Je={class:"flex items-center space-x-4 flex-1"},We={class:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center"},et={class:"text-sm font-semibold text-gray-600 uppercase"},tt={class:"flex-1"},st={class:"flex items-center space-x-2"},ot={class:"font-medium text-gray-900"},rt={class:"text-sm text-gray-600 mt-1"},lt={class:"text-sm text-gray-500"},at={class:"flex items-center space-x-2 ml-4"},nt=["onClick"],it=["onClick"],dt={key:2,class:"text-center py-8 text-gray-500"},kt={__name:"Index",props:{settings:{type:Object,required:!0},socialLinks:{type:Array,default:()=>[]}},setup(f){const b=f,p=q({settings:{}}),k=x(null),v=x(null),U=x(null),_=x(!0);Q(()=>{b.settings&&typeof b.settings=="object"&&Object.keys(b.settings).forEach(a=>{b.settings[a]&&Array.isArray(b.settings[a])&&b.settings[a].forEach(s=>{s&&s.key&&(p.settings[s.key]=s.value||"",s.key==="site_logo"&&s.value&&(v.value=s.value),s.key==="site_logo_show_text"&&(_.value=s.value==="1"||s.value==="true"||s.value===!0||s.value===1))})}),_.value===void 0&&(_.value=!0)});const i=A({settings:[],logo:null,delete_logo:!1}),$=x(null),D=a=>{const s=a.target.files[0];if(s){U.value=s,i.delete_logo=!1;const t=new FileReader;t.onload=d=>{k.value=d.target.result},t.readAsDataURL(s)}},O=()=>{k.value=null,U.value=null,v.value=null,i.delete_logo=!0,$.value&&($.value.value="")},E=()=>{const a=Object.keys(p.settings).map(s=>({key:s,value:p.settings[s]||""}));a.push({key:"site_logo_show_text",value:_.value?"1":"0"}),i.settings=a,i.logo=U.value,i.post("/admin/settings",{preserveScroll:!0,forceFormData:!0,onSuccess:s=>{if(k.value=null,U.value=null,s.props.settings){const t=Object.values(s.props.settings).flat().find(S=>S&&S.key==="site_logo");t?v.value=t.value||null:v.value=null;const d=Object.values(s.props.settings).flat().find(S=>S&&S.key==="site_logo_show_text");d&&(_.value=d.value==="1"||d.value==="true")}T.reload({only:["settings"]})}})},V=x(!1),w=x(null),j=x([...b.socialLinks]),n=A({name:"",icon:"",url:"",order:0,is_active:!0}),H=a=>a?a.charAt(0).toUpperCase():"?",z=a=>{w.value=a,n.name=a.name,n.icon=a.icon,n.url=a.url,n.order=a.order,n.is_active=a.is_active,V.value=!1},F=()=>{V.value=!1,w.value=null,n.reset(),n.clearErrors()},R=()=>{w.value?n.put(`/admin/settings/social-links/${w.value.id}`,{preserveScroll:!0,onSuccess:()=>{T.reload({only:["socialLinks"]}),F()}}):n.post("/admin/settings/social-links",{preserveScroll:!0,onSuccess:()=>{T.reload({only:["socialLinks"]}),F()}})},Z=a=>{confirm("Bạn có chắc chắn muốn xóa link này?")&&T.delete(`/admin/settings/social-links/${a}`,{preserveScroll:!0,onSuccess:()=>{T.reload({only:["socialLinks"]})}})};return X(()=>b.socialLinks,a=>{j.value=[...a]},{deep:!0}),(a,s)=>(l(),r(C,null,[m(o(K),{title:"Cài đặt website"}),m(W,{title:"Cài đặt website"},{default:I(()=>[e("div",le,[s[24]||(s[24]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Cài đặt website"),e("p",{class:"text-gray-600 mt-1"},"Quản lý thông tin cơ bản của website")])],-1)),a.$page.props.flash?.success?(l(),r("div",ae,[e("p",ne,u(a.$page.props.flash.success),1)])):c("",!0),a.$page.props.flash?.error?(l(),r("div",ie,[e("p",de,u(a.$page.props.flash.error),1)])):c("",!0),e("form",{onSubmit:P(E,["prevent"]),enctype:"multipart/form-data",class:"bg-white rounded-lg shadow-sm p-6 space-y-8"},[f.settings&&f.settings.general?(l(),r("div",ue,[e("div",null,[e("h2",ce,[m(o(ee),{class:"w-5 h-5 mr-2 text-primary"}),s[8]||(s[8]=y(" Thông tin chung ",-1))]),e("div",pe,[e("div",me,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700"},[y(" Logo website "),e("span",{class:"text-xs text-gray-500 font-normal block mt-1"}," Logo của website. Nếu không có logo, sẽ hiển thị tên website dạng text. ")],-1)),e("div",ye,[k.value||v.value?(l(),r("div",ge,[e("div",be,[e("img",{src:k.value||v.value,alt:"Logo preview",class:"h-20 w-auto object-contain border border-gray-300 rounded-lg p-2 bg-white"},null,8,fe)]),e("div",{class:"flex-1"},[s[9]||(s[9]=e("p",{class:"text-sm text-gray-600"},"Logo hiện tại",-1)),e("button",{type:"button",onClick:O,class:"mt-2 text-sm text-red-600 hover:text-red-700"}," Xóa logo ")])])):c("",!0),e("div",null,[e("input",{ref:t=>{t&&($.value=t)},type:"file",accept:"image/*",onChange:D,class:"hidden"},null,544),e("button",{type:"button",onClick:s[0]||(s[0]=()=>$.value&&$.value.click()),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2"},[m(o(J),{class:"w-5 h-5"}),e("span",null,u(k.value||v.value?"Thay đổi logo":"Chọn logo"),1)]),o(i).errors.logo?(l(),r("p",ve,u(o(i).errors.logo),1)):c("",!0)]),k.value||v.value?(l(),r("div",xe,[g(e("input",{id:"logo-show-text","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[B,_.value]]),s[10]||(s[10]=e("label",{for:"logo-show-text",class:"text-sm text-gray-700 cursor-pointer"}," Hiển thị tên website cùng logo ",-1))])):c("",!0)])]),(l(!0),r(C,null,N(f.settings.general||[],t=>(l(),r(C,{key:t.id},[t&&t.type&&t.type!=="file"?(l(),r("div",he,[e("label",ke,[y(u(t.label)+" ",1),t.description?(l(),r("span",_e,u(t.description),1)):c("",!0)]),t.type==="text"?g((l(),r("input",{key:0,"onUpdate:modelValue":d=>p.settings[t.key]=d,type:"text",class:L(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,we)),[[h,p.settings[t.key]]]):t.type==="textarea"?g((l(),r("textarea",{key:1,"onUpdate:modelValue":d=>p.settings[t.key]=d,rows:"3",class:L(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ce)),[[h,p.settings[t.key]]]):t.type==="email"?g((l(),r("input",{key:2,"onUpdate:modelValue":d=>p.settings[t.key]=d,type:"email",class:L(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Le)),[[h,p.settings[t.key]]]):c("",!0),o(i).errors[`settings.${t.key}.value`]?(l(),r("p",$e,u(o(i).errors[`settings.${t.key}.value`]),1)):c("",!0)])):c("",!0)],64))),128))])])])):c("",!0),f.settings&&f.settings.contact?(l(),r("div",Ve,[e("div",null,[e("h2",Se,[m(o(te),{class:"w-5 h-5 mr-2 text-primary"}),s[12]||(s[12]=y(" Thông tin liên hệ ",-1))]),e("div",Te,[(l(!0),r(C,null,N(f.settings.contact||[],t=>(l(),r(C,{key:t.id},[t&&t.type?(l(),r("div",Ue,[e("label",je,[y(u(t.label)+" ",1),t.description?(l(),r("span",Fe,u(t.description),1)):c("",!0)]),t.type==="text"?g((l(),r("input",{key:0,"onUpdate:modelValue":d=>p.settings[t.key]=d,type:"text",class:L(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ne)),[[h,p.settings[t.key]]]):t.type==="email"?g((l(),r("input",{key:1,"onUpdate:modelValue":d=>p.settings[t.key]=d,type:"email",class:L(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",o(i).errors[`settings.${t.key}.value`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:`Nhập ${t.label.toLowerCase()}`},null,10,Ae)),[[h,p.settings[t.key]]]):c("",!0),o(i).errors[`settings.${t.key}.value`]?(l(),r("p",Ie,u(o(i).errors[`settings.${t.key}.value`]),1)):c("",!0)])):c("",!0)],64))),128))])])])):c("",!0),e("div",Be,[m(o(Y),{href:"/admin",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:I(()=>[...s[13]||(s[13]=[y(" Hủy ",-1)])]),_:1}),e("button",{type:"submit",disabled:o(i).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[o(i).processing?(l(),r("span",Oe,"Đang lưu...")):(l(),r("span",De,"Lưu cài đặt"))],8,Me)])],32),e("div",Ee,[e("div",He,[e("div",null,[e("h2",ze,[m(o(M),{class:"w-5 h-5 mr-2 text-primary"}),s[14]||(s[14]=y(" Link mạng xã hội ",-1))]),s[15]||(s[15]=e("p",{class:"text-sm text-gray-600"},"Quản lý các link mạng xã hội hiển thị trên website",-1))]),e("button",{onClick:s[2]||(s[2]=t=>V.value=!V.value),class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center"},[m(o(se),{class:"w-5 h-5 mr-2"}),s[16]||(s[16]=y(" Thêm link ",-1))])]),V.value||w.value?(l(),r("div",Re,[e("h3",Ze,u(w.value?"Chỉnh sửa link":"Thêm link mới"),1),e("div",qe,[e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y(" Tên mạng xã hội "),e("span",{class:"text-red-500"},"*")],-1)),g(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(n).name=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ví dụ: Facebook"},null,512),[[h,o(n).name]])]),e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y(" Icon "),e("span",{class:"text-red-500"},"*")],-1)),g(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(n).icon=t),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...s[18]||(s[18]=[e("option",{value:""},"Chọn icon",-1),e("option",{value:"facebook"},"Facebook",-1),e("option",{value:"twitter"},"Twitter",-1),e("option",{value:"instagram"},"Instagram",-1),e("option",{value:"youtube"},"YouTube",-1),e("option",{value:"linkedin"},"LinkedIn",-1),e("option",{value:"tiktok"},"TikTok",-1),e("option",{value:"zalo"},"Zalo",-1),e("option",{value:"telegram"},"Telegram",-1)])],512),[[G,o(n).icon]])]),e("div",Qe,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y(" URL "),e("span",{class:"text-red-500"},"*")],-1)),g(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(n).url=t),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://facebook.com/yourpage"},null,512),[[h,o(n).url]])]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Thứ tự hiển thị ",-1)),g(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o(n).order=t),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"},null,512),[[h,o(n).order,void 0,{number:!0}]])]),e("div",Xe,[e("label",Ke,[g(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o(n).is_active=t),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[B,o(n).is_active]]),s[22]||(s[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"Kích hoạt",-1))])])]),e("div",Pe,[e("button",{onClick:F,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"}," Hủy "),e("button",{onClick:R,disabled:o(n).processing,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50"},u(w.value?"Cập nhật":"Thêm"),9,Ye)])])):c("",!0),j.value.length>0?(l(),r("div",Ge,[(l(!0),r(C,null,N(j.value,t=>(l(),r("div",{key:t.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors"},[e("div",Je,[e("div",We,[e("span",et,u(H(t.icon)),1)]),e("div",tt,[e("div",st,[e("span",ot,u(t.name),1),e("span",{class:L(["px-2 py-1 text-xs rounded-full",t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"])},u(t.is_active?"Hoạt động":"Tắt"),3)]),e("p",rt,u(t.url),1)]),e("div",lt," Thứ tự: "+u(t.order),1)]),e("div",at,[e("button",{onClick:d=>z(t),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Chỉnh sửa"},[m(o(oe),{class:"w-5 h-5"})],8,nt),e("button",{onClick:d=>Z(t.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Xóa"},[m(o(re),{class:"w-5 h-5"})],8,it)])]))),128))])):(l(),r("div",dt,[m(o(M),{class:"w-12 h-12 mx-auto mb-2 text-gray-400"}),s[23]||(s[23]=e("p",null,"Chưa có link mạng xã hội nào",-1))]))])])]),_:1})],64))}};export{kt as default};
