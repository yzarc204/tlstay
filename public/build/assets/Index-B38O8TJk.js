import{r as $,z as L,m as M,A as U,c,a as g,e as u,w as x,d as o,n as y,o as l,b as r,T as z,y as N,F as j,i as D,t as m,p as A,h as I,k as H,f as w,g as _,v as b,q as K}from"./app-CV3hN5xw.js";import{_ as O}from"./AdminLayout-CDrS6VVX.js";import{i as Q,n as G,r as J,u as C,a as P,b as R,l as W}from"./ChevronUpDownIcon-BpJK3Som.js";import{r as X}from"./BuildingOfficeIcon-DhfgkQfF.js";import{r as Y}from"./PhoneIcon-BI0JaArr.js";import{r as Z}from"./CreditCardIcon-DD7Cy8RS.js";/* empty css            */import"./FlashToaster-_iqtzozx.js";import"./MapPinIcon-WctZgngs.js";import"./CalendarIcon-Bm0npUtJ.js";import"./PhotoIcon-BCHJDgw1.js";const ee={class:"relative"},re={class:"relative"},oe={class:"flex items-center pl-3"},te=["src","alt"],se={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},ne={class:"flex items-center"},ae=["src","alt"],le={key:0,class:"mt-1 text-sm text-red-600"},de={__name:"BankSelect",props:{modelValue:{type:String,default:null},placeholder:{type:String,default:"Chọn ngân hàng"},error:{type:String,default:null}},emits:["update:modelValue"],setup(v,{emit:p}){const t=v,k=p,f=$([]),h=$(!0),i=$("");L(async()=>{try{const n=await M.get("/api/banks");n.data&&n.data.banks&&(f.value=n.data.banks.filter(s=>s.transferSupported===1).map(s=>({code:s.code,name:s.name,shortName:s.shortName,logo:s.logo})).sort((s,d)=>s.name.localeCompare(d.name,"vi")))}catch(n){console.error("Failed to fetch banks:",n),f.value=[]}finally{h.value=!1}});const e=U({get:()=>t.modelValue,set:n=>k("update:modelValue",n)}),a=n=>{if(!n)return null;const s=f.value.find(d=>d.code===n);return s&&s.logo?s.logo:`https://api.vietqr.io/img/${n}.png`},q=n=>{if(!n)return"";const s=f.value.find(d=>d.code===n);return s?s.name:n},E=n=>{if(!n)return"";const s=f.value.find(d=>d.code===n);return s?`${s.name} (${s.code})`:n},T=n=>{n.target.style.display="none"},F=n=>{e.value=n},S=U(()=>{if(!i.value.trim())return f.value;const n=i.value.toLowerCase().trim();return f.value.filter(s=>{const d=s.name.toLowerCase().includes(n),V=s.code.toLowerCase().includes(n);return d||V})});return(n,s)=>(l(),c("div",ee,[g(r(W),{modelValue:e.value,"onUpdate:modelValue":[s[2]||(s[2]=d=>e.value=d),F]},{default:x(()=>[o("div",re,[o("div",{class:y(["relative w-full cursor-default overflow-hidden rounded-lg border bg-white text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-primary sm:text-sm",[v.error?"border-red-500 focus-visible:ring-red-500":"border-gray-300 focus-visible:ring-primary",h.value?"opacity-50 cursor-not-allowed":""]])},[o("div",oe,[e.value&&!h.value?(l(),c("img",{key:0,src:a(e.value),alt:q(e.value),class:"h-5 w-5 object-contain mr-2 flex-shrink-0",onError:T},null,40,te)):u("",!0),g(r(Q),{class:"w-full border-none py-2 pr-10 text-sm leading-5 text-gray-900 focus:ring-0","display-value":()=>i.value?i.value:e.value?E(e.value):"",onChange:s[0]||(s[0]=d=>i.value=d.target.value),placeholder:v.placeholder,disabled:h.value},null,8,["display-value","placeholder","disabled"])]),g(r(G),{class:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:h.value},{default:x(()=>[g(r(J),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1},8,["disabled"])],2),g(z,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0",onAfterLeave:s[1]||(s[1]=d=>i.value="")},{default:x(()=>[h.value?(l(),N(r(C),{key:1,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:x(()=>[...s[3]||(s[3]=[o("li",{class:"relative cursor-default select-none py-2 px-4 text-gray-500 text-center"}," Đang tải danh sách ngân hàng... ",-1)])]),_:1})):(l(),N(r(C),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:x(()=>[S.value.length===0&&i.value!==""?(l(),c("div",se," Không tìm thấy ngân hàng nào ")):u("",!0),(l(!0),c(j,null,D(S.value,d=>(l(),N(r(P),{key:d.code,value:d.code,as:"template"},{default:x(({selected:V,active:B})=>[o("li",{class:y(["relative cursor-default select-none py-2 pl-10 pr-4",B?"bg-primary text-white":"text-gray-900"])},[o("div",ne,[o("img",{src:d.logo||a(d.code),alt:d.name,class:"h-5 w-5 object-contain mr-2 flex-shrink-0",onError:T},null,40,ae),o("span",{class:y(["block truncate",V?"font-medium":"font-normal"])},m(d.name)+" ("+m(d.code)+") ",3)]),V?(l(),c("span",{key:0,class:y(["absolute inset-y-0 left-0 flex items-center pl-3",B?"text-white":"text-primary"])},[g(r(R),{class:"h-5 w-5","aria-hidden":"true"})],2)):u("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1}))]),_:1})])]),_:1},8,["modelValue"]),v.error?(l(),c("p",le,m(v.error),1)):u("",!0)]))}},ie={class:"space-y-6"},ce={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},ue={class:"text-green-800"},me={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},pe={class:"text-red-800"},ye={class:"space-y-6"},ge={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},fe={class:"grid md:grid-cols-2 gap-6"},_e={class:"md:col-span-2"},be={key:0,class:"mt-1 text-sm text-red-600"},he={key:0,class:"mt-1 text-sm text-red-600"},xe={key:0,class:"mt-1 text-sm text-red-600"},ve={class:"md:col-span-2"},ke={key:0,class:"mt-1 text-sm text-red-600"},we={class:"md:col-span-2"},Ve={key:0,class:"mt-1 text-sm text-red-600"},$e={class:"space-y-6 border-t pt-6"},Ne={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Te={class:"grid md:grid-cols-2 gap-6"},Se={key:0,class:"mt-1 text-sm text-red-600"},Be={key:0,class:"mt-1 text-sm text-red-600"},Ue={class:"space-y-6 border-t pt-6"},Ce={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Le={class:"grid md:grid-cols-2 gap-6"},Me={key:0,class:"mt-1 text-sm text-red-600"},je={class:"md:col-span-2"},qe={key:0,class:"mt-1 text-sm text-red-600"},Ee={class:"flex justify-end space-x-4 pt-6 border-t"},Fe=["disabled"],ze={key:0},De={key:1},Xe={__name:"Index",props:{company:{type:Object,required:!0}},setup(v){const p=v,t=A({company_name:p.company.company_name||"",company_tax_code:p.company.company_tax_code||"",company_tax_code_issue_date:p.company.company_tax_code_issue_date||"",company_tax_code_issue_place:p.company.company_tax_code_issue_place||"",company_address:p.company.company_address||"",company_phone:p.company.company_phone||"",company_email:p.company.company_email||"",bank_name:p.company.bank_name||"",bank_code:p.company.bank_code||"",bank_account_number:p.company.bank_account_number||"",bank_account_holder:p.company.bank_account_holder||""}),k=$([]);L(async()=>{try{const i=await M.get("/api/banks");i.data&&i.data.banks&&(k.value=i.data.banks.filter(e=>e.transferSupported===1).map(e=>({code:e.code,name:e.name})))}catch(i){console.error("Failed to fetch banks:",i)}});const f=i=>{if(i&&k.value.length>0){const e=k.value.find(a=>a.code===i);e&&(t.bank_name=e.name)}},h=()=>{t.put("/admin/company-information",{preserveScroll:!0})};return(i,e)=>(l(),c(j,null,[g(r(I),{title:"Thông tin doanh nghiệp"}),g(O,{title:"Thông tin doanh nghiệp"},{default:x(()=>[o("div",ie,[e[24]||(e[24]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-2xl font-bold text-gray-900"},"Thông tin doanh nghiệp"),o("p",{class:"text-gray-600 mt-1"},"Quản lý thông tin doanh nghiệp hiển thị trên hợp đồng thuê trọ")])],-1)),i.$page.props.flash?.success?(l(),c("div",ce,[o("p",ue,m(i.$page.props.flash.success),1)])):u("",!0),i.$page.props.flash?.error?(l(),c("div",me,[o("p",pe,m(i.$page.props.flash.error),1)])):u("",!0),o("form",{onSubmit:H(h,["prevent"]),class:"bg-white rounded-lg shadow-sm p-6 space-y-8"},[o("div",ye,[o("div",null,[o("h2",ge,[g(r(X),{class:"w-5 h-5 mr-2 text-primary"}),e[10]||(e[10]=w(" Thông tin cơ bản ",-1))]),o("div",fe,[o("div",_e,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Tên doanh nghiệp "),o("span",{class:"text-red-500"},"*")],-1)),_(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r(t).company_name=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_name?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập tên doanh nghiệp",required:""},null,2),[[b,r(t).company_name]]),r(t).errors.company_name?(l(),c("p",be,m(r(t).errors.company_name),1)):u("",!0)]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mã số thuế ",-1)),_(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r(t).company_tax_code=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_tax_code?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập mã số thuế"},null,2),[[b,r(t).company_tax_code]]),r(t).errors.company_tax_code?(l(),c("p",he,m(r(t).errors.company_tax_code),1)):u("",!0)]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ngày cấp mã số thuế ",-1)),_(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r(t).company_tax_code_issue_date=a),type:"date",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_tax_code_issue_date?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"])},null,2),[[b,r(t).company_tax_code_issue_date]]),r(t).errors.company_tax_code_issue_date?(l(),c("p",xe,m(r(t).errors.company_tax_code_issue_date),1)):u("",!0)]),o("div",ve,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nơi cấp mã số thuế ",-1)),_(o("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(t).company_tax_code_issue_place=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_tax_code_issue_place?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập nơi cấp mã số thuế"},null,2),[[b,r(t).company_tax_code_issue_place]]),r(t).errors.company_tax_code_issue_place?(l(),c("p",ke,m(r(t).errors.company_tax_code_issue_place),1)):u("",!0)]),o("div",we,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Địa chỉ doanh nghiệp ",-1)),_(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(t).company_address=a),rows:"3",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_address?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập địa chỉ trụ sở chính của doanh nghiệp"},null,2),[[b,r(t).company_address]]),r(t).errors.company_address?(l(),c("p",Ve,m(r(t).errors.company_address),1)):u("",!0)])])])]),o("div",$e,[o("div",null,[o("h2",Ne,[g(r(Y),{class:"w-5 h-5 mr-2 text-primary"}),e[16]||(e[16]=w(" Thông tin liên hệ ",-1))]),o("div",Te,[o("div",null,[e[17]||(e[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Số điện thoại ",-1)),_(o("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r(t).company_phone=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_phone?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số điện thoại"},null,2),[[b,r(t).company_phone]]),r(t).errors.company_phone?(l(),c("p",Se,m(r(t).errors.company_phone),1)):u("",!0)]),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),_(o("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>r(t).company_email=a),type:"email",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_email?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập email"},null,2),[[b,r(t).company_email]]),r(t).errors.company_email?(l(),c("p",Be,m(r(t).errors.company_email),1)):u("",!0)])])])]),o("div",Ue,[o("div",null,[o("h2",Ce,[g(r(Z),{class:"w-5 h-5 mr-2 text-primary"}),e[19]||(e[19]=w(" Thông tin thanh toán ",-1))]),o("div",Le,[o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Chọn ngân hàng ",-1)),g(de,{modelValue:r(t).bank_code,"onUpdate:modelValue":[e[7]||(e[7]=a=>r(t).bank_code=a),f],placeholder:"Chọn ngân hàng",error:r(t).errors.bank_code},null,8,["modelValue","error"])]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Số tài khoản ",-1)),_(o("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r(t).bank_account_number=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.bank_account_number?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số tài khoản"},null,2),[[b,r(t).bank_account_number]]),r(t).errors.bank_account_number?(l(),c("p",Me,m(r(t).errors.bank_account_number),1)):u("",!0)]),o("div",je,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tên chủ tài khoản ",-1)),_(o("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>r(t).bank_account_holder=a),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.bank_account_holder?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập tên chủ tài khoản"},null,2),[[b,r(t).bank_account_holder]]),r(t).errors.bank_account_holder?(l(),c("p",qe,m(r(t).errors.bank_account_holder),1)):u("",!0)])])])]),o("div",Ee,[g(r(K),{href:"/admin",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:x(()=>[...e[23]||(e[23]=[w(" Hủy ",-1)])]),_:1}),o("button",{type:"submit",disabled:r(t).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[r(t).processing?(l(),c("span",De,"Đang lưu...")):(l(),c("span",ze,"Lưu thông tin"))],8,Fe)])],32)])]),_:1})],64))}};export{Xe as default};
