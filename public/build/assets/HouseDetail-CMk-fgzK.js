import{c as i,d as e,o as n,u as V,r as j,A as u,H as z,a as d,b as a,h as S,w as A,e as h,t as l,F as v,i as M,y as p,Z as F,f as x,q,l as C}from"./app-CH4CEp7f.js";import{u as E,_ as G}from"./AppLayout-BP5QbzXX.js";import{g as O,b as Z}from"./amenityIcons-BDjHxJi7.js";import{_ as U,a as J}from"./ReviewItem-B03CrCzF.js";import{r as K}from"./ChevronLeftIcon-DodNt9Jn.js";import{r as Q}from"./ChevronRightIcon-CfJpHTOW.js";import{r as X}from"./MapPinIcon-A7TLZLbH.js";import{r as Y}from"./StarIcon-CS2u5NsH.js";import{r as H}from"./HeartIcon-B0K4FCNx.js";import{r as ee}from"./BuildingOfficeIcon-BvyATTDh.js";import{b as te}from"./FlashToaster-Co9bFWRi.js";import{r as se}from"./CheckCircleIcon-vuYTX3vL.js";import{r as re}from"./MapIcon-BbaHxWEc.js";import{r as oe}from"./CalendarIcon-DL8s8YjY.js";import{r as T}from"./PhoneIcon-DU1d_AQc.js";import{r as ne}from"./EnvelopeIcon-CHuN5Ave.js";/* empty css            */import"./auth-DNmRgx-c.js";import"./ChevronDownIcon-DbiTA9M5.js";import"./UserIcon-D6dhZXIY.js";import"./DocumentTextIcon-8-SXVR05.js";import"./PhotoIcon-CGQz7Bxq.js";function ie(o,s){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function ae(o,s){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}const le={class:"house-detail bg-light min-h-screen"},de={key:0,class:"container mx-auto px-4 py-20 text-center"},ce={key:1,class:"pb-12"},ue={class:"relative h-96 md:h-[500px] bg-gray-900 overflow-hidden"},he=["src","alt"],me={class:"container mx-auto px-4 -mt-20 relative z-10"},ge={class:"grid lg:grid-cols-3 gap-8"},fe={class:"lg:col-span-2"},xe={class:"card p-8 mb-6"},ye={class:"flex items-start justify-between mb-6"},ve={class:"text-3xl md:text-4xl font-bold text-secondary mb-3"},pe={class:"flex items-center text-gray-600 mb-2"},be={class:"flex items-center space-x-4"},we={class:"flex items-center"},ke={class:"font-semibold"},_e={class:"text-gray-500 ml-1"},Pe={class:"badge bg-primary-100 text-primary-700"},$e={class:"w-12 h-12 bg-secondary-50 rounded-full flex items-center justify-center hover:bg-secondary hover:text-white transition-all"},je={class:"grid grid-cols-3 gap-4 py-6 border-y"},Ae={class:"text-center"},Me={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Ce={class:"text-2xl font-bold text-primary"},Te={class:"text-center"},Be={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Ie={class:"text-2xl font-bold text-primary"},De={class:"text-center"},Ne={class:"w-12 h-12 bg-primary-50 rounded-lg flex items-center justify-center mx-auto mb-2"},Le={class:"text-2xl font-bold text-primary"},Re={class:"mt-6"},We={class:"text-gray-600 leading-relaxed"},Ve={class:"mt-8"},ze={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Se={class:"text-gray-700"},Fe={key:1,class:"text-center py-8 text-gray-500"},qe={class:"mt-8"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Oe={class:"flex items-center space-x-3"},Ze={class:"flex items-center justify-between p-4 bg-light rounded-lg border border-gray-200"},Ue={class:"flex items-center space-x-3"},Je={class:"mt-8"},Ke={key:0,class:"rounded-xl overflow-hidden shadow-lg"},Qe=["src"],Xe={key:1,class:"bg-gray-200 rounded-xl h-80 flex items-center justify-center"},Ye={class:"text-center"},He={class:"mt-8"},et={class:"text-2xl font-bold text-secondary mb-4"},tt={key:1,class:"space-y-6 mt-6"},st={key:2,class:"text-center py-8 text-gray-500"},rt={class:"lg:col-span-1"},ot={class:"card p-6 sticky top-24"},nt={class:"mb-6"},it={class:"space-y-3"},at={class:"flex items-center justify-between p-3 bg-light rounded-lg"},lt={class:"font-bold text-secondary"},dt={class:"flex items-center justify-between p-3 bg-light rounded-lg"},ct={class:"text-right flex items-center gap-2"},ut={class:"font-bold text-secondary"},ht={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800"},mt={class:"flex items-center justify-between p-3 bg-primary/10 rounded-lg border-2 border-primary"},gt={class:"text-right flex items-center gap-2"},ft={class:"font-bold text-primary text-lg"},xt={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-secondary-100 text-secondary-800"},yt={class:"w-full btn-outline"},vt={key:0,class:"text-sm text-center text-gray-500 mt-4"},pt={key:1,class:"mt-6 pt-6 border-t"},bt={class:"space-y-2 text-sm text-gray-600"},wt={class:"font-semibold text-gray-900 mb-2"},kt={key:0,class:"flex items-center"},_t=["href"],Pt={key:1,class:"flex items-center"},$t=["href"],Jt={__name:"HouseDetail",props:{house:{type:Object,default:null},rooms:{type:Array,default:()=>[]},reviews:{type:Array,default:()=>[]},canReview:{type:Boolean,default:!1},reviewableBookingId:{type:Number,default:null}},setup(o){V();const s=o,{isAuthenticated:b}=E(),g=j(""),c=j(0),w=u(()=>s.house?.amenities?Array.isArray(s.house.amenities)?s.house.amenities.filter(Boolean):typeof s.house.amenities=="object"?Object.keys(s.house.amenities).filter(r=>s.house.amenities[r]):[]:[]);z(()=>s.house,r=>{if(r){const t=r.featured_images&&Array.isArray(r.featured_images)&&r.featured_images.length>0?r.featured_images:Array.isArray(r.images)&&r.images.length>0?r.images:[];t.length>0?(g.value=t[0],c.value=0):(g.value=r.image||"",c.value=0)}},{immediate:!0});const B=u(()=>s.house?s.house.pricePerWeek?s.house.pricePerWeek:Math.round((s.house.pricePerDay||0)*7):0),I=u(()=>s.house?s.house.pricePerMonth?s.house.pricePerMonth:Math.round((s.house.pricePerDay||0)*30):0),k=u(()=>s.house?!!s.house.pricePerWeek:!1),_=u(()=>s.house?!!s.house.pricePerMonth:!1),P=u(()=>{if(!s.house||!k.value||!s.house.pricePerDay)return 0;const r=s.house.pricePerDay*7;if(r<=0||s.house.pricePerWeek>=r)return 0;const t=(r-s.house.pricePerWeek)/r*100;return Math.max(0,Math.round(t))}),$=u(()=>{if(!s.house||!_.value||!s.house.pricePerDay)return 0;const r=s.house.pricePerDay*30;if(r<=0||s.house.pricePerMonth>=r)return 0;const t=(r-s.house.pricePerMonth)/r*100;return Math.max(0,Math.round(t))}),D=u(()=>{if(!s.house?.latitude||!s.house?.longitude)return"";const r=s.house.latitude,t=s.house.longitude;return`https://www.google.com/maps?q=${r},${t}&hl=vi&z=15&output=embed`}),f=u(()=>s.house?s.house.featured_images&&Array.isArray(s.house.featured_images)&&s.house.featured_images.length>0?s.house.featured_images:s.house.images&&Array.isArray(s.house.images)&&s.house.images.length>0?s.house.images:s.house.image?[s.house.image]:[]:[]),N=()=>{const r=f.value;!r||r.length===0||(c.value=(c.value+1)%r.length,g.value=r[c.value])},L=()=>{const r=f.value;!r||r.length===0||(c.value=c.value===0?r.length-1:c.value-1,g.value=r[c.value])},y=r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),R=()=>{s.house?.id&&C.visit(`/booking/${s.house.id}`)},W=()=>{C.reload({only:["reviews","canReview","reviewableBookingId"],preserveScroll:!0})};return(r,t)=>(n(),i(v,null,[d(a(S),{title:o.house?.name||"Chi tiết nhà trọ"},null,8,["title"]),d(G,null,{default:A(()=>[e("div",le,[o.house?(n(),i("div",ce,[e("div",ue,[e("img",{src:g.value||o.house.image,alt:o.house.name,class:"w-full h-full object-cover transition-opacity duration-300"},null,8,he),f.value.length>1?(n(),i("button",{key:0,onClick:L,class:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[d(a(K),{class:"w-6 h-6 text-gray-800"})])):h("",!0),f.value.length>1?(n(),i("button",{key:1,onClick:N,class:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all z-20 shadow-lg"},[d(a(Q),{class:"w-6 h-6 text-gray-800"})])):h("",!0)]),e("div",me,[e("div",ge,[e("div",fe,[e("div",xe,[e("div",ye,[e("div",null,[e("h1",ve,l(o.house.name),1),e("div",pe,[d(a(X),{class:"w-5 h-5 mr-2"}),e("span",null,l(o.house.address),1)]),e("div",be,[e("div",we,[d(a(Y),{class:"w-5 h-5 text-yellow-400 mr-1"}),e("span",ke,l(o.house.rating),1),e("span",_e,"("+l(o.house.reviews)+" reviews)",1)]),e("span",Pe,l(o.house.availableRooms)+" phòng trống ",1)])]),e("button",$e,[d(a(H),{class:"w-6 h-6"})])]),e("div",je,[e("div",Ae,[e("div",Me,[d(a(ee),{class:"w-6 h-6 text-primary"})]),e("p",Ce,l(o.house.floors),1),t[1]||(t[1]=e("p",{class:"text-sm text-gray-600"},"Tầng",-1))]),e("div",Te,[e("div",Be,[d(a(te),{class:"w-6 h-6 text-primary"})]),e("p",Ie,l(o.house.totalRooms),1),t[2]||(t[2]=e("p",{class:"text-sm text-gray-600"},"Tổng phòng",-1))]),e("div",De,[e("div",Ne,[d(a(se),{class:"w-6 h-6 text-primary"})]),e("p",Le,l(o.house.availableRooms),1),t[3]||(t[3]=e("p",{class:"text-sm text-gray-600"},"Còn trống",-1))])]),e("div",Re,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Mô tả",-1)),e("p",We,l(o.house.description),1)]),e("div",Ve,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Tiện nghi",-1)),w.value.length>0?(n(),i("div",ze,[(n(!0),i(v,null,M(w.value,m=>(n(),i("div",{key:m,class:"flex items-center space-x-3 p-3 bg-light rounded-lg hover:bg-gray-50 transition-colors"},[(n(),p(F(a(O)(m)),{class:"w-5 h-5 text-primary flex-shrink-0"})),e("span",Se,l(a(Z)(m)),1)]))),128))])):(n(),i("div",Fe,[...t[5]||(t[5]=[e("p",null,"Chưa có thông tin tiện nghi",-1)])]))]),e("div",qe,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Giá dịch vụ",-1)),t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-4"},"Áp dụng cho gói thuê theo tháng",-1)),e("div",Ee,[e("div",Ge,[e("div",Oe,[d(a(ae),{class:"w-6 h-6 text-yellow-500"}),t[7]||(t[7]=e("div",null,[e("p",{class:"font-semibold text-gray-800"},"Điện"),e("p",{class:"text-sm text-gray-500"},"Tính theo số điện")],-1))]),t[8]||(t[8]=e("span",{class:"font-bold text-secondary text-lg"},"4.000đ / số",-1))]),e("div",Ze,[e("div",Ue,[d(a(ie),{class:"w-6 h-6 text-blue-500"}),t[9]||(t[9]=e("div",null,[e("p",{class:"font-semibold text-gray-800"},"Nước"),e("p",{class:"text-sm text-gray-500"},"Tính theo khối")],-1))]),t[10]||(t[10]=e("span",{class:"font-bold text-secondary text-lg"},"25.000đ / khối",-1))])])]),e("div",Je,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold text-secondary mb-4"},"Vị trí",-1)),o.house.latitude&&o.house.longitude?(n(),i("div",Ke,[e("iframe",{src:D.value,width:"100%",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"w-full"},null,8,Qe)])):(n(),i("div",Xe,[e("div",Ye,[d(a(re),{class:"w-16 h-16 text-gray-400 mx-auto mb-2"}),t[13]||(t[13]=e("p",{class:"text-gray-500"},"Thông tin vị trí chưa có sẵn",-1))])]))]),e("div",He,[e("h2",et,"Đánh giá ("+l(o.reviews?.length||0)+")",1),o.canReview&&a(b)&&o.reviewableBookingId?(n(),p(U,{key:0,"booking-id":o.reviewableBookingId,"house-id":o.house.id,onReviewCreated:W},null,8,["booking-id","house-id"])):h("",!0),o.reviews&&o.reviews.length>0?(n(),i("div",tt,[(n(!0),i(v,null,M(o.reviews,m=>(n(),p(J,{key:m.id,review:m},null,8,["review"]))),128))])):(n(),i("div",st,[...t[15]||(t[15]=[e("p",null,"Chưa có đánh giá nào",-1)])]))])])]),e("div",rt,[e("div",ot,[e("div",nt,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-600 mb-2"},"Giá thuê",-1)),e("div",it,[e("div",at,[t[16]||(t[16]=e("span",{class:"text-gray-700"},"Theo ngày",-1)),e("span",lt,l(y(o.house.pricePerDay)),1)]),e("div",dt,[t[17]||(t[17]=e("span",{class:"text-gray-700"},"Theo tuần",-1)),e("div",ct,[e("span",ut,l(y(B.value)),1),k.value&&P.value>0?(n(),i("span",ht," Tiết kiệm "+l(P.value)+"% ",1)):h("",!0)])]),e("div",mt,[t[18]||(t[18]=e("span",{class:"text-gray-700"},"Theo tháng",-1)),e("div",gt,[e("span",ft,l(y(I.value)),1),_.value&&$.value>0?(n(),i("span",xt," Tiết kiệm "+l($.value)+"% ",1)):h("",!0)])])])]),e("button",{onClick:R,class:"w-full btn-primary mb-3"},[d(a(oe),{class:"w-5 h-5 inline mr-2"}),t[20]||(t[20]=x(" Đặt phòng ngay ",-1))]),e("button",yt,[d(a(T),{class:"w-5 h-5 inline mr-2"}),t[21]||(t[21]=x(" Liên hệ ",-1))]),a(b)?h("",!0):(n(),i("p",vt,[d(a(q),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:A(()=>[...t[22]||(t[22]=[x(" Đăng nhập ",-1)])]),_:1}),t[23]||(t[23]=x(" để đặt phòng ",-1))])),o.house.owner?(n(),i("div",pt,[t[24]||(t[24]=e("h3",{class:"font-semibold text-gray-800 mb-3"},"Thông tin liên hệ",-1)),e("div",bt,[e("p",wt,l(o.house.owner.name),1),o.house.owner.phone?(n(),i("p",kt,[d(a(T),{class:"w-4 h-4 mr-2"}),e("a",{href:`tel:${o.house.owner.phone}`,class:"hover:text-primary"},l(o.house.owner.phone),9,_t)])):h("",!0),o.house.owner.email?(n(),i("p",Pt,[d(a(ne),{class:"w-4 h-4 mr-2"}),e("a",{href:`mailto:${o.house.owner.email}`,class:"hover:text-primary break-all"},l(o.house.owner.email),9,$t)])):h("",!0)])])):h("",!0)])])])])])):(n(),i("div",de,[...t[0]||(t[0]=[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin nhà trọ...",-1)])]))])]),_:1})],64))}};export{Jt as default};
