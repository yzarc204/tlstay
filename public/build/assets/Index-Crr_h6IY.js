import{r as M,c as l,a as p,b as u,h as L,w as f,d as t,g as v,v as D,j as k,e as d,o as n,F as b,i as N,t as a,n as h,q as _,f as m,y as T,l as H}from"./app-CH4CEp7f.js";import{_ as P}from"./AdminLayout-BT6D36Nk.js";import{_ as U}from"./SelectSearchable-BiWu3_fh.js";import{r as $}from"./EyeIcon-CHZ1M4j4.js";import{r as z}from"./CalendarIcon-DL8s8YjY.js";/* empty css            */import"./FlashToaster-Co9bFWRi.js";import"./MapPinIcon-A7TLZLbH.js";import"./PhotoIcon-CGQz7Bxq.js";import"./BuildingOfficeIcon-BvyATTDh.js";import"./ChevronUpDownIcon-B4DqVAmi.js";const F={class:"space-y-6"},I={class:"bg-white rounded-lg shadow-sm p-4"},K={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Q={class:"md:col-span-2"},X={class:"mt-4"},O={class:"bg-white rounded-lg shadow-sm overflow-hidden"},A={class:"overflow-x-auto"},E={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},R={class:"text-sm font-medium text-gray-900"},W={class:"text-xs text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"text-sm font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},et={key:0,class:"text-xs text-gray-400"},st={class:"px-6 py-4"},at={class:"text-sm font-medium text-gray-900"},rt={class:"text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap"},ot={class:"text-sm text-gray-900"},it={class:"text-sm text-gray-500"},lt={class:"px-6 py-4 whitespace-nowrap"},dt={class:"text-sm font-medium text-gray-900"},ut={key:0,class:"text-xs text-green-600"},mt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"px-6 py-4 whitespace-nowrap"},ct={key:0,class:"text-xs text-gray-500 mt-1"},gt={class:"px-6 py-4 whitespace-nowrap"},xt={key:0,class:"text-xs text-gray-500 mt-1"},yt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"flex items-center justify-start gap-2"},ft={class:"relative group"},vt={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},bt={class:"flex items-center justify-between"},_t={class:"flex-1 flex justify-between sm:hidden"},wt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},kt={class:"text-sm text-gray-700"},Tt={class:"font-medium"},Vt={class:"font-medium"},St={class:"font-medium"},Ct={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Mt=["innerHTML"],Nt={key:1,class:"text-center py-12"},It={__name:"Index",props:{bookings:{type:Object,required:!0},houses:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(r){const c=r,w=M(c.filters.search||""),i=M({house_id:c.filters.house_id||"",booking_status:c.filters.booking_status||"",payment_status:c.filters.payment_status||"",contract_signed:c.filters.contract_signed||""});let V=null;const j=()=>{clearTimeout(V),V=setTimeout(()=>{g()},300)},g=()=>{H.get("/admin/bookings",{search:w.value||void 0,house_id:i.value.house_id||void 0,booking_status:i.value.booking_status||void 0,payment_status:i.value.payment_status||void 0,contract_signed:i.value.contract_signed||void 0},{preserveState:!0,preserveScroll:!0})},x=o=>o?new Date(o).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}):"",S=o=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o),q=o=>({upcoming:"Sắp tới",active:"Đang ở",past:"Đã kết thúc"})[o]||o,B=o=>({upcoming:"bg-amber-100 text-amber-800 border border-amber-300",active:"bg-green-100 text-green-800",past:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",C=o=>o&&o.replace(/&laquo;\s*Previous/gi,"Trước").replace(/Previous/gi,"Trước").replace(/&laquo;/g,"Trước").replace(/Next\s*&raquo;/gi,"Sau").replace(/Next/gi,"Sau").replace(/&raquo;/g,"Sau");return(o,e)=>(n(),l(b,null,[p(u(L),{title:"Quản lý Đặt phòng"}),p(P,{title:"Quản lý Đặt phòng"},{default:f(()=>[t("div",F,[e[23]||(e[23]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Quản lý Đặt phòng"),t("p",{class:"text-gray-600 mt-1"},"Xem và quản lý tất cả đơn đặt phòng")],-1)),t("div",I,[t("div",K,[t("div",Q,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tìm kiếm ",-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",placeholder:"Mã đặt phòng, tên khách hàng, nhà trọ...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",onInput:j},null,544),[[D,w.value]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nhà trọ ",-1)),p(U,{modelValue:i.value.house_id,"onUpdate:modelValue":[e[1]||(e[1]=s=>i.value.house_id=s),g],options:r.houses,"option-value":"id","option-label":"name",placeholder:"Tất cả nhà trọ..."},null,8,["modelValue","options"])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Trạng thái đặt phòng ",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.booking_status=s),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...e[7]||(e[7]=[t("option",{value:""},"Tất cả",-1),t("option",{value:"upcoming"},"Sắp tới",-1),t("option",{value:"active"},"Đang ở",-1),t("option",{value:"past"},"Đã kết thúc",-1)])],544),[[k,i.value.booking_status]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Trạng thái thanh toán ",-1)),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.payment_status=s),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...e[9]||(e[9]=[t("option",{value:""},"Tất cả",-1),t("option",{value:"pending"},"Chưa thanh toán",-1),t("option",{value:"paid"},"Đã thanh toán",-1)])],544),[[k,i.value.payment_status]])])]),t("div",X,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Trạng thái hợp đồng ",-1)),v(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>i.value.contract_signed=s),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...e[11]||(e[11]=[t("option",{value:""},"Tất cả",-1),t("option",{value:"1"},"Đã ký",-1),t("option",{value:"0"},"Chưa ký",-1)])],544),[[k,i.value.contract_signed]])])]),t("div",O,[t("div",A,[t("table",E,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mã đặt phòng "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Khách hàng "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nhà trọ / Phòng "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thời gian "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tổng tiền "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trạng thái "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thanh toán "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Hợp đồng "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thao tác ")])],-1)),t("tbody",G,[(n(!0),l(b,null,N(r.bookings.data,s=>(n(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",J,[t("div",R,a(s.booking_code||`#${s.id}`),1),t("div",W,a(x(s.created_at)),1)]),t("td",Y,[t("div",Z,a(s.user.name),1),t("div",tt,a(s.user.email),1),s.user.phone?(n(),l("div",et,a(s.user.phone),1)):d("",!0)]),t("td",st,[t("div",at,a(s.house.name),1),t("div",rt," Phòng "+a(s.room.room_number)+" - Tầng "+a(s.room.floor),1)]),t("td",nt,[t("div",ot,a(x(s.start_date)),1),t("div",it," đến "+a(x(s.end_date)),1)]),t("td",lt,[t("div",dt,a(S(s.total_price)),1),s.discount_amount>0?(n(),l("div",ut," Giảm: "+a(S(s.discount_amount)),1)):d("",!0)]),t("td",mt,[t("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",B(s.booking_status)])},a(q(s.booking_status)),3)]),t("td",pt,[t("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.payment_status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(s.payment_status==="paid"?"Đã thanh toán":"Chưa thanh toán"),3),s.paid_at?(n(),l("div",ct,a(x(s.paid_at)),1)):d("",!0)]),t("td",gt,[t("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.contract_signed?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},a(s.contract_signed?"Đã ký":"Chưa ký"),3),s.signed_at?(n(),l("div",xt,a(x(s.signed_at)),1)):d("",!0)]),t("td",yt,[t("div",ht,[t("div",ft,[p(u(_),{href:`/admin/bookings/${s.id}`,class:"inline-flex items-center justify-center w-8 h-8 rounded-lg text-gray-600 hover:bg-gray-100 hover:text-primary transition-colors",title:"Xem chi tiết"},{default:f(()=>[p(u($),{class:"h-5 w-5"})]),_:1},8,["href"]),e[13]||(e[13]=t("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded shadow-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none z-50"},[m(" Xem chi tiết "),t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})],-1))])])])]))),128))])])]),r.bookings.links&&r.bookings.links.length>3?(n(),l("div",vt,[t("div",bt,[t("div",_t,[r.bookings.links[0].url?(n(),T(u(_),{key:0,href:r.bookings.links[0].url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:f(()=>[...e[15]||(e[15]=[m(" Trước ",-1)])]),_:1},8,["href"])):d("",!0),r.bookings.links[r.bookings.links.length-1].url?(n(),T(u(_),{key:1,href:r.bookings.links[r.bookings.links.length-1].url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:f(()=>[...e[16]||(e[16]=[m(" Sau ",-1)])]),_:1},8,["href"])):d("",!0)]),t("div",wt,[t("div",null,[t("p",kt,[e[17]||(e[17]=m(" Hiển thị ",-1)),t("span",Tt,a(r.bookings.from),1),e[18]||(e[18]=m(" đến ",-1)),t("span",Vt,a(r.bookings.to),1),e[19]||(e[19]=m(" trong tổng số ",-1)),t("span",St,a(r.bookings.total),1),e[20]||(e[20]=m(" kết quả ",-1))])]),t("div",null,[t("nav",Ct,[(n(!0),l(b,null,N(r.bookings.links,(s,y)=>(n(),l(b,{key:y},[s.url?(n(),T(u(_),{key:0,href:s.url,innerHTML:C(s.label),class:h(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50",y===0?"rounded-l-md":"",y===r.bookings.links.length-1?"rounded-r-md":""])},null,8,["href","innerHTML","class"])):(n(),l("span",{key:1,innerHTML:C(s.label),class:h(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-300",[y===0?"rounded-l-md":"",y===r.bookings.links.length-1?"rounded-r-md":""]])},null,10,Mt))],64))),128))])])])])])):d("",!0),r.bookings.data.length===0?(n(),l("div",Nt,[p(u(z),{class:"mx-auto h-12 w-12 text-gray-400"}),e[21]||(e[21]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Không có đặt phòng",-1)),e[22]||(e[22]=t("p",{class:"mt-1 text-sm text-gray-500"},"Không tìm thấy đặt phòng nào phù hợp với bộ lọc.",-1))])):d("",!0)])])]),_:1})],64))}};export{It as default};
