import{r as $,z as L,m as M,A as U,c,a as m,e as u,w as x,d as o,n as g,o as d,b as r,T as z,y as N,F as j,i as D,t as y,p as A,h as I,k as H,f as w,g as b,v as h,q as K}from"./app-Dd0SGSJv.js";import{_ as O}from"./AdminLayout-B3YbZI-i.js";import{i as Q,n as G,r as J,u as C,a as P,b as R,l as W}from"./ChevronUpDownIcon-BobbSi1Q.js";import{_ as X}from"./DatePicker-Dj272ROb.js";import{r as Y}from"./BuildingOfficeIcon-Cxa1hsk5.js";import{r as Z}from"./PhoneIcon-F5ukeaHZ.js";import{r as ee}from"./CreditCardIcon-ZAD0twzh.js";/* empty css            */import"./FlashToaster-N9WVprdY.js";import"./MapPinIcon-toa6T9TU.js";import"./CalendarIcon-DmuRe5MY.js";import"./PhotoIcon-Dckw5xPd.js";import"./ChevronLeftIcon-D7zrz7Da.js";import"./ChevronRightIcon-Dit2hGKa.js";const re={class:"relative"},oe={class:"relative"},te={class:"flex items-center pl-3"},se=["src","alt"],ae={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},ne={class:"flex items-center"},le=["src","alt"],de={key:0,class:"mt-1 text-sm text-red-600"},ie={__name:"BankSelect",props:{modelValue:{type:String,default:null},placeholder:{type:String,default:"Chọn ngân hàng"},error:{type:String,default:null}},emits:["update:modelValue"],setup(v,{emit:p}){const t=v,k=p,f=$([]),_=$(!0),i=$("");L(async()=>{try{const a=await M.get("/api/banks");a.data&&a.data.banks&&(f.value=a.data.banks.filter(s=>s.transferSupported===1).map(s=>({code:s.code,name:s.name,shortName:s.shortName,logo:s.logo})).sort((s,l)=>s.name.localeCompare(l.name,"vi")))}catch(a){console.error("Failed to fetch banks:",a),f.value=[]}finally{_.value=!1}});const e=U({get:()=>t.modelValue,set:a=>k("update:modelValue",a)}),n=a=>{if(!a)return null;const s=f.value.find(l=>l.code===a);return s&&s.logo?s.logo:`https://api.vietqr.io/img/${a}.png`},q=a=>{if(!a)return"";const s=f.value.find(l=>l.code===a);return s?s.name:a},E=a=>{if(!a)return"";const s=f.value.find(l=>l.code===a);return s?`${s.name} (${s.code})`:a},T=a=>{a.target.style.display="none"},F=a=>{e.value=a},S=U(()=>{if(!i.value.trim())return f.value;const a=i.value.toLowerCase().trim();return f.value.filter(s=>{const l=s.name.toLowerCase().includes(a),V=s.code.toLowerCase().includes(a);return l||V})});return(a,s)=>(d(),c("div",re,[m(r(W),{modelValue:e.value,"onUpdate:modelValue":[s[2]||(s[2]=l=>e.value=l),F]},{default:x(()=>[o("div",oe,[o("div",{class:g(["relative w-full cursor-default overflow-hidden rounded-lg border bg-white text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 focus-visible:ring-offset-2 focus-visible:ring-offset-primary sm:text-sm",[v.error?"border-red-500 focus-visible:ring-red-500":"border-gray-300 focus-visible:ring-primary",_.value?"opacity-50 cursor-not-allowed":""]])},[o("div",te,[e.value&&!_.value?(d(),c("img",{key:0,src:n(e.value),alt:q(e.value),class:"h-5 w-5 object-contain mr-2 flex-shrink-0",onError:T},null,40,se)):u("",!0),m(r(Q),{class:"w-full border-none py-2 pr-10 text-sm leading-5 text-gray-900 focus:ring-0","display-value":()=>i.value?i.value:e.value?E(e.value):"",onChange:s[0]||(s[0]=l=>i.value=l.target.value),placeholder:v.placeholder,disabled:_.value},null,8,["display-value","placeholder","disabled"])]),m(r(G),{class:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:_.value},{default:x(()=>[m(r(J),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1},8,["disabled"])],2),m(z,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0",onAfterLeave:s[1]||(s[1]=l=>i.value="")},{default:x(()=>[_.value?(d(),N(r(C),{key:1,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:x(()=>[...s[3]||(s[3]=[o("li",{class:"relative cursor-default select-none py-2 px-4 text-gray-500 text-center"}," Đang tải danh sách ngân hàng... ",-1)])]),_:1})):(d(),N(r(C),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:x(()=>[S.value.length===0&&i.value!==""?(d(),c("div",ae," Không tìm thấy ngân hàng nào ")):u("",!0),(d(!0),c(j,null,D(S.value,l=>(d(),N(r(P),{key:l.code,value:l.code,as:"template"},{default:x(({selected:V,active:B})=>[o("li",{class:g(["relative cursor-default select-none py-2 pl-10 pr-4",B?"bg-primary text-white":"text-gray-900"])},[o("div",ne,[o("img",{src:l.logo||n(l.code),alt:l.name,class:"h-5 w-5 object-contain mr-2 flex-shrink-0",onError:T},null,40,le),o("span",{class:g(["block truncate",V?"font-medium":"font-normal"])},y(l.name)+" ("+y(l.code)+") ",3)]),V?(d(),c("span",{key:0,class:g(["absolute inset-y-0 left-0 flex items-center pl-3",B?"text-white":"text-primary"])},[m(r(R),{class:"h-5 w-5","aria-hidden":"true"})],2)):u("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1}))]),_:1})])]),_:1},8,["modelValue"]),v.error?(d(),c("p",de,y(v.error),1)):u("",!0)]))}},ce={class:"space-y-6"},ue={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},me={class:"text-green-800"},pe={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},ye={class:"text-red-800"},ge={class:"space-y-6"},fe={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},_e={class:"grid md:grid-cols-2 gap-6"},be={class:"md:col-span-2"},he={key:0,class:"mt-1 text-sm text-red-600"},xe={key:0,class:"mt-1 text-sm text-red-600"},ve={class:"md:col-span-2"},ke={key:0,class:"mt-1 text-sm text-red-600"},we={class:"md:col-span-2"},Ve={key:0,class:"mt-1 text-sm text-red-600"},$e={class:"space-y-6 border-t pt-6"},Ne={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Te={class:"grid md:grid-cols-2 gap-6"},Se={key:0,class:"mt-1 text-sm text-red-600"},Be={key:0,class:"mt-1 text-sm text-red-600"},Ue={class:"space-y-6 border-t pt-6"},Ce={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},Le={class:"grid md:grid-cols-2 gap-6"},Me={key:0,class:"mt-1 text-sm text-red-600"},je={class:"md:col-span-2"},qe={key:0,class:"mt-1 text-sm text-red-600"},Ee={class:"flex justify-end space-x-4 pt-6 border-t"},Fe=["disabled"],ze={key:0},De={key:1},er={__name:"Index",props:{company:{type:Object,required:!0}},setup(v){const p=v,t=A({company_name:p.company.company_name||"",company_tax_code:p.company.company_tax_code||"",company_tax_code_issue_date:p.company.company_tax_code_issue_date||"",company_tax_code_issue_place:p.company.company_tax_code_issue_place||"",company_address:p.company.company_address||"",company_phone:p.company.company_phone||"",company_email:p.company.company_email||"",bank_name:p.company.bank_name||"",bank_code:p.company.bank_code||"",bank_account_number:p.company.bank_account_number||"",bank_account_holder:p.company.bank_account_holder||""}),k=$([]);L(async()=>{try{const i=await M.get("/api/banks");i.data&&i.data.banks&&(k.value=i.data.banks.filter(e=>e.transferSupported===1).map(e=>({code:e.code,name:e.name})))}catch(i){console.error("Failed to fetch banks:",i)}});const f=i=>{if(i&&k.value.length>0){const e=k.value.find(n=>n.code===i);e&&(t.bank_name=e.name)}},_=()=>{t.put("/admin/company-information",{preserveScroll:!0})};return(i,e)=>(d(),c(j,null,[m(r(I),{title:"Thông tin doanh nghiệp"}),m(O,{title:"Thông tin doanh nghiệp"},{default:x(()=>[o("div",ce,[e[24]||(e[24]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-2xl font-bold text-gray-900"},"Thông tin doanh nghiệp"),o("p",{class:"text-gray-600 mt-1"},"Quản lý thông tin doanh nghiệp hiển thị trên hợp đồng thuê trọ")])],-1)),i.$page.props.flash?.success?(d(),c("div",ue,[o("p",me,y(i.$page.props.flash.success),1)])):u("",!0),i.$page.props.flash?.error?(d(),c("div",pe,[o("p",ye,y(i.$page.props.flash.error),1)])):u("",!0),o("form",{onSubmit:H(_,["prevent"]),class:"bg-white rounded-lg shadow-sm p-6 space-y-8"},[o("div",ge,[o("div",null,[o("h2",fe,[m(r(Y),{class:"w-5 h-5 mr-2 text-primary"}),e[10]||(e[10]=w(" Thông tin cơ bản ",-1))]),o("div",_e,[o("div",be,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Tên doanh nghiệp "),o("span",{class:"text-red-500"},"*")],-1)),b(o("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>r(t).company_name=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_name?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập tên doanh nghiệp",required:""},null,2),[[h,r(t).company_name]]),r(t).errors.company_name?(d(),c("p",he,y(r(t).errors.company_name),1)):u("",!0)]),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mã số thuế ",-1)),b(o("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r(t).company_tax_code=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_tax_code?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập mã số thuế"},null,2),[[h,r(t).company_tax_code]]),r(t).errors.company_tax_code?(d(),c("p",xe,y(r(t).errors.company_tax_code),1)):u("",!0)]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ngày cấp mã số thuế ",-1)),m(X,{modelValue:r(t).company_tax_code_issue_date,"onUpdate:modelValue":e[2]||(e[2]=n=>r(t).company_tax_code_issue_date=n),placeholder:"dd/mm/yyyy",error:r(t).errors.company_tax_code_issue_date},null,8,["modelValue","error"])]),o("div",ve,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nơi cấp mã số thuế ",-1)),b(o("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>r(t).company_tax_code_issue_place=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_tax_code_issue_place?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập nơi cấp mã số thuế"},null,2),[[h,r(t).company_tax_code_issue_place]]),r(t).errors.company_tax_code_issue_place?(d(),c("p",ke,y(r(t).errors.company_tax_code_issue_place),1)):u("",!0)]),o("div",we,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Địa chỉ doanh nghiệp ",-1)),b(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=n=>r(t).company_address=n),rows:"3",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_address?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập địa chỉ trụ sở chính của doanh nghiệp"},null,2),[[h,r(t).company_address]]),r(t).errors.company_address?(d(),c("p",Ve,y(r(t).errors.company_address),1)):u("",!0)])])])]),o("div",$e,[o("div",null,[o("h2",Ne,[m(r(Z),{class:"w-5 h-5 mr-2 text-primary"}),e[16]||(e[16]=w(" Thông tin liên hệ ",-1))]),o("div",Te,[o("div",null,[e[17]||(e[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Số điện thoại ",-1)),b(o("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>r(t).company_phone=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_phone?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số điện thoại"},null,2),[[h,r(t).company_phone]]),r(t).errors.company_phone?(d(),c("p",Se,y(r(t).errors.company_phone),1)):u("",!0)]),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),b(o("input",{"onUpdate:modelValue":e[6]||(e[6]=n=>r(t).company_email=n),type:"email",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.company_email?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập email"},null,2),[[h,r(t).company_email]]),r(t).errors.company_email?(d(),c("p",Be,y(r(t).errors.company_email),1)):u("",!0)])])])]),o("div",Ue,[o("div",null,[o("h2",Ce,[m(r(ee),{class:"w-5 h-5 mr-2 text-primary"}),e[19]||(e[19]=w(" Thông tin thanh toán ",-1))]),o("div",Le,[o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Chọn ngân hàng ",-1)),m(ie,{modelValue:r(t).bank_code,"onUpdate:modelValue":[e[7]||(e[7]=n=>r(t).bank_code=n),f],placeholder:"Chọn ngân hàng",error:r(t).errors.bank_code},null,8,["modelValue","error"])]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Số tài khoản ",-1)),b(o("input",{"onUpdate:modelValue":e[8]||(e[8]=n=>r(t).bank_account_number=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.bank_account_number?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập số tài khoản"},null,2),[[h,r(t).bank_account_number]]),r(t).errors.bank_account_number?(d(),c("p",Me,y(r(t).errors.bank_account_number),1)):u("",!0)]),o("div",je,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tên chủ tài khoản ",-1)),b(o("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>r(t).bank_account_holder=n),type:"text",class:g(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors",r(t).errors.bank_account_holder?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary focus:border-transparent"]),placeholder:"Nhập tên chủ tài khoản"},null,2),[[h,r(t).bank_account_holder]]),r(t).errors.bank_account_holder?(d(),c("p",qe,y(r(t).errors.bank_account_holder),1)):u("",!0)])])])]),o("div",Ee,[m(r(K),{href:"/admin",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:x(()=>[...e[23]||(e[23]=[w(" Hủy ",-1)])]),_:1}),o("button",{type:"submit",disabled:r(t).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[r(t).processing?(d(),c("span",De,"Đang lưu...")):(d(),c("span",ze,"Lưu thông tin"))],8,Fe)])],32)])]),_:1})],64))}};export{er as default};
