import{r as se,x as Ot,A as z,D as $,b as p,z as Yt,Y as et,B as $e,S as Bt,Z as Xr,O as Qr,V as De,C as Jr,_ as en,$ as Xt,N as tn,a0 as rn,c as E,e as B,d as o,a as re,n as Ue,t as A,o as S,p as nr,L as nn,h as sn,w as sr,f as me,F as Xe,i as vt,y as ln,k as Ie,g as ze,v as lt,q as an,a1 as Nt,l as at}from"./app-BdvrGfPi.js";import{u as on,_ as un}from"./AppLayout-BAX4DMM8.js";import{r as Lt}from"./CheckIcon-DfohWGNv.js";import{b as Sr,a as It}from"./FlashToaster-hPDfO9im.js";import{_ as pt}from"./DateInput-CFDO4tBH.js";import{r as ir}from"./ChevronLeftIcon-D1zwSkzB.js";import{r as lr}from"./ExclamationCircleIcon-A4X1VRn0.js";import{r as dn}from"./BuildingOfficeIcon-CEx4fCQM.js";import{r as cn}from"./ChevronRightIcon-BOlecxHw.js";/* empty css            */import"./auth-CJFPJgpe.js";import"./ChevronDownIcon-uT6iWfgT.js";import"./UserIcon-vcAtQEth.js";import"./DocumentTextIcon-DPzBDB88.js";import"./PhoneIcon-BpYhuJpP.js";import"./EnvelopeIcon-CJ62BL6y.js";function pe(r){return typeof r=="function"}function Er(r){return r==null}const We=r=>r!==null&&!!r&&typeof r=="object"&&!Array.isArray(r);function Qt(r){return Number(r)>=0}function fn(r){const e=parseFloat(r);return isNaN(e)?r:e}function hn(r){return typeof r=="object"&&r!==null}function mn(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}function ar(r){if(!hn(r)||mn(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function dt(r,e){return Object.keys(e).forEach(t=>{if(ar(e[t])&&ar(r[t])){r[t]||(r[t]={}),dt(r[t],e[t]);return}r[t]=e[t]}),r}function ot(r){const e=r.split(".");if(!e.length)return"";let t=String(e[0]);for(let n=1;n<e.length;n++){if(Qt(e[n])){t+=`[${e[n]}]`;continue}t+=`.${e[n]}`}return t}const vn={};function pn(r){return vn[r]}function or(r,e,t){typeof t.value=="object"&&(t.value=G(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(r,e,t):r[e]=t.value}function G(r){if(typeof r!="object")return r;var e=0,t,n,s,i=Object.prototype.toString.call(r);if(i==="[object Object]"?s=Object.create(r.__proto__||null):i==="[object Array]"?s=Array(r.length):i==="[object Set]"?(s=new Set,r.forEach(function(a){s.add(G(a))})):i==="[object Map]"?(s=new Map,r.forEach(function(a,c){s.set(G(c),G(a))})):i==="[object Date]"?s=new Date(+r):i==="[object RegExp]"?s=new RegExp(r.source,r.flags):i==="[object DataView]"?s=new r.constructor(G(r.buffer)):i==="[object ArrayBuffer]"?s=r.slice(0):i.slice(-6)==="Array]"&&(s=new r.constructor(r)),s){for(n=Object.getOwnPropertySymbols(r);e<n.length;e++)or(s,n[e],Object.getOwnPropertyDescriptor(r,n[e]));for(e=0,n=Object.getOwnPropertyNames(r);e<n.length;e++)Object.hasOwnProperty.call(s,t=n[e])&&s[t]===r[t]||or(s,t,Object.getOwnPropertyDescriptor(r,t))}return s||r}const Jt=Symbol("vee-validate-form"),gn=Symbol("vee-validate-form-context"),yn=Symbol("vee-validate-field-instance"),ur=Symbol("Default empty value"),bn=typeof window<"u";function Zt(r){return pe(r)&&!!r.__locatorRef}function Ve(r){return!!r&&pe(r.parse)&&r.__type==="VVTypedSchema"}function St(r){return!!r&&pe(r.validate)}function Fr(r){return r==="checkbox"||r==="radio"}function xn(r){return We(r)||Array.isArray(r)}function _n(r){return Array.isArray(r)?r.length===0:We(r)&&Object.keys(r).length===0}function Tt(r){return/^\[.+\]$/i.test(r)}function wn(r){return Cr(r)&&r.multiple}function Cr(r){return r.tagName==="SELECT"}function kn(r){return Tr(r)&&r.target&&"submit"in r.target}function Tr(r){return r?!!(typeof Event<"u"&&pe(Event)&&r instanceof Event||r&&r.srcElement):!1}function de(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return!1;var t,n,s;if(Array.isArray(r)){if(t=r.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!de(r[n],e[n]))return!1;return!0}if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(n of r.entries())if(!e.has(n[0]))return!1;for(n of r.entries())if(!de(n[1],e.get(n[0])))return!1;return!0}if(cr(r)&&cr(e))return!(r.size!==e.size||r.name!==e.name||r.lastModified!==e.lastModified||r.type!==e.type);if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(n of r.entries())if(!e.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(e)){if(t=r.length,t!=e.length)return!1;for(n=t;n--!==0;)if(r[n]!==e[n])return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if(r=dr(r),e=dr(e),s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){var i=s[n];if(!de(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function dr(r){return Object.fromEntries(Object.entries(r).filter(([,e])=>e!==void 0))}function cr(r){return bn?r instanceof File:!1}function er(r){return Tt(r)?r.replace(/\[|\]/gi,""):r}function ge(r,e,t){return r?Tt(e)?r[er(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>xn(s)&&i in s?s[i]:t,r):t}function Me(r,e,t){if(Tt(e)){r[er(e)]=t;return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=r;for(let i=0;i<n.length;i++){if(i===n.length-1){s[n[i]]=t;return}(!(n[i]in s)||Er(s[n[i]]))&&(s[n[i]]=Qt(n[i+1])?[]:{}),s=s[n[i]]}}function Pt(r,e){if(Array.isArray(r)&&Qt(e)){r.splice(Number(e),1);return}We(r)&&delete r[e]}function fr(r,e){if(Tt(e)){delete r[er(e)];return}const t=e.split(/\.|\[(\d+)\]/).filter(Boolean);let n=r;for(let i=0;i<t.length;i++){if(i===t.length-1){Pt(n,t[i]);break}if(!(t[i]in n)||Er(n[t[i]]))break;n=n[t[i]]}const s=t.map((i,a)=>ge(r,t.slice(0,a).join(".")));for(let i=s.length-1;i>=0;i--)if(_n(s[i])){if(i===0){Pt(r,t[0]);continue}Pt(s[i-1],t[i-1])}}function ke(r){return Object.keys(r)}function $r(r,e=void 0){const t=Xt();return t?.provides[r]||tn(r,e)}function On(r,e,t){if(Array.isArray(r)){const n=[...r],s=n.findIndex(i=>de(i,e));return s>=0?n.splice(s,1):n.push(e),n}return de(r,e)?t:e}function hr(r,e=0){let t=null,n=[];return function(...s){return t&&clearTimeout(t),t=setTimeout(()=>{const i=r(...s);n.forEach(a=>a(i)),n=[]},e),new Promise(i=>n.push(i))}}function Sn(r,e){return We(e)&&e.number?fn(r):r}function Ht(r,e){let t;return async function(...s){const i=r(...s);t=i;const a=await i;return i!==t?a:(t=void 0,e(a,s))}}function Wt(r){return Array.isArray(r)?r:r?[r]:[]}function gt(r,e){const t={};for(const n in r)e.includes(n)||(t[n]=r[n]);return t}function En(r){let e=null,t=[];return function(...n){const s=De(()=>{if(e!==s)return;const i=r(...n);t.forEach(a=>a(i)),t=[],e=null});return e=s,new Promise(i=>t.push(i))}}function Mt(r){if(Vr(r))return r._value}function Vr(r){return"_value"in r}function Fn(r){return r.type==="number"||r.type==="range"?Number.isNaN(r.valueAsNumber)?r.value:r.valueAsNumber:r.value}function Et(r){if(!Tr(r))return r;const e=r.target;if(Fr(e.type)&&Vr(e))return Mt(e);if(e.type==="file"&&e.files){const t=Array.from(e.files);return e.multiple?t:t[0]}if(wn(e))return Array.from(e.options).filter(t=>t.selected&&!t.disabled).map(Mt);if(Cr(e)){const t=Array.from(e.options).find(n=>n.selected);return t?Mt(t):e.value}return Fn(e)}function jr(r){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),r?We(r)&&r._$$isNormalized?r:We(r)?Object.keys(r).reduce((t,n)=>{const s=Cn(r[n]);return r[n]!==!1&&(t[n]=mr(s)),t},e):typeof r!="string"?e:r.split("|").reduce((t,n)=>{const s=Tn(n);return s.name&&(t[s.name]=mr(s.params)),t},e):e}function Cn(r){return r===!0?[]:Array.isArray(r)||We(r)?r:[r]}function mr(r){const e=t=>typeof t=="string"&&t[0]==="@"?$n(t.slice(1)):t;return Array.isArray(r)?r.map(e):r instanceof RegExp?[r]:Object.keys(r).reduce((t,n)=>(t[n]=e(r[n]),t),{})}const Tn=r=>{let e=[];const t=r.split(":")[0];return r.includes(":")&&(e=r.split(":").slice(1).join(":").split(",")),{name:t,params:e}};function $n(r){const e=t=>{var n;return(n=ge(t,r))!==null&&n!==void 0?n:t[r]};return e.__locatorRef=r,e}function Vn(r){return Array.isArray(r)?r.filter(Zt):ke(r).filter(e=>Zt(r[e])).map(e=>r[e])}const jn={generateMessage:({field:r})=>`${r} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let An=Object.assign({},jn);const ut=()=>An;async function Ar(r,e,t={}){const n=t?.bails,s={name:t?.name||"{field}",rules:e,label:t?.label,bails:n??!0,formData:t?.values||{}},i=await Dn(s,r);return Object.assign(Object.assign({},i),{valid:!i.errors.length})}async function Dn(r,e){const t=r.rules;if(Ve(t)||St(t))return In(e,Object.assign(Object.assign({},r),{rules:t}));if(pe(t)||Array.isArray(t)){const c={field:r.label||r.name,name:r.name,label:r.label,form:r.formData,value:e},f=Array.isArray(t)?t:[t],h=f.length,m=[];for(let y=0;y<h;y++){const O=f[y],w=await O(e,c);if(!(typeof w!="string"&&!Array.isArray(w)&&w)){if(Array.isArray(w))m.push(...w);else{const U=typeof w=="string"?w:Nr(c);m.push(U)}if(r.bails)return{errors:m}}}return{errors:m}}const n=Object.assign(Object.assign({},r),{rules:jr(t)}),s=[],i=Object.keys(n.rules),a=i.length;for(let c=0;c<a;c++){const f=i[c],h=await Pn(n,e,{name:f,params:n.rules[f]});if(h.error&&(s.push(h.error),r.bails))return{errors:s}}return{errors:s}}function Nn(r){return!!r&&r.name==="ValidationError"}function Dr(r){return{__type:"VVTypedSchema",async parse(t,n){var s;try{return{output:await r.validate(t,{abortEarly:!1,context:n?.formData||{}}),errors:[]}}catch(i){if(!Nn(i))throw i;if(!(!((s=i.inner)===null||s===void 0)&&s.length)&&i.errors.length)return{errors:[{path:i.path,errors:i.errors}]};const a=i.inner.reduce((c,f)=>{const h=f.path||"";return c[h]||(c[h]={errors:[],path:h}),c[h].errors.push(...f.errors),c},{});return{errors:Object.values(a)}}}}}async function In(r,e){const n=await(Ve(e.rules)?e.rules:Dr(e.rules)).parse(r,{formData:e.formData}),s=[];for(const i of n.errors)i.errors.length&&s.push(...i.errors);return{value:n.value,errors:s}}async function Pn(r,e,t){const n=pn(t.name);if(!n)throw new Error(`No such validator '${t.name}' exists.`);const s=Mn(t.params,r.formData),i={field:r.label||r.name,name:r.name,label:r.label,value:e,form:r.formData,rule:Object.assign(Object.assign({},t),{params:s})},a=await n(e,s,i);return typeof a=="string"?{error:a}:{error:a?void 0:Nr(i)}}function Nr(r){const e=ut().generateMessage;return e?e(r):"Field is invalid"}function Mn(r,e){const t=n=>Zt(n)?n(e):n;return Array.isArray(r)?r.map(t):Object.keys(r).reduce((n,s)=>(n[s]=t(r[s]),n),{})}async function Rn(r,e){const n=await(Ve(r)?r:Dr(r)).parse(G(e),{formData:G(e)}),s={},i={};for(const a of n.errors){const c=a.errors,f=(a.path||"").replace(/\["(\d+)"\]/g,(h,m)=>`[${m}]`);s[f]={valid:!c.length,errors:c},c.length&&(i[f]=c[0])}return{valid:!n.errors.length,results:s,errors:i,values:n.value,source:"schema"}}async function zn(r,e,t){const s=ke(r).map(async h=>{var m,y,O;const w=(m=t?.names)===null||m===void 0?void 0:m[h],D=await Ar(ge(e,h),r[h],{name:w?.name||h,label:w?.label,values:e,bails:(O=(y=t?.bailsMap)===null||y===void 0?void 0:y[h])!==null&&O!==void 0?O:!0});return Object.assign(Object.assign({},D),{path:h})});let i=!0;const a=await Promise.all(s),c={},f={};for(const h of a)c[h.path]={valid:h.valid,errors:h.errors},h.valid||(i=!1,f[h.path]=h.errors[0]);return{valid:i,results:c,errors:f,source:"schema"}}let vr=0;function Un(r,e){const{value:t,initialValue:n,setInitialValue:s}=qn(r,e.modelValue,e.form);if(!e.form){let f=function(w){var D;"value"in w&&(t.value=w.value),"errors"in w&&m(w.errors),"touched"in w&&(O.touched=(D=w.touched)!==null&&D!==void 0?D:O.touched),"initialValue"in w&&s(w.initialValue)};const{errors:h,setErrors:m}=Zn(),y=vr>=Number.MAX_SAFE_INTEGER?0:++vr,O=Ln(t,n,h,e.schema);return{id:y,path:r,value:t,initialValue:n,meta:O,flags:{pendingUnmount:{[y]:!1},pendingReset:!1},errors:h,setState:f}}const i=e.form.createPathState(r,{bails:e.bails,label:e.label,type:e.type,validate:e.validate,schema:e.schema}),a=z(()=>i.errors);function c(f){var h,m,y;"value"in f&&(t.value=f.value),"errors"in f&&((h=e.form)===null||h===void 0||h.setFieldError(p(r),f.errors)),"touched"in f&&((m=e.form)===null||m===void 0||m.setFieldTouched(p(r),(y=f.touched)!==null&&y!==void 0?y:!1)),"initialValue"in f&&s(f.initialValue)}return{id:Array.isArray(i.id)?i.id[i.id.length-1]:i.id,path:r,value:t,errors:a,meta:i,initialValue:n,flags:i.__flags,setState:c}}function qn(r,e,t){const n=se(p(e));function s(){return t?ge(t.initialValues.value,p(r),p(n)):p(n)}function i(h){if(!t){n.value=h;return}t.setFieldInitialValue(p(r),h,!0)}const a=z(s);if(!t)return{value:se(s()),initialValue:a,setInitialValue:i};const c=Bn(e,t,a,r);return t.stageInitialValue(p(r),c,!0),{value:z({get(){return ge(t.values,p(r))},set(h){t.setFieldValue(p(r),h,!1)}}),initialValue:a,setInitialValue:i}}function Bn(r,e,t,n){return et(r)?p(r):r!==void 0?r:ge(e.values,p(n),p(t))}function Ln(r,e,t,n){const s=z(()=>{var a,c,f;return(f=(c=(a=$(n))===null||a===void 0?void 0:a.describe)===null||c===void 0?void 0:c.call(a).required)!==null&&f!==void 0?f:!1}),i=Ot({touched:!1,pending:!1,valid:!0,required:s,validated:!!p(t).length,initialValue:z(()=>p(e)),dirty:z(()=>!de(p(r),p(e)))});return $e(t,a=>{i.valid=!a.length},{immediate:!0,flush:"sync"}),i}function Zn(){const r=se([]);return{errors:r,setErrors:e=>{r.value=Wt(e)}}}function Rt(r,e,t){return Fr(void 0)?Wn(r,e):Ir(r,e)}function Ir(r,e,t){const{initialValue:n,validateOnMount:s,bails:i,type:a,checkedValue:c,label:f,validateOnValueUpdate:h,uncheckedValue:m,controlled:y,keepValueOnUnmount:O,syncVModel:w,form:D}=Hn(),U=y?$r(Jt):void 0,F=D||U,_=z(()=>ot($(r))),I=z(()=>{if($(F?.schema))return;const M=p(e);return St(M)||Ve(M)||pe(M)||Array.isArray(M)?M:jr(M)}),j=!pe(I.value)&&Ve($(e)),{id:k,value:H,initialValue:q,meta:W,setState:Y,errors:oe,flags:Fe}=Un(_,{modelValue:n,form:F,bails:i,label:f,type:a,validate:I.value?xe:void 0,schema:j?e:void 0}),L=z(()=>oe.value[0]);w&&Gn({value:H,prop:w,handleChange:P,shouldValidate:()=>h&&!Fe.pendingReset});const ye=(C,M=!1)=>{W.touched=!0,M&&Ae()};async function Oe(C){var M,K;if(F?.validateSchema){const{results:Z}=await F.validateSchema(C);return(M=Z[$(_)])!==null&&M!==void 0?M:{valid:!0,errors:[]}}return I.value?Ar(H.value,I.value,{name:$(_),label:$(f),values:(K=F?.values)!==null&&K!==void 0?K:{},bails:i}):{valid:!0,errors:[]}}const Ae=Ht(async()=>(W.pending=!0,W.validated=!0,Oe("validated-only")),C=>(Fe.pendingUnmount[ee.id]||(Y({errors:C.errors}),W.pending=!1,W.valid=C.valid),C)),be=Ht(async()=>Oe("silent"),C=>(W.valid=C.valid,C));function xe(C){return C?.mode==="silent"?be():Ae()}function P(C,M=!0){const K=Et(C);Be(K,M)}Yt(()=>{if(s)return Ae();(!F||!F.validateSchema)&&be()});function Ke(C){W.touched=C}function _e(C){var M;const K=C&&"value"in C?C.value:q.value;Y({value:G(K),initialValue:G(K),touched:(M=C?.touched)!==null&&M!==void 0?M:!1,errors:C?.errors||[]}),W.pending=!1,W.validated=!1,be()}const ie=Xt();function Be(C,M=!0){H.value=ie&&w?Sn(C,ie.props.modelModifiers):C,(M?Ae:be)()}function Ye(C){Y({errors:Array.isArray(C)?C:[C]})}const ce=z({get(){return H.value},set(C){Be(C,h)}}),ee={id:k,name:_,label:f,value:ce,meta:W,errors:oe,errorMessage:L,type:a,checkedValue:c,uncheckedValue:m,bails:i,keepValueOnUnmount:O,resetField:_e,handleReset:()=>_e(),validate:xe,handleChange:P,handleBlur:ye,setState:Y,setTouched:Ke,setErrors:Ye,setValue:Be};if(Bt(yn,ee),et(e)&&typeof p(e)!="function"&&$e(e,(C,M)=>{de(C,M)||(W.validated?Ae():be())},{deep:!0}),!F)return ee;const Re=z(()=>{const C=I.value;return!C||pe(C)||St(C)||Ve(C)||Array.isArray(C)?{}:Object.keys(C).reduce((M,K)=>{const Z=Vn(C[K]).map(Ce=>Ce.__locatorRef).reduce((Ce,Se)=>{const fe=ge(F.values,Se)||F.values[Se];return fe!==void 0&&(Ce[Se]=fe),Ce},{});return Object.assign(M,Z),M},{})});return $e(Re,(C,M)=>{if(!Object.keys(C).length)return;!de(C,M)&&(W.validated?Ae():be())}),en(()=>{var C;const M=(C=$(ee.keepValueOnUnmount))!==null&&C!==void 0?C:$(F.keepValuesOnUnmount),K=$(_);if(M||!F||Fe.pendingUnmount[ee.id]){F?.removePathState(K,k);return}Fe.pendingUnmount[ee.id]=!0;const Z=F.getPathState(K);if(Array.isArray(Z?.id)&&Z?.multiple?Z?.id.includes(ee.id):Z?.id===ee.id){if(Z?.multiple&&Array.isArray(Z.value)){const Se=Z.value.findIndex(fe=>de(fe,$(ee.checkedValue)));if(Se>-1){const fe=[...Z.value];fe.splice(Se,1),F.setFieldValue(K,fe)}Array.isArray(Z.id)&&Z.id.splice(Z.id.indexOf(ee.id),1)}else F.unsetPathValue($(_));F.removePathState(K,k)}}),ee}function Hn(r){return Object.assign(Object.assign({},{initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),{initialValue:void 0})}function Wn(r,e,t){const n=$r(Jt),s=void 0,i=void 0;function a(c){const f=c.handleChange,h=z(()=>{const y=$(c.value),O=$(s);return Array.isArray(y)?y.findIndex(w=>de(w,O))>=0:de(O,y)});function m(y,O=!0){var w,D;if(h.value===((w=y?.target)===null||w===void 0?void 0:w.checked)){O&&c.validate();return}const U=$(r),F=n?.getPathState(U),_=Et(y);let I=(D=$(s))!==null&&D!==void 0?D:_;n&&F?.multiple&&F.type==="checkbox"&&(I=On(ge(n.values,U)||[],I,void 0)),f(I,O)}return Object.assign(Object.assign({},c),{checked:h,checkedValue:s,uncheckedValue:i,handleChange:m})}return a(Ir(r,e))}function Gn({prop:r,value:e,handleChange:t,shouldValidate:n}){const s=Xt();if(!s||!r)return;const i=typeof r=="string"?r:"modelValue",a=`update:${i}`;i in s.props&&($e(e,c=>{de(c,pr(s,i))||s.emit(a,c)}),$e(()=>pr(s,i),c=>{if(c===ur&&e.value===void 0)return;const f=c===ur?void 0:c;de(f,e.value)||t(f,n())}))}function pr(r,e){if(r)return r.props[e]}let Kn=0;const yt=["bails","fieldsCount","id","multiple","type","validate"];function Pr(r){const e=r?.initialValues||{},t=Object.assign({},$(e)),n=p(r?.validationSchema);return n&&Ve(n)&&pe(n.cast)?G(n.cast(t)||{}):G(t)}function Yn(r){var e;const t=Kn++,n=r?.name||"Form";let s=0;const i=se(!1),a=se(!1),c=se(0),f=[],h=Ot(Pr(r)),m=se([]),y=se({}),O=se({}),w=En(()=>{O.value=m.value.reduce((d,u)=>(d[ot($(u.path))]=u,d),{})});function D(d,u){const g=P(d);if(!g){typeof d=="string"&&(y.value[ot(d)]=Wt(u));return}if(typeof d=="string"){const x=ot(d);y.value[x]&&delete y.value[x]}g.errors=Wt(u),g.valid=!g.errors.length}function U(d){ke(d).forEach(u=>{D(u,d[u])})}r?.initialErrors&&U(r.initialErrors);const F=z(()=>{const d=m.value.reduce((u,g)=>(g.errors.length&&(u[$(g.path)]=g.errors),u),{});return Object.assign(Object.assign({},y.value),d)}),_=z(()=>ke(F.value).reduce((d,u)=>{const g=F.value[u];return g?.length&&(d[u]=g[0]),d},{})),I=z(()=>m.value.reduce((d,u)=>(d[$(u.path)]={name:$(u.path)||"",label:u.label||""},d),{})),j=z(()=>m.value.reduce((d,u)=>{var g;return d[$(u.path)]=(g=u.bails)!==null&&g!==void 0?g:!0,d},{})),k=Object.assign({},r?.initialErrors||{}),H=(e=r?.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:q,originalInitialValues:W,setInitialValues:Y}=Qn(m,h,r),oe=Xn(m,h,W,_),Fe=z(()=>m.value.reduce((d,u)=>{const g=ge(h,$(u.path));return Me(d,$(u.path),g),d},{})),L=r?.validationSchema;function ye(d,u){var g,x;const T=z(()=>ge(q.value,$(d))),R=O.value[$(d)],V=u?.type==="checkbox"||u?.type==="radio";if(R&&V){R.multiple=!0;const Ee=s++;return Array.isArray(R.id)?R.id.push(Ee):R.id=[R.id,Ee],R.fieldsCount++,R.__flags.pendingUnmount[Ee]=!1,R}const Q=z(()=>ge(h,$(d))),ne=$(d),le=_e.findIndex(Ee=>Ee===ne);le!==-1&&_e.splice(le,1);const X=z(()=>{var Ee,it,Vt,jt;const At=$(L);if(Ve(At))return(it=(Ee=At.describe)===null||Ee===void 0?void 0:Ee.call(At,$(d)).required)!==null&&it!==void 0?it:!1;const Dt=$(u?.schema);return Ve(Dt)&&(jt=(Vt=Dt.describe)===null||Vt===void 0?void 0:Vt.call(Dt).required)!==null&&jt!==void 0?jt:!1}),ae=s++,he=Ot({id:ae,path:d,touched:!1,pending:!1,valid:!0,validated:!!(!((g=k[ne])===null||g===void 0)&&g.length),required:X,initialValue:T,errors:Jr([]),bails:(x=u?.bails)!==null&&x!==void 0?x:!1,label:u?.label,type:u?.type||"default",value:Q,multiple:!1,__flags:{pendingUnmount:{[ae]:!1},pendingReset:!1},fieldsCount:1,validate:u?.validate,dirty:z(()=>!de(p(Q),p(T)))});return m.value.push(he),O.value[ne]=he,w(),_.value[ne]&&!k[ne]&&De(()=>{Te(ne,{mode:"silent"})}),et(d)&&$e(d,Ee=>{w();const it=G(Q.value);O.value[Ee]=he,De(()=>{Me(h,Ee,it)})}),he}const Oe=hr(st,5),Ae=hr(st,5),be=Ht(async d=>await(d==="silent"?Oe():Ae()),(d,[u])=>{const g=ke(M.errorBag.value),T=[...new Set([...ke(d.results),...m.value.map(R=>R.path),...g])].sort().reduce((R,V)=>{var Q;const ne=V,le=P(ne)||Ke(ne),X=((Q=d.results[ne])===null||Q===void 0?void 0:Q.errors)||[],ae=$(le?.path)||ne,he=Jn({errors:X,valid:!X.length},R.results[ae]);return R.results[ae]=he,he.valid||(R.errors[ae]=he.errors[0]),le&&y.value[ae]&&delete y.value[ae],le?(le.valid=he.valid,u==="silent"||u==="validated-only"&&!le.validated||D(le,he.errors),R):(D(ae,X),R)},{valid:d.valid,results:{},errors:{},source:d.source});return d.values&&(T.values=d.values,T.source=d.source),ke(T.results).forEach(R=>{var V;const Q=P(R);Q&&u!=="silent"&&(u==="validated-only"&&!Q.validated||D(Q,(V=T.results[R])===null||V===void 0?void 0:V.errors))}),T});function xe(d){m.value.forEach(d)}function P(d){const u=typeof d=="string"?ot(d):d;return typeof u=="string"?O.value[u]:u}function Ke(d){return m.value.filter(g=>d.startsWith($(g.path))).reduce((g,x)=>g?x.path.length>g.path.length?x:g:x,void 0)}let _e=[],ie;function Be(d){return _e.push(d),ie||(ie=De(()=>{[..._e].sort().reverse().forEach(g=>{fr(h,g)}),_e=[],ie=null})),ie}function Ye(d){return function(g,x){return function(R){return R instanceof Event&&(R.preventDefault(),R.stopPropagation()),xe(V=>V.touched=!0),i.value=!0,c.value++,Le().then(V=>{const Q=G(h);if(V.valid&&typeof g=="function"){const ne=G(Fe.value);let le=d?ne:Q;return V.values&&(le=V.source==="schema"?V.values:Object.assign({},le,V.values)),g(le,{evt:R,controlledValues:ne,setErrors:U,setFieldError:D,setTouched:tt,setFieldTouched:fe,setValues:Ce,setFieldValue:K,resetForm:te,resetField:ht})}!V.valid&&typeof x=="function"&&x({values:Q,evt:R,errors:V.errors,results:V.results})}).then(V=>(i.value=!1,V),V=>{throw i.value=!1,V})}}}const ee=Ye(!1);ee.withControlled=Ye(!0);function Re(d,u){const g=m.value.findIndex(T=>T.path===d&&(Array.isArray(T.id)?T.id.includes(u):T.id===u)),x=m.value[g];if(!(g===-1||!x)){if(De(()=>{Te(d,{mode:"silent",warn:!1})}),x.multiple&&x.fieldsCount&&x.fieldsCount--,Array.isArray(x.id)){const T=x.id.indexOf(u);T>=0&&x.id.splice(T,1),delete x.__flags.pendingUnmount[u]}(!x.multiple||x.fieldsCount<=0)&&(m.value.splice(g,1),rt(d),w(),delete O.value[d])}}function C(d){ke(O.value).forEach(u=>{u.startsWith(d)&&delete O.value[u]}),m.value=m.value.filter(u=>!u.path.startsWith(d)),De(()=>{w()})}const M={name:n,formId:t,values:h,controlledValues:Fe,errorBag:F,errors:_,schema:L,submitCount:c,meta:oe,isSubmitting:i,isValidating:a,fieldArrays:f,keepValuesOnUnmount:H,validateSchema:p(L)?be:void 0,validate:Le,setFieldError:D,validateField:Te,setFieldValue:K,setValues:Ce,setErrors:U,setFieldTouched:fe,setTouched:tt,resetForm:te,resetField:ht,handleSubmit:ee,useFieldModel:b,defineInputBinds:N,defineComponentBinds:J,defineField:l,stageInitialValue:mt,unsetInitialValue:rt,setFieldInitialValue:nt,createPathState:ye,getPathState:P,unsetPathValue:Be,removePathState:Re,initialValues:q,getAllPathStates:()=>m.value,destroyPath:C,isFieldTouched:$t,isFieldDirty:ct,isFieldValid:ft};function K(d,u,g=!0){const x=G(u),T=typeof d=="string"?d:d.path;P(T)||ye(T),Me(h,T,x),g&&Te(T)}function Z(d,u=!0){ke(h).forEach(g=>{delete h[g]}),ke(d).forEach(g=>{K(g,d[g],!1)}),u&&Le()}function Ce(d,u=!0){dt(h,d),f.forEach(g=>g&&g.reset()),u&&Le()}function Se(d,u){const g=P($(d))||ye(d);return z({get(){return g.value},set(x){var T;const R=$(d);K(R,x,(T=$(u))!==null&&T!==void 0?T:!1)}})}function fe(d,u){const g=P(d);g&&(g.touched=u)}function $t(d){const u=P(d);return u?u.touched:m.value.filter(g=>g.path.startsWith(d)).some(g=>g.touched)}function ct(d){const u=P(d);return u?u.dirty:m.value.filter(g=>g.path.startsWith(d)).some(g=>g.dirty)}function ft(d){const u=P(d);return u?u.valid:m.value.filter(g=>g.path.startsWith(d)).every(g=>g.valid)}function tt(d){if(typeof d=="boolean"){xe(u=>{u.touched=d});return}ke(d).forEach(u=>{fe(u,!!d[u])})}function ht(d,u){var g;const x=u&&"value"in u?u.value:ge(q.value,d),T=P(d);T&&(T.__flags.pendingReset=!0),nt(d,G(x),!0),K(d,x,!1),fe(d,(g=u?.touched)!==null&&g!==void 0?g:!1),D(d,u?.errors||[]),De(()=>{T&&(T.__flags.pendingReset=!1)})}function te(d,u){let g=G(d?.values?d.values:W.value);g=u?.force?g:dt(W.value,g),g=Ve(L)&&pe(L.cast)?L.cast(g):g,Y(g,{force:u?.force}),xe(x=>{var T;x.__flags.pendingReset=!0,x.validated=!1,x.touched=((T=d?.touched)===null||T===void 0?void 0:T[$(x.path)])||!1,K($(x.path),ge(g,$(x.path)),!1),D($(x.path),void 0)}),u?.force?Z(g,!1):Ce(g,!1),U(d?.errors||{}),c.value=d?.submitCount||0,De(()=>{Le({mode:"silent"}),xe(x=>{x.__flags.pendingReset=!1})})}async function Le(d){const u=d?.mode||"force";if(u==="force"&&xe(V=>V.validated=!0),M.validateSchema)return M.validateSchema(u);a.value=!0;const g=await Promise.all(m.value.map(V=>V.validate?V.validate(d).then(Q=>({key:$(V.path),valid:Q.valid,errors:Q.errors,value:Q.value})):Promise.resolve({key:$(V.path),valid:!0,errors:[],value:void 0})));a.value=!1;const x={},T={},R={};for(const V of g)x[V.key]={valid:V.valid,errors:V.errors},V.value&&Me(R,V.key,V.value),V.errors.length&&(T[V.key]=V.errors[0]);return{valid:g.every(V=>V.valid),results:x,errors:T,values:R,source:"fields"}}async function Te(d,u){var g;const x=P(d);if(x&&u?.mode!=="silent"&&(x.validated=!0),L){const{results:T}=await be(u?.mode||"validated-only");return T[d]||{errors:[],valid:!0}}return x?.validate?x.validate(u):(!x&&(g=u?.warn),Promise.resolve({errors:[],valid:!0}))}function rt(d){fr(q.value,d)}function mt(d,u,g=!1){nt(d,u),Me(h,d,u),g&&!r?.initialValues&&Me(W.value,d,G(u))}function nt(d,u,g=!1){Me(q.value,d,G(u)),g&&Me(W.value,d,G(u))}async function st(){const d=p(L);if(!d)return{valid:!0,results:{},errors:{},source:"none"};a.value=!0;const u=St(d)||Ve(d)?await Rn(d,h):await zn(d,h,{names:I.value,bailsMap:j.value});return a.value=!1,u}const v=ee((d,{evt:u})=>{kn(u)&&u.target.submit()});Yt(()=>{r?.initialErrors&&U(r.initialErrors),r?.initialTouched&&tt(r.initialTouched),M.validateSchema&&M.validateSchema("silent")}),et(L)&&$e(L,()=>{var d;(d=M.validateSchema)===null||d===void 0||d.call(M,"validated-only")}),Bt(Jt,M);function l(d,u){const g=pe(u)?void 0:u?.label,x=P($(d))||ye(d,{label:g}),T=()=>pe(u)?u(gt(x,yt)):u||{};function R(){var X;x.touched=!0,((X=T().validateOnBlur)!==null&&X!==void 0?X:ut().validateOnBlur)&&Te($(x.path))}function V(){var X;((X=T().validateOnInput)!==null&&X!==void 0?X:ut().validateOnInput)&&De(()=>{Te($(x.path))})}function Q(){var X;((X=T().validateOnChange)!==null&&X!==void 0?X:ut().validateOnChange)&&De(()=>{Te($(x.path))})}const ne=z(()=>{const X={onChange:Q,onInput:V,onBlur:R};return pe(u)?Object.assign(Object.assign({},X),u(gt(x,yt)).props||{}):u?.props?Object.assign(Object.assign({},X),u.props(gt(x,yt))):X});return[Se(d,()=>{var X,ae,he;return(he=(X=T().validateOnModelUpdate)!==null&&X!==void 0?X:(ae=ut())===null||ae===void 0?void 0:ae.validateOnModelUpdate)!==null&&he!==void 0?he:!0}),ne]}function b(d){return Array.isArray(d)?d.map(u=>Se(u,!0)):Se(d)}function N(d,u){const[g,x]=l(d,u);function T(){x.value.onBlur()}function R(Q){const ne=Et(Q);K($(d),ne,!1),x.value.onInput()}function V(Q){const ne=Et(Q);K($(d),ne,!1),x.value.onChange()}return z(()=>Object.assign(Object.assign({},x.value),{onBlur:T,onInput:R,onChange:V,value:g.value}))}function J(d,u){const[g,x]=l(d,u),T=P($(d));function R(V){g.value=V}return z(()=>{const V=pe(u)?u(gt(T,yt)):u||{};return Object.assign({[V.model||"modelValue"]:g.value,[`onUpdate:${V.model||"modelValue"}`]:R},x.value)})}const we=Object.assign(Object.assign({},M),{values:Xr(h),handleReset:()=>te(),submitForm:v});return Bt(gn,we),we}function Xn(r,e,t,n){const s={touched:"some",pending:"some",valid:"every"},i=z(()=>!de(e,p(t)));function a(){const f=r.value;return ke(s).reduce((h,m)=>{const y=s[m];return h[m]=f[y](O=>O[m]),h},{})}const c=Ot(a());return Qr(()=>{const f=a();c.touched=f.touched,c.valid=f.valid,c.pending=f.pending}),z(()=>Object.assign(Object.assign({initialValues:p(t)},c),{valid:c.valid&&!ke(n.value).length,dirty:i.value}))}function Qn(r,e,t){const n=Pr(t),s=se(n),i=se(G(n));function a(c,f){f?.force?(s.value=G(c),i.value=G(c)):(s.value=dt(G(s.value)||{},G(c)),i.value=dt(G(i.value)||{},G(c))),f?.updateFields&&r.value.forEach(h=>{if(h.touched)return;const y=ge(s.value,$(h.path));Me(e,$(h.path),G(y))})}return{initialValues:s,originalInitialValues:i,setInitialValues:a}}function Jn(r,e){return e?{valid:r.valid&&e.valid,errors:[...r.errors,...e.errors]}:r}var zt,gr;function es(){if(gr)return zt;gr=1;function r(_){this._maxSize=_,this.clear()}r.prototype.clear=function(){this._size=0,this._values=Object.create(null)},r.prototype.get=function(_){return this._values[_]},r.prototype.set=function(_,I){return this._size>=this._maxSize&&this.clear(),_ in this._values||this._size++,this._values[_]=I};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,t=/^\d+$/,n=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,a=512,c=new r(a),f=new r(a),h=new r(a);zt={Cache:r,split:y,normalizePath:m,setter:function(_){var I=m(_);return f.get(_)||f.set(_,function(k,H){for(var q=0,W=I.length,Y=k;q<W-1;){var oe=I[q];if(oe==="__proto__"||oe==="constructor"||oe==="prototype")return k;Y=Y[I[q++]]}Y[I[q]]=H})},getter:function(_,I){var j=m(_);return h.get(_)||h.set(_,function(H){for(var q=0,W=j.length;q<W;)if(H!=null||!I)H=H[j[q++]];else return;return H})},join:function(_){return _.reduce(function(I,j){return I+(w(j)||t.test(j)?"["+j+"]":(I?".":"")+j)},"")},forEach:function(_,I,j){O(Array.isArray(_)?_:y(_),I,j)}};function m(_){return c.get(_)||c.set(_,y(_).map(function(I){return I.replace(i,"$2")}))}function y(_){return _.match(e)||[""]}function O(_,I,j){var k=_.length,H,q,W,Y;for(q=0;q<k;q++)H=_[q],H&&(F(H)&&(H='"'+H+'"'),Y=w(H),W=!Y&&/^\d+$/.test(H),I.call(j,H,Y,W,q,_))}function w(_){return typeof _=="string"&&_&&["'",'"'].indexOf(_.charAt(0))!==-1}function D(_){return _.match(n)&&!_.match(t)}function U(_){return s.test(_)}function F(_){return!w(_)&&(D(_)||U(_))}return zt}var He=es(),Ut,yr;function ts(){if(yr)return Ut;yr=1;const r=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=m=>m.match(r)||[],t=m=>m[0].toUpperCase()+m.slice(1),n=(m,y)=>e(m).join(y).toLowerCase(),s=m=>e(m).reduce((y,O)=>`${y}${y?O[0].toUpperCase()+O.slice(1).toLowerCase():O.toLowerCase()}`,"");return Ut={words:e,upperFirst:t,camelCase:s,pascalCase:m=>t(s(m)),snakeCase:m=>n(m,"_"),kebabCase:m=>n(m,"-"),sentenceCase:m=>t(n(m," ")),titleCase:m=>e(m).map(t).join(" ")},Ut}var qt=ts(),bt={exports:{}},br;function rs(){if(br)return bt.exports;br=1,bt.exports=function(s){return r(e(s),s)},bt.exports.array=r;function r(s,i){var a=s.length,c=new Array(a),f={},h=a,m=t(i),y=n(s);for(i.forEach(function(w){if(!y.has(w[0])||!y.has(w[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});h--;)f[h]||O(s[h],h,new Set);return c;function O(w,D,U){if(U.has(w)){var F;try{F=", node was:"+JSON.stringify(w)}catch{F=""}throw new Error("Cyclic dependency"+F)}if(!y.has(w))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(w));if(!f[D]){f[D]=!0;var _=m.get(w)||new Set;if(_=Array.from(_),D=_.length){U.add(w);do{var I=_[--D];O(I,y.get(I),U)}while(D);U.delete(w)}c[--a]=w}}}function e(s){for(var i=new Set,a=0,c=s.length;a<c;a++){var f=s[a];i.add(f[0]),i.add(f[1])}return Array.from(i)}function t(s){for(var i=new Map,a=0,c=s.length;a<c;a++){var f=s[a];i.has(f[0])||i.set(f[0],new Set),i.has(f[1])||i.set(f[1],new Set),i.get(f[0]).add(f[1])}return i}function n(s){for(var i=new Map,a=0,c=s.length;a<c;a++)i.set(s[a],a);return i}return bt.exports}var ns=rs();const ss=rn(ns),is=Object.prototype.toString,ls=Error.prototype.toString,as=RegExp.prototype.toString,os=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",us=/^Symbol\((.*)\)(.*)$/;function ds(r){return r!=+r?"NaN":r===0&&1/r<0?"-0":""+r}function xr(r,e=!1){if(r==null||r===!0||r===!1)return""+r;const t=typeof r;if(t==="number")return ds(r);if(t==="string")return e?`"${r}"`:r;if(t==="function")return"[Function "+(r.name||"anonymous")+"]";if(t==="symbol")return os.call(r).replace(us,"Symbol($1)");const n=is.call(r).slice(8,-1);return n==="Date"?isNaN(r.getTime())?""+r:r.toISOString(r):n==="Error"||r instanceof Error?"["+ls.call(r)+"]":n==="RegExp"?as.call(r):null}function qe(r,e){let t=xr(r,e);return t!==null?t:JSON.stringify(r,function(n,s){let i=xr(this[n],e);return i!==null?i:s},2)}function Mr(r){return r==null?[]:[].concat(r)}let Rr,zr,Ur,cs=/\$\{\s*(\w+)\s*\}/g;Rr=Symbol.toStringTag;class _r{constructor(e,t,n,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Rr]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=s,this.errors=[],this.inner=[],Mr(e).forEach(i=>{if(ue.isError(i)){this.errors.push(...i.errors);const a=i.inner.length?i.inner:[i];this.inner.push(...a)}else this.errors.push(i)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}zr=Symbol.hasInstance;Ur=Symbol.toStringTag;class ue extends Error{static formatError(e,t){const n=t.label||t.path||"this";return t=Object.assign({},t,{path:n,originalPath:t.path}),typeof e=="string"?e.replace(cs,(s,i)=>qe(t[i])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,n,s,i){const a=new _r(e,t,n,s);if(i)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Ur]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,ue)}static[zr](e){return _r[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Ne={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:r,type:e,value:t,originalValue:n})=>{const s=n!=null&&n!==t?` (cast from the value \`${qe(n,!0)}\`).`:".";return e!=="mixed"?`${r} must be a \`${e}\` type, but the final value was: \`${qe(t,!0)}\``+s:`${r} must match the configured type. The validated value was: \`${qe(t,!0)}\``+s}},ve={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},fs={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Gt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},hs={isValue:"${path} field must be ${value}"},_t={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},ms={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},vs={notType:r=>{const{path:e,value:t,spec:n}=r,s=n.types.length;if(Array.isArray(t)){if(t.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${t.length} for value: \`${qe(t,!0)}\``;if(t.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${t.length} for value: \`${qe(t,!0)}\``}return ue.formatError(Ne.notType,r)}};Object.assign(Object.create(null),{mixed:Ne,string:ve,number:fs,date:Gt,object:_t,array:ms,boolean:hs,tuple:vs});const tr=r=>r&&r.__isYupSchema__;class Ft{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:s,otherwise:i}=t,a=typeof n=="function"?n:(...c)=>c.every(f=>f===n);return new Ft(e,(c,f)=>{var h;let m=a(...c)?s:i;return(h=m?.(f))!=null?h:f})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map(i=>i.getValue(t?.value,t?.parent,t?.context)),s=this.fn(n,e,t);if(s===void 0||s===e)return e;if(!tr(s))throw new TypeError("conditions must return a schema object");return s.resolve(t)}}const xt={context:"$",value:"."};class Ge{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===xt.context,this.isValue=this.key[0]===xt.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?xt.context:this.isValue?xt.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&He.getter(this.path,!0),this.map=t.map}getValue(e,t,n){let s=this.isContext?n:this.isValue?e:t;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,t){return this.getValue(e,t?.parent,t?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Ge.prototype.__isYupRef=!0;const Ze=r=>r==null;function Qe(r){function e({value:t,path:n="",options:s,originalValue:i,schema:a},c,f){const{name:h,test:m,params:y,message:O,skipAbsent:w}=r;let{parent:D,context:U,abortEarly:F=a.spec.abortEarly,disableStackTrace:_=a.spec.disableStackTrace}=s;const I={value:t,parent:D,context:U};function j(L={}){const ye=qr(Object.assign({value:t,originalValue:i,label:a.spec.label,path:L.path||n,spec:a.spec,disableStackTrace:L.disableStackTrace||_},y,L.params),I),Oe=new ue(ue.formatError(L.message||O,ye),t,ye.path,L.type||h,ye.disableStackTrace);return Oe.params=ye,Oe}const k=F?c:f;let H={path:n,parent:D,type:h,from:s.from,createError:j,resolve(L){return Br(L,I)},options:s,originalValue:i,schema:a};const q=L=>{ue.isError(L)?k(L):L?f(null):k(j())},W=L=>{ue.isError(L)?k(L):c(L)};if(w&&Ze(t))return q(!0);let oe;try{var Fe;if(oe=m.call(H,t,H),typeof((Fe=oe)==null?void 0:Fe.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${H.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(oe).then(q,W)}}catch(L){W(L);return}q(oe)}return e.OPTIONS=r,e}function qr(r,e){if(!r)return r;for(const t of Object.keys(r))r[t]=Br(r[t],e);return r}function Br(r,e){return Ge.isRef(r)?r.getValue(e.value,e.parent,e.context):r}function ps(r,e,t,n=t){let s,i,a;return e?(He.forEach(e,(c,f,h)=>{let m=f?c.slice(1,c.length-1):c;r=r.resolve({context:n,parent:s,value:t});let y=r.type==="tuple",O=h?parseInt(m,10):0;if(r.innerType||y){if(y&&!h)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(t&&O>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${c}, in the path: ${e}. because there is no value at that index. `);s=t,t=t&&t[O],r=y?r.spec.types[O]:r.innerType}if(!h){if(!r.fields||!r.fields[m])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${r.type}")`);s=t,t=t&&t[m],r=r.fields[m]}i=m,a=f?"["+c+"]":"."+c}),{schema:r,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:r}}class Ct extends Set{describe(){const e=[];for(const t of this.values())e.push(Ge.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new Ct(this.values())}merge(e,t){const n=this.clone();return e.forEach(s=>n.add(s)),t.forEach(s=>n.delete(s)),n}}function Je(r,e=new Map){if(tr(r)||!r||typeof r!="object")return r;if(e.has(r))return e.get(r);let t;if(r instanceof Date)t=new Date(r.getTime()),e.set(r,t);else if(r instanceof RegExp)t=new RegExp(r),e.set(r,t);else if(Array.isArray(r)){t=new Array(r.length),e.set(r,t);for(let n=0;n<r.length;n++)t[n]=Je(r[n],e)}else if(r instanceof Map){t=new Map,e.set(r,t);for(const[n,s]of r.entries())t.set(n,Je(s,e))}else if(r instanceof Set){t=new Set,e.set(r,t);for(const n of r)t.add(Je(n,e))}else if(r instanceof Object){t={},e.set(r,t);for(const[n,s]of Object.entries(r))t[n]=Je(s,e)}else throw Error(`Unable to clone ${r}`);return t}function gs(r){if(!(r!=null&&r.length))return;const e=[];let t="",n=!1,s=!1;for(let i=0;i<r.length;i++){const a=r[i];if(a==="["&&!s){t&&(e.push(...t.split(".").filter(Boolean)),t=""),n=!0;continue}if(a==="]"&&!s){t&&(/^\d+$/.test(t)?e.push(t):e.push(t.replace(/^"|"$/g,"")),t=""),n=!1;continue}if(a==='"'){s=!s;continue}if(a==="."&&!n&&!s){t&&(e.push(t),t="");continue}t+=a}return t&&e.push(...t.split(".").filter(Boolean)),e}function ys(r,e){const t=e?`${e}.${r.path}`:r.path;return r.errors.map(n=>({message:n,path:gs(t)}))}function Lr(r,e){var t;if(!((t=r.inner)!=null&&t.length)&&r.errors.length)return ys(r,e);const n=e?`${e}.${r.path}`:r.path;return r.inner.flatMap(s=>Lr(s,n))}class je{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Ct,this._blacklist=new Ct,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Ne.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Je(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const s=Object.assign({},t.spec,n.spec);return n.spec=s,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation(i=>{e.tests.forEach(a=>{i.test(a.OPTIONS)})}),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce((s,i)=>i.resolve(s,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,s,i;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(n=e.abortEarly)!=null?n:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,t={}){let n=this.resolve(Object.assign({},t,{value:e})),s=t.assert==="ignore-optionality",i=n._cast(e,t);if(t.assert!==!1&&!n.isType(i)){if(s&&Ze(i))return i;let a=qe(e),c=qe(i);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${a} 
`+(c!==a?`result of cast: ${c}`:""))}return i}_cast(e,t){let n=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this,t),e);return n===void 0&&(n=this.getDefault(t)),n}_validate(e,t={},n,s){let{path:i,originalValue:a=e,strict:c=this.spec.strict}=t,f=e;c||(f=this._cast(f,Object.assign({assert:!1},t)));let h=[];for(let m of Object.values(this.internalTests))m&&h.push(m);this.runTests({path:i,value:f,originalValue:a,options:t,tests:h},n,m=>{if(m.length)return s(m,f);this.runTests({path:i,value:f,originalValue:a,options:t,tests:this.tests},n,s)})}runTests(e,t,n){let s=!1,{tests:i,value:a,originalValue:c,path:f,options:h}=e,m=U=>{s||(s=!0,t(U,a))},y=U=>{s||(s=!0,n(U,a))},O=i.length,w=[];if(!O)return y([]);let D={value:a,originalValue:c,path:f,options:h,schema:this};for(let U=0;U<i.length;U++){const F=i[U];F(D,m,function(I){I&&(Array.isArray(I)?w.push(...I):w.push(I)),--O<=0&&y(w)})}}asNestedTest({key:e,index:t,parent:n,parentPath:s,originalParent:i,options:a}){const c=e??t;if(c==null)throw TypeError("Must include `key` or `index` for nested validations");const f=typeof c=="number";let h=n[c];const m=Object.assign({},a,{strict:!0,parent:n,value:h,originalValue:i[c],key:void 0,[f?"index":"key"]:c,path:f||c.includes(".")?`${s||""}[${f?c:`"${c}"`}]`:(s?`${s}.`:"")+e});return(y,O,w)=>this.resolve(m)._validate(h,m,O,w)}validate(e,t){var n;let s=this.resolve(Object.assign({},t,{value:e})),i=(n=t?.disableStackTrace)!=null?n:s.spec.disableStackTrace;return new Promise((a,c)=>s._validate(e,t,(f,h)=>{ue.isError(f)&&(f.value=h),c(f)},(f,h)=>{f.length?c(new ue(f,h,void 0,void 0,i)):a(h)}))}validateSync(e,t){var n;let s=this.resolve(Object.assign({},t,{value:e})),i,a=(n=t?.disableStackTrace)!=null?n:s.spec.disableStackTrace;return s._validate(e,Object.assign({},t,{sync:!0}),(c,f)=>{throw ue.isError(c)&&(c.value=f),c},(c,f)=>{if(c.length)throw new ue(c,e,void 0,void 0,a);i=f}),i}isValid(e,t){return this.validate(e,t).then(()=>!0,n=>{if(ue.isError(n))return!1;throw n})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(ue.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):Je(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=Qe({message:t,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=Qe({message:t,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(e=Ne.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Ne.notNull){return this.nullability(!1,e)}required(e=Ne.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=Ne.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),s=Qe(t),i=t.exclusive||t.name&&n.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===t.name&&(i||a.OPTIONS.test===s.OPTIONS.test))),n.tests.push(s),n}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let n=this.clone(),s=Mr(e).map(i=>new Ge(i));return s.forEach(i=>{i.isSibling&&n.deps.push(i.key)}),n.conditions.push(typeof t=="function"?new Ft(s,t):Ft.fromOptions(s,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=Qe({message:e,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Ne.oneOf){let n=this.clone();return e.forEach(s=>{n._whitelist.add(s),n._blacklist.delete(s)}),n.internalTests.whiteList=Qe({message:t,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,a=i.resolveAll(this.resolve);return a.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:a}})}}),n}notOneOf(e,t=Ne.notOneOf){let n=this.clone();return e.forEach(s=>{n._blacklist.add(s),n._whitelist.delete(s)}),n.internalTests.blacklist=Qe({message:t,name:"notOneOf",test(s){let i=this.schema._blacklist,a=i.resolveAll(this.resolve);return a.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:a}}):!0}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:s,optional:i,nullable:a}=t.spec;return{meta:s,label:n,optional:i,nullable:a,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((f,h,m)=>m.findIndex(y=>y.OPTIONS.name===f.OPTIONS.name)===h).map(f=>{const h=f.OPTIONS.params&&e?qr(Object.assign({},f.OPTIONS.params),e):f.OPTIONS.params;return{name:f.OPTIONS.name,params:h}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(n){try{return{value:await e.validate(n,{abortEarly:!1})}}catch(s){if(s instanceof ue)return{issues:Lr(s)};throw s}}}}}je.prototype.__isYupSchema__=!0;for(const r of["validate","validateSync"])je.prototype[`${r}At`]=function(e,t,n={}){const{parent:s,parentPath:i,schema:a}=ps(this,e,t,n.context);return a[r](s&&s[i],Object.assign({},n,{parent:s,path:e}))};for(const r of["equals","is"])je.prototype[r]=je.prototype.oneOf;for(const r of["not","nope"])je.prototype[r]=je.prototype.notOneOf;const bs=()=>!0;function Zr(r){return new Hr(r)}class Hr extends je{constructor(e){super(typeof e=="function"?{type:"mixed",check:e}:Object.assign({type:"mixed",check:bs},e))}}Zr.prototype=Hr.prototype;const xs=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function _s(r){const e=Kt(r);if(!e)return Date.parse?Date.parse(r):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function Kt(r){var e,t;const n=xs.exec(r);return n?{year:Pe(n[1]),month:Pe(n[2],1)-1,day:Pe(n[3],1),hour:Pe(n[4]),minute:Pe(n[5]),second:Pe(n[6]),millisecond:n[7]?Pe(n[7].substring(0,3)):0,precision:(e=(t=n[7])==null?void 0:t.length)!=null?e:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Pe(n[10]),minuteOffset:Pe(n[11])}:null}function Pe(r,e=0){return Number(r)||e}let ws=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ks=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Os=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ss="^\\d{4}-\\d{2}-\\d{2}",Es="\\d{2}:\\d{2}:\\d{2}",Fs="(([+-]\\d{2}(:?\\d{2})?)|Z)",Cs=new RegExp(`${Ss}T${Es}(\\.\\d+)?${Fs}$`),Ts=r=>Ze(r)||r===r.trim(),$s={}.toString();function wt(){return new Wr}class Wr extends je{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce||this.isType(e)||Array.isArray(e))return e;const n=e!=null&&e.toString?e.toString():e;return n===$s?e:n})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Ne.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=ve.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(n){return n.length===this.resolve(e)}})}min(e,t=ve.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(n){return n.length>=this.resolve(e)}})}max(e,t=ve.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(n){return n.length<=this.resolve(e)}})}matches(e,t){let n=!1,s,i;return t&&(typeof t=="object"?{excludeEmptyString:n=!1,message:s,name:i}=t:s=t),this.test({name:i||"matches",message:s||ve.matches,params:{regex:e},skipAbsent:!0,test:a=>a===""&&n||a.search(e)!==-1})}email(e=ve.email){return this.matches(ws,{name:"email",message:e,excludeEmptyString:!0})}url(e=ve.url){return this.matches(ks,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=ve.uuid){return this.matches(Os,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",n,s;return e&&(typeof e=="object"?{message:t="",allowOffset:n=!1,precision:s=void 0}=e:t=e),this.matches(Cs,{name:"datetime",message:t||ve.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||ve.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:i=>{if(!i||n)return!0;const a=Kt(i);return a?!!a.z:!1}}).test({name:"datetime_precision",message:t||ve.datetime_precision,params:{precision:s},skipAbsent:!0,test:i=>{if(!i||s==null)return!0;const a=Kt(i);return a?a.precision===s:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=ve.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:Ts})}lowercase(e=ve.lowercase){return this.transform(t=>Ze(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Ze(t)||t===t.toLowerCase()})}uppercase(e=ve.uppercase){return this.transform(t=>Ze(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Ze(t)||t===t.toUpperCase()})}}wt.prototype=Wr.prototype;let Vs=new Date(""),js=r=>Object.prototype.toString.call(r)==="[object Date]";class rr extends je{constructor(){super({type:"date",check(e){return js(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t)=>!this.spec.coerce||this.isType(e)||e===null?e:(e=_s(e),isNaN(e)?rr.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let n;if(Ge.isRef(e))n=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=s}return n}min(e,t=Gt.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(n)}})}max(e,t=Gt.max){let n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(n)}})}}rr.INVALID_DATE=Vs;function As(r,e=[]){let t=[],n=new Set,s=new Set(e.map(([a,c])=>`${a}-${c}`));function i(a,c){let f=He.split(a)[0];n.add(f),s.has(`${c}-${f}`)||t.push([c,f])}for(const a of Object.keys(r)){let c=r[a];n.add(a),Ge.isRef(c)&&c.isSibling?i(c.path,a):tr(c)&&"deps"in c&&c.deps.forEach(f=>i(f,a))}return ss.array(Array.from(n),t).reverse()}function wr(r,e){let t=1/0;return r.some((n,s)=>{var i;if((i=e.path)!=null&&i.includes(n))return t=s,!0}),t}function Gr(r){return(e,t)=>wr(r,e)-wr(r,t)}const Ds=(r,e,t)=>{if(typeof r!="string")return r;let n=r;try{n=JSON.parse(r)}catch{}return t.isType(n)?n:r};function kt(r){if("fields"in r){const e={};for(const[t,n]of Object.entries(r.fields))e[t]=kt(n);return r.setFields(e)}if(r.type==="array"){const e=r.optional();return e.innerType&&(e.innerType=kt(e.innerType)),e}return r.type==="tuple"?r.optional().clone({types:r.spec.types.map(kt)}):"optional"in r?r.optional():r}const Ns=(r,e)=>{const t=[...He.normalizePath(e)];if(t.length===1)return t[0]in r;let n=t.pop(),s=He.getter(He.join(t),!0)(r);return!!(s&&n in s)};let kr=r=>Object.prototype.toString.call(r)==="[object Object]";function Or(r,e){let t=Object.keys(r.fields);return Object.keys(e).filter(n=>t.indexOf(n)===-1)}const Is=Gr([]);function Kr(r){return new Yr(r)}class Yr extends je{constructor(e){super({type:"object",check(t){return kr(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=Is,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var n;let s=super._cast(e,t);if(s===void 0)return this.getDefault(t);if(!this._typeCheck(s))return s;let i=this.fields,a=(n=t.stripUnknown)!=null?n:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(s).filter(y=>!this._nodes.includes(y))),f={},h=Object.assign({},t,{parent:f,__validating:t.__validating||!1}),m=!1;for(const y of c){let O=i[y],w=y in s,D=s[y];if(O){let U;h.path=(t.path?`${t.path}.`:"")+y,O=O.resolve({value:D,context:t.context,parent:f});let F=O instanceof je?O.spec:void 0,_=F?.strict;if(F!=null&&F.strip){m=m||y in s;continue}U=!t.__validating||!_?O.cast(D,h):D,U!==void 0&&(f[y]=U)}else w&&!a&&(f[y]=D);(w!==y in f||f[y]!==D)&&(m=!0)}return m?f:s}_validate(e,t={},n,s){let{from:i=[],originalValue:a=e,recursive:c=this.spec.recursive}=t;t.from=[{schema:this,value:a},...i],t.__validating=!0,t.originalValue=a,super._validate(e,t,n,(f,h)=>{if(!c||!kr(h)){s(f,h);return}a=a||h;let m=[];for(let y of this._nodes){let O=this.fields[y];!O||Ge.isRef(O)||m.push(O.asNestedTest({options:t,key:y,parent:h,parentPath:t.path,originalParent:a}))}this.runTests({tests:m,value:h,originalValue:a,options:t},n,y=>{s(y.sort(this._sortErrors).concat(f),h)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[s,i]of Object.entries(this.fields)){const a=n[s];n[s]=a===void 0?i:a}return t.withMutation(s=>s.setFields(n,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(n=>{var s;const i=this.fields[n];let a=e;(s=a)!=null&&s.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),t[n]=i&&"getDefault"in i?i.getDefault(a):void 0}),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=As(e,t),n._sortErrors=Gr(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e,t=[]){return this.clone().withMutation(n=>{let s=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),s=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),s)})}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return kt(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter(([n,s])=>e.includes(n)&&e.includes(s)))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let s=He.getter(e,!0);return this.transform(i=>{if(!i)return i;let a=i;return Ns(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=s(i)),a})}json(){return this.transform(Ds)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||_t.exact,test(t){if(t==null)return!0;const n=Or(this.schema,t);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=_t.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(s){if(s==null)return!0;const i=Or(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=_t.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const n={};for(const s of Object.keys(t))n[e(s)]=t[s];return n})}camelCase(){return this.transformKeys(qt.camelCase)}snakeCase(){return this.transformKeys(qt.snakeCase)}constantCase(){return this.transformKeys(e=>qt.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,a]of Object.entries(t.fields)){var s;let c=e;(s=c)!=null&&s.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[i]})),n.fields[i]=a.describe(c)}return n}}Kr.prototype=Yr.prototype;const Ps={key:0,class:"absolute top-1 left-1 z-10"},Ms={class:"w-5 h-5 bg-secondary rounded-full flex items-center justify-center"},Rs={class:"text-center mb-1"},zs={class:"flex justify-center mb-1"},Us={class:"text-center"},qs={class:"text-xs text-gray-600 mb-0.5"},Bs={class:"absolute top-1 right-1"},Ls={key:1,class:"mt-1 pt-1 border-t text-center"},Zs={class:"text-[10px] text-gray-500"},Hs={__name:"RoomCard",props:{room:{type:Object,required:!0},selected:{type:Boolean,default:!1}},emits:["select"],setup(r,{emit:e}){const t=r,n=e,s=z(()=>({available:"Trống",active:"Đang ở"})[t.room.status]||"Trống"),i=z(()=>{const h=t.room.status,m={available:{text:"text-primary",icon:"text-primary",badge:"bg-primary-100 text-primary-700"},active:{text:"text-red-600",icon:"text-red-400",badge:"bg-red-100 text-red-700"}};return m[h]||m.available}),a=z(()=>t.room.status==="available"?t.selected?"border-secondary bg-secondary-50 shadow-lg ring-2 ring-secondary-200 ring-offset-2":"border-primary bg-primary-50 hover:bg-primary-100 hover:shadow-lg":t.room.status==="active"?"border-red-300 bg-red-50 cursor-not-allowed opacity-80":"border-primary bg-primary-50 hover:bg-primary-100 hover:shadow-lg"),c=h=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(h),f=()=>{t.room.status==="available"&&n("select",t.room)};return(h,m)=>(S(),E("div",{class:Ue(["relative p-2.5 rounded-lg border-2 transition-all cursor-pointer",a.value]),onClick:f},[r.selected?(S(),E("div",Ps,[o("div",Ms,[re(p(Lt),{class:"w-3 h-3 text-white","stroke-width":"3"})])])):B("",!0),o("div",Rs,[o("p",{class:Ue(["text-base font-bold",i.value.text])},A(r.room.roomNumber),3)]),o("div",zs,[re(p(Sr),{class:Ue(["w-8 h-8",i.value.icon])},null,8,["class"])]),o("div",Us,[o("p",qs,A(r.room.area)+"m²",1),o("p",{class:Ue(["text-xs font-semibold",i.value.text])},A(c(r.room.pricePerDay||r.room.price))+"/ngày ",3)]),o("div",Bs,[o("span",{class:Ue(["badge text-[10px] px-1.5 py-0.5",i.value.badge])},A(s.value),3)]),r.room.status==="active"?(S(),E("div",Ls,[o("p",Zs,A(r.room.tenant||"N/A"),1)])):B("",!0)],2))}},Ws={class:"booking-room bg-light min-h-screen py-12"},Gs={class:"container mx-auto px-4"},Ks={class:"mb-8"},Ys={class:"text-gray-600"},Xs={key:0,class:"text-center py-20"},Qs={class:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto"},Js={class:"text-red-600 mb-4"},ei={key:1,class:"grid lg:grid-cols-3 gap-8"},ti={class:"lg:col-span-2"},ri={class:"card p-6 max-h-[calc(100vh-8rem)] flex flex-col"},ni={class:"flex items-center justify-between mb-6 flex-shrink-0"},si={class:"flex items-center space-x-4"},ii={key:0,class:"flex items-center space-x-2 text-primary"},li={key:1,class:"flex items-center space-x-4"},ai={class:"flex items-center space-x-2"},oi={class:"w-4 h-4 bg-secondary-50 border-2 border-secondary rounded relative"},ui={class:"space-y-6 overflow-y-auto flex-1 pr-2 relative"},di={key:0,class:"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg pointer-events-none"},ci={class:"text-xl font-bold text-secondary mb-4 flex items-center"},fi={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},hi={class:"lg:col-span-1"},mi={class:"card p-6 sticky top-24 max-h-[calc(100vh-8rem)] overflow-y-auto"},vi={key:0,class:"mb-6 bg-primary-50 rounded-lg border-2 border-primary overflow-hidden"},pi={key:0,class:"p-4"},gi={class:"grid grid-cols-4 gap-1.5"},yi=["onClick"],bi=["src","alt"],xi={key:1,class:"p-4"},_i={class:"relative aspect-square rounded-lg bg-gray-200 overflow-hidden"},wi=["src","alt"],ki={class:"absolute inset-0 flex items-center justify-center"},Oi={class:"p-4 border-t border-primary/20"},Si={class:"flex items-center justify-between mb-2"},Ei={class:"font-semibold text-primary"},Fi={class:"text-sm text-gray-600"},Ci={class:"text-sm text-gray-600"},Ti={class:"text-sm text-gray-600"},$i={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg text-center text-gray-500"},Vi={key:0,class:"mt-1 text-sm text-red-600"},ji={class:"flex items-center justify-between mb-3"},Ai={key:0,class:"flex items-center space-x-2 text-xs text-gray-500"},Di={class:"space-y-2 mb-4"},Ni={class:"flex justify-between text-sm"},Ii={class:"font-medium text-gray-900"},Pi={key:0,class:"flex justify-between text-sm"},Mi={class:"text-gray-600"},Ri={class:"font-medium text-gray-900"},zi={key:1,class:"flex justify-between text-sm"},Ui={class:"text-gray-600"},qi={class:"font-medium text-gray-900"},Bi={key:2,class:"flex justify-between text-sm"},Li={class:"text-gray-600"},Zi={class:"font-medium text-gray-900"},Hi={key:3,class:"flex justify-between text-sm text-primary mt-2 pt-2 border-t border-gray-200"},Wi={class:"font-medium"},Gi={key:1,class:"flex justify-between text-sm"},Ki={class:"font-medium text-gray-900"},Yi={class:"pt-3 border-t border-gray-300"},Xi={class:"flex items-center justify-between mb-2"},Qi={class:"text-2xl font-bold text-primary"},Ji={key:0,class:"text-xs text-primary"},el={key:0},tl={key:1},rl={key:1,class:"text-xs text-gray-500"},nl={key:1,class:"p-4 bg-light rounded-lg"},sl={class:"flex items-center justify-between mb-2"},il={class:"text-2xl font-bold text-primary"},ll={key:2,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},al={class:"text-sm text-red-600"},ol={key:3,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},ul={class:"flex items-start"},dl={class:"flex-1"},cl=["disabled"],fl={key:0},hl={key:1},ml={key:4,class:"text-sm text-center text-gray-500 mt-4"},vl={class:"text-center"},pl={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},gl={class:"relative w-full h-full flex items-center justify-center p-4"},yl={class:"relative max-w-7xl max-h-full w-full h-full flex items-center justify-center"},bl=["src","alt"],xl={key:2,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm z-20"},_l={key:3,class:"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2 max-w-4xl overflow-x-auto px-4 z-20"},wl=["onClick"],kl=["src","alt"],Ol={key:0,class:"mt-1 text-sm text-red-600"},Sl={key:0,class:"mt-1 text-sm text-red-600"},El={class:"space-y-3"},Fl={key:0,class:"relative"},Cl=["src"],Tl={key:1,class:"relative"},$l=["src"],Vl={key:2,class:"mt-1 text-sm text-red-600"},jl={key:0,class:"mt-1 text-sm text-red-600"},Al={key:0,class:"mt-1 text-sm text-red-600"},Dl={key:0,class:"mt-1 text-sm text-red-600"},Nl={key:0,class:"mt-1 text-sm text-red-600"},Il={class:"flex space-x-6"},Pl={class:"flex items-center cursor-pointer"},Ml={class:"flex items-center cursor-pointer"},Rl={class:"flex items-center cursor-pointer"},zl={key:0,class:"mt-1 text-sm text-red-600"},Ul={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg"},ql={class:"text-sm text-red-600"},Bl={class:"flex space-x-3 pt-4"},Ll=["disabled"],Zl={key:0},Hl={key:1},ua={__name:"BookingRoom",props:{house:{type:Object,required:!0},rooms:{type:Array,default:()=>[]}},setup(r){const e=r,{user:t,isAuthenticated:n}=on(),s=se(null),i=se(""),a=se(!1),c=se(!1),f=se(!1),h=se(0),m=se(null),y=se(null),O=z(()=>t.value?!!(t.value.id_card_number&&t.value.id_card_issue_date&&t.value.id_card_issue_place&&t.value.permanent_address&&t.value.date_of_birth&&t.value.gender):!1),w=Kr({start_date:wt().required("Vui lòng chọn ngày bắt đầu").test("valid-date","Ngày không hợp lệ",function(v){if(!v)return!0;const l=new Date(v+"T00:00:00");return!isNaN(l.getTime())}).test("min-date","Ngày bắt đầu phải từ hôm nay trở đi",function(v){if(!v)return!0;const l=new Date;return l.setHours(0,0,0,0),new Date(v+"T00:00:00")>=l}),end_date:wt().required("Vui lòng chọn ngày kết thúc").test("valid-date","Ngày không hợp lệ",function(v){if(!v)return!0;const l=new Date(v+"T00:00:00");return!isNaN(l.getTime())}).test("min-date",function(v){if(!v)return!0;const l=this.parent.start_date,b=new Date;b.setHours(0,0,0,0);const N=new Date(v+"T00:00:00");if(l){const J=new Date(l+"T00:00:00");if(N<=J)return this.createError({message:"Ngày kết thúc phải sau ngày bắt đầu"})}else if(N<b)return this.createError({message:"Ngày kết thúc phải từ hôm nay trở đi"});return!0}),room_id:Zr().required("Vui lòng chọn phòng").test("required","Vui lòng chọn phòng",function(v){return v!=null&&v!==""}),notes:wt().nullable()}),{handleSubmit:D,values:U,setFieldValue:F,errors:_,validate:I}=Yn({validationSchema:w,initialValues:{house_id:e.house.id,room_id:null,start_date:"",end_date:"",total_price:0,discount_amount:0,notes:""}});F("house_id",e.house.id);const j=nr({house_id:e.house.id,room_id:null,start_date:"",end_date:"",total_price:0,discount_amount:0,notes:""}),k=nr({name:"",id_card_number:"",id_card_issue_date:"",id_card_issue_place:"",permanent_address:"",date_of_birth:"",gender:"",id_card_image:null},{forceFormData:!0});$e(()=>t.value,v=>{v&&(k.name=v.name||"",k.id_card_number=v.id_card_number||"",k.id_card_issue_date=v.id_card_issue_date||"",k.id_card_issue_place=v.id_card_issue_place||"",k.permanent_address=v.permanent_address||"",k.date_of_birth=v.date_of_birth||"",k.gender=v.gender||"",v.id_card_image&&y.value)},{immediate:!0});const H=z(()=>new Date().toISOString().split("T")[0]),{value:q,errorMessage:W}=Rt("start_date"),{value:Y,errorMessage:oe}=Rt("end_date"),{value:Fe}=Rt("room_id"),L=z(()=>{const v={};return e.rooms.forEach(l=>{v[l.floor]||(v[l.floor]=[]),v[l.floor].push(l)}),v}),ye=z(()=>Object.keys(L.value).sort((v,l)=>l-v)),Oe=(v,l)=>{if(!v||!l)return 0;const b=new Date(v),N=new Date(l),J=Math.abs(N-b);return Math.ceil(J/(1e3*60*60*24))+1},Ae=v=>{let l=v;const b=Math.floor(l/30);l=l%30;const N=Math.floor(l/7),J=l%7;return{fullMonths:b,fullWeeks:N,remainingDays:J}},be=(v,l)=>{if(!v||!l)return{total:0,discount:0,breakdown:null};const{fullMonths:b,fullWeeks:N,remainingDays:J}=Ae(l),we=b*30*v*.8,d=N*7*v*.9,u=J*v,g=we+d+u,x=b*30*v*.2+N*7*v*.1,T={fullMonths:b,fullWeeks:N,remainingDays:J,monthsPrice:we,weeksPrice:d,remainingPrice:u,discount:x};return{total:Math.round(g),discount:Math.round(x),breakdown:T}},xe=z(()=>{if(!s.value)return 0;const v=s.value.pricePerDay||0,l=Oe(q.value,Y.value);return l===0?0:be(v,l).total}),P=z(()=>{if(!s.value)return null;const v=s.value.pricePerDay||0,l=Oe(q.value,Y.value);return l===0?null:be(v,l).breakdown}),Ke=z(()=>{if(!s.value)return 0;const v=s.value.pricePerDay||0,l=Oe(q.value,Y.value);return l===0?0:be(v,l).discount}),_e=z(()=>Oe(q.value,Y.value)),ie=v=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(v),Be=v=>{v.status==="available"&&(s.value=v,F("room_id",v.id),j.room_id=v.id,i.value="")},Ye=()=>{j.total_price=xe.value,j.discount_amount=Ke.value};$e([()=>s.value,()=>q.value,()=>Y.value],()=>{Ye(),s.value&&F("room_id",s.value.id)},{deep:!0}),$e(()=>e.rooms,v=>{if(s.value){const l=v.find(b=>b.id===s.value.id);!l||l.status!=="available"?(s.value=null,F("room_id",null),j.room_id=null):s.value=l}},{deep:!0});const ce=se(!1);let ee=null,Re={start:null,end:null};const C=(v,l)=>{let b;const N=function(...we){const d=()=>{clearTimeout(b),v(...we)};clearTimeout(b),b=setTimeout(d,l)};return N.cancel=()=>{clearTimeout(b)},N},M=(v,l)=>{if(!v||!l)return!1;const b=new Date(v+"T00:00:00"),N=new Date(l+"T00:00:00");return!(isNaN(b.getTime())||isNaN(N.getTime())||N<=b||Re.start===v&&Re.end===l)},Z=C((v,l)=>{if(!M(v,l))return;const b=Date.now()+Math.random();ee=b;const N=s.value?.id;ce.value=!0,Re={start:v,end:l},at.reload({only:["rooms"],data:{start_date:v,end_date:l},preserveState:!0,preserveScroll:!0,onSuccess:()=>{if(ee===b&&(ce.value=!1,N)){const J=e.rooms.find(we=>we.id===N);J&&J.status==="available"?(s.value=J,F("room_id",J.id),j.room_id=J.id):(s.value=null,F("room_id",null),j.room_id=null)}},onError:()=>{ee===b&&(ce.value=!1)},onFinish:()=>{ee===b&&(ce.value=!1)}})},300);$e([()=>q.value,()=>Y.value],([v,l],[b,N])=>{if(!v||!l){if(Z.cancel(),ce.value=!1,s.value){const d=e.rooms.find(u=>u.id===s.value.id);d&&d.status!=="available"&&(s.value=null,F("room_id",null),j.room_id=null)}Re={start:null,end:null};return}if(v===b&&l===N)return;const J=new Date(v+"T00:00:00"),we=new Date(l+"T00:00:00");if(isNaN(J.getTime())||isNaN(we.getTime())||we<=J){Z.cancel(),ce.value=!1;return}Z(v,l)},{immediate:!1});const Ce=D(v=>{if(!n.value){i.value="Vui lòng đăng nhập để đặt phòng";return}if(!O.value){c.value=!0,i.value="Vui lòng cập nhật đầy đủ thông tin cá nhân trước khi đặt phòng";return}j.house_id=v.house_id,j.room_id=v.room_id,j.start_date=v.start_date,j.end_date=v.end_date,j.total_price=xe.value,j.discount_amount=Ke.value,j.notes=v.notes||"",i.value="",j.post("/booking",{preserveScroll:!1,preserveState:!1,onSuccess:()=>{},onError:l=>{if(console.error("Booking errors:",l),l.personal_info)c.value=!0,i.value=l.personal_info;else if(l.room_id)i.value=l.room_id;else if(l.message)i.value=l.message;else{const b=Object.values(l).flat();b.length>0?i.value=b[0]:i.value="Có lỗi xảy ra khi đặt phòng. Vui lòng thử lại."}}})},v=>{console.log("Validation errors:",v),console.log("Form values:",U);const l=Object.values(v).filter(Boolean);l.length>0&&(i.value=l[0]||"Vui lòng kiểm tra lại thông tin đã nhập");const b=Object.keys(v)[0];if(b){const N=document.querySelector(`[name="${b}"]`)||document.querySelector(`[data-field="${b}"]`)||document.querySelector(`input[aria-label*="${b}"]`);N&&setTimeout(()=>{N.scrollIntoView({behavior:"smooth",block:"center"}),N.focus()},100)}}),Se=v=>{v.preventDefault(),console.log("Form submitted, validating..."),console.log("Current values:",U),console.log("Selected room:",s.value),console.log("Current errors:",_),Ce(v)},fe=async v=>{const l=v.target.files[0];if(!l||!l.type.startsWith("image/"))return;const b=new FileReader;b.onload=N=>{y.value=N.target.result},b.readAsDataURL(l),k.id_card_image=l},$t=()=>{y.value=null,k.id_card_image=null,m.value&&(m.value.value="")},ct=v=>{v&&(v.preventDefault(),v.stopPropagation()),k.post("/profile/personal-info",{preserveScroll:!0,onSuccess:()=>{alert("Cập nhật thông tin cá nhân thành công!"),i.value="",c.value=!1,at.reload({only:["auth","house","rooms"]})},onError:l=>{console.error("Personal info errors:",l)}})},ft=()=>{window.history.length>1?window.history.back():at.visit("/")},tt=()=>{at.visit("/history")},ht=()=>{at.visit("/")},te=z(()=>s.value?.images?Array.isArray(s.value.images)?s.value.images.filter(v=>v&&v.trim()!==""):[]:[]),Le=(v=0)=>{te.value.length!==0&&(h.value=v>=0&&v<te.value.length?v:0,f.value=!0,document.body.style.overflow="hidden")},Te=()=>{f.value=!1,document.body.style.overflow=""},rt=()=>{te.value.length!==0&&(h.value=(h.value+1)%te.value.length)},mt=()=>{te.value.length!==0&&(h.value=h.value===0?te.value.length-1:h.value-1)},nt=v=>{v>=0&&v<te.value.length&&(h.value=v)},st=v=>{f.value&&(v.key==="Escape"?Te():v.key==="ArrowLeft"?mt():v.key==="ArrowRight"&&rt())};return Yt(()=>{window.addEventListener("keydown",st)}),nn(()=>{window.removeEventListener("keydown",st),document.body.style.overflow="",Z&&Z.cancel(),ee=null}),(v,l)=>(S(),E(Xe,null,[re(p(sn),{title:r.house?.name?`Đặt phòng - ${r.house.name}`:"Đặt phòng"},null,8,["title"]),re(un,null,{default:sr(()=>[o("div",Ws,[o("div",Gs,[o("div",Ks,[o("button",{onClick:ft,class:"flex items-center text-gray-600 hover:text-primary mb-4"},[re(p(ir),{class:"w-5 h-5 mr-2"}),l[22]||(l[22]=me(" Quay lại ",-1))]),l[23]||(l[23]=o("h1",{class:"text-4xl font-bold text-secondary mb-2"}," Chọn phòng ",-1)),o("p",Ys,A(r.house?.name),1)]),i.value?(S(),E("div",Xs,[o("div",Qs,[re(p(lr),{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),l[24]||(l[24]=o("h3",{class:"text-lg font-semibold text-red-800 mb-2"}," Lỗi ",-1)),o("p",Js,A(i.value),1),o("button",{onClick:ft,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Quay lại ")])])):B("",!0),!i.value&&r.house?(S(),E("div",ei,[o("div",ti,[o("div",ri,[o("div",ni,[l[29]||(l[29]=o("h2",{class:"text-2xl font-bold text-secondary"}," Sơ đồ phòng ",-1)),o("div",si,[ce.value?(S(),E("div",ii,[...l[25]||(l[25]=[o("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),o("span",{class:"text-sm text-gray-600"},"Đang kiểm tra...",-1)])])):(S(),E("div",li,[l[27]||(l[27]=o("div",{class:"flex items-center space-x-2"},[o("div",{class:"w-4 h-4 bg-primary rounded"}),o("span",{class:"text-sm text-gray-600"},"Phòng trống")],-1)),l[28]||(l[28]=o("div",{class:"flex items-center space-x-2"},[o("div",{class:"w-4 h-4 bg-gray-400 rounded"}),o("span",{class:"text-sm text-gray-600"},"Đã thuê")],-1)),o("div",ai,[o("div",oi,[re(p(Lt),{class:"w-2.5 h-2.5 text-secondary absolute top-0.5 left-0.5","stroke-width":"3"})]),l[26]||(l[26]=o("span",{class:"text-sm text-gray-600"},"Đã chọn",-1))])]))])]),o("div",ui,[ce.value?(S(),E("div",di,[...l[30]||(l[30]=[o("div",{class:"text-center bg-white/90 rounded-lg px-4 py-3 shadow-lg"},[o("svg",{class:"animate-spin h-6 w-6 text-primary mx-auto mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),o("p",{class:"text-sm text-gray-700 font-medium"}," Đang cập nhật trạng thái phòng... ")],-1)])])):B("",!0),(S(!0),E(Xe,null,vt(ye.value,b=>(S(),E("div",{key:b,class:Ue(["border-2 border-gray-200 rounded-xl p-6 bg-white transition-opacity duration-200",{"opacity-60":ce.value}])},[o("h3",ci,[re(p(dn),{class:"w-6 h-6 mr-2"}),me(" Tầng "+A(b),1)]),o("div",fi,[(S(!0),E(Xe,null,vt(L.value[b],N=>(S(),ln(Hs,{key:N.id,room:N,selected:s.value?.id===N.id,onSelect:Be},null,8,["room","selected"]))),128))])],2))),128))])])]),o("div",hi,[o("div",mi,[l[52]||(l[52]=o("h2",{class:"text-xl font-bold text-secondary mb-6"}," Thông tin đặt phòng ",-1)),s.value?(S(),E("div",vi,[te.value.length>0?(S(),E("div",pi,[l[32]||(l[32]=o("h3",{class:"text-sm font-semibold text-gray-700 mb-3"}," Ảnh phòng ",-1)),o("div",gi,[(S(!0),E(Xe,null,vt(te.value,(b,N)=>(S(),E("button",{key:N,onClick:J=>Le(N),class:"relative aspect-square rounded-lg overflow-hidden border-2 border-transparent hover:border-primary transition-all group"},[o("img",{src:b,alt:`Ảnh phòng ${N+1}`,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"},null,8,bi),l[31]||(l[31]=o("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"},null,-1))],8,yi))),128))])])):(S(),E("div",xi,[l[33]||(l[33]=o("h3",{class:"text-sm font-semibold text-gray-700 mb-3"}," Ảnh phòng ",-1)),o("div",_i,[o("img",{src:r.house?.image||"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800",alt:`Phòng ${s.value.roomNumber}`,class:"w-full h-full object-cover opacity-50"},null,8,wi),o("div",ki,[re(p(Sr),{class:"w-16 h-16 text-gray-400"})])])])),o("div",Oi,[o("div",Si,[o("span",Ei,"Phòng "+A(s.value.roomNumber),1),o("button",{onClick:l[0]||(l[0]=()=>{s.value=null,p(j).room_id=null}),class:"text-gray-500 hover:text-secondary"},[re(p(It),{class:"w-5 h-5"})])]),o("p",Fi," Tầng "+A(s.value.floor),1),o("p",Ci," Diện tích: "+A(s.value.area)+"m² ",1),o("p",Ti," Giá gốc: "+A(ie(s.value.pricePerDay))+"/ngày ",1)])])):(S(),E("div",$i,[...l[34]||(l[34]=[o("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),o("p",{class:"text-sm"},"Vui lòng chọn phòng",-1)])])),o("form",{onSubmit:Ie(Se,["prevent"]),class:"space-y-4"},[o("div",null,[l[35]||(l[35]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ngày bắt đầu",-1)),re(pt,{modelValue:p(q),"onUpdate:modelValue":l[1]||(l[1]=b=>et(q)?q.value=b:null),min:H.value,placeholder:"dd/mm/yyyy",error:p(W)||p(j).errors.start_date,required:""},null,8,["modelValue","min","error"])]),o("div",null,[l[36]||(l[36]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ngày kết thúc",-1)),re(pt,{modelValue:p(Y),"onUpdate:modelValue":l[2]||(l[2]=b=>et(Y)?Y.value=b:null),min:p(q)||H.value,placeholder:"dd/mm/yyyy",error:p(oe)||p(j).errors.end_date,required:""},null,8,["modelValue","min","error"])]),o("div",null,[l[37]||(l[37]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ghi chú",-1)),ze(o("textarea",{"onUpdate:modelValue":l[3]||(l[3]=b=>p(U).notes=b),onInput:l[4]||(l[4]=b=>p(F)("notes",b.target.value)),class:"input-field",rows:"3",placeholder:"Yêu cầu đặc biệt..."},null,544),[[lt,p(U).notes]]),p(j).errors.notes?(S(),E("p",Vi,A(p(j).errors.notes),1)):B("",!0)]),s.value&&p(q)&&p(Y)?(S(),E("div",{key:0,class:Ue(["p-4 bg-light rounded-lg border-2 border-primary/20 transition-opacity duration-200",{"opacity-60":ce.value}])},[o("div",ji,[l[39]||(l[39]=o("h3",{class:"text-sm font-semibold text-gray-700"}," Tóm tắt đặt phòng ",-1)),ce.value?(S(),E("div",Ai,[...l[38]||(l[38]=[o("svg",{class:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),o("span",null,"Đang cập nhật...",-1)])])):B("",!0)]),o("div",Di,[o("div",Ni,[l[40]||(l[40]=o("span",{class:"text-gray-600"},"Tổng số ngày thuê:",-1)),o("span",Ii,A(_e.value)+" ngày",1)]),P.value?(S(),E(Xe,{key:0},[P.value.fullMonths>0?(S(),E("div",Pi,[o("span",Mi,A(P.value.fullMonths)+" tháng ("+A(P.value.fullMonths*30)+" ngày): ",1),o("span",Ri,A(ie(P.value.monthsPrice)),1)])):B("",!0),P.value.fullWeeks>0?(S(),E("div",zi,[o("span",Ui,A(P.value.fullWeeks)+" tuần ("+A(P.value.fullWeeks*7)+" ngày): ",1),o("span",qi,A(ie(P.value.weeksPrice)),1)])):B("",!0),P.value.remainingDays>0?(S(),E("div",Bi,[o("span",Li,A(P.value.remainingDays)+" ngày: ",1),o("span",Zi,A(ie(P.value.remainingPrice)),1)])):B("",!0),P.value.discount>0?(S(),E("div",Hi,[l[41]||(l[41]=o("span",null,"Giảm giá:",-1)),o("span",Wi,"-"+A(ie(P.value.discount)),1)])):B("",!0)],64)):(S(),E("div",Gi,[l[42]||(l[42]=o("span",{class:"text-gray-600"},"Giá gốc:",-1)),o("span",Ki,A(ie((s.value?.pricePerDay||0)*_e.value)),1)]))]),o("div",Yi,[o("div",Xi,[l[43]||(l[43]=o("span",{class:"text-gray-700 font-semibold"},"Tổng tiền:",-1)),o("span",Qi,A(ie(xe.value)),1)]),P.value&&P.value.discount>0?(S(),E("p",Ji,[me(" * Đã giảm 20% cho "+A(P.value.fullMonths)+" tháng ("+A(P.value.fullMonths*30)+" ngày) ",1),P.value.fullWeeks>0?(S(),E("span",el,"và 10% cho "+A(P.value.fullWeeks)+" tuần ("+A(P.value.fullWeeks*7)+" ngày)",1)):B("",!0),l[44]||(l[44]=me(". ",-1)),P.value.remainingDays>0?(S(),E("span",tl,A(P.value.remainingDays)+" ngày lẻ tính theo giá gốc.",1)):B("",!0)])):_e.value>0&&_e.value<7?(S(),E("p",rl," * Chưa đủ điều kiện giảm giá (cần thuê từ 7 ngày trở lên) ")):B("",!0),l[45]||(l[45]=o("p",{class:"text-xs text-gray-500 mt-1"}," * Đã bao gồm thuế VAT ",-1))])],2)):s.value?(S(),E("div",nl,[o("div",sl,[l[46]||(l[46]=o("span",{class:"text-gray-600"},"Tổng tiền",-1)),o("span",il,A(ie(xe.value)),1)]),l[47]||(l[47]=o("p",{class:"text-xs text-gray-500"}," * Vui lòng điền đầy đủ thông tin để xem chi tiết ",-1))])):B("",!0),i.value||p(j).errors.room_id||p(j).errors.personal_info?(S(),E("div",ll,[o("p",al,A(i.value||p(j).errors.room_id||p(j).errors.personal_info),1),p(j).errors.personal_info||!O.value&&p(n)?(S(),E("button",{key:0,type:"button",onClick:l[5]||(l[5]=b=>c.value=!0),class:"mt-2 text-sm text-primary hover:text-secondary font-medium underline"}," Cập nhật thông tin ngay ")):B("",!0)])):B("",!0),p(n)&&!O.value&&!i.value?(S(),E("div",ol,[o("div",ul,[re(p(lr),{class:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),o("div",dl,[l[48]||(l[48]=o("p",{class:"text-sm font-medium text-yellow-800 mb-1"}," Thông tin cá nhân chưa đầy đủ ",-1)),l[49]||(l[49]=o("p",{class:"text-sm text-yellow-700 mb-2"}," Vui lòng cập nhật thông tin căn cước công dân, ngày cấp CCCD, nơi cấp CCCD, địa chỉ thường trú, ngày sinh và giới tính để đặt phòng. ",-1)),o("button",{type:"button",onClick:l[6]||(l[6]=b=>c.value=!0),class:"text-sm text-yellow-800 hover:text-yellow-900 font-medium underline"}," Cập nhật thông tin ngay ")])])])):B("",!0),o("button",{type:"submit",disabled:!s.value||p(j).processing||!p(n)||!O.value,class:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[p(j).processing?(S(),E("span",hl,"Đang xử lý...")):(S(),E("span",fl,"Xác nhận đặt phòng"))],8,cl),p(n)?B("",!0):(S(),E("p",ml,[re(p(an),{href:"/login",class:"text-primary hover:text-secondary font-medium"},{default:sr(()=>[...l[50]||(l[50]=[me(" Đăng nhập ",-1)])]),_:1}),l[51]||(l[51]=me(" để đặt phòng ",-1))]))],32)])])])):B("",!0)]),a.value?(S(),E("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:l[8]||(l[8]=b=>a.value=!1)},[o("div",{class:"bg-white rounded-2xl p-8 max-w-md w-full",onClick:l[7]||(l[7]=Ie(()=>{},["stop"]))},[o("div",vl,[o("div",pl,[re(p(Lt),{class:"w-8 h-8 text-primary"})]),l[53]||(l[53]=o("h3",{class:"text-2xl font-bold text-secondary mb-2"}," Đặt phòng thành công! ",-1)),l[54]||(l[54]=o("p",{class:"text-gray-600 mb-6"}," Chúng tôi sẽ liên hệ với bạn sớm nhất ",-1)),o("div",{class:"space-y-3"},[o("button",{onClick:tt,class:"w-full btn-primary"}," Xem lịch sử thuê "),o("button",{onClick:ht,class:"w-full btn-outline"}," Về trang chủ ")])])])])):B("",!0),f.value&&te.value.length>0?(S(),E("div",{key:1,class:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",onClick:Ie(Te,["self"])},[o("div",gl,[o("button",{onClick:Te,class:"absolute top-4 right-4 z-20 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all"},[re(p(It),{class:"w-6 h-6"})]),te.value.length>1?(S(),E("button",{key:0,onClick:Ie(mt,["stop"]),class:"absolute left-4 z-20 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all"},[re(p(ir),{class:"w-6 h-6"})])):B("",!0),te.value.length>1?(S(),E("button",{key:1,onClick:Ie(rt,["stop"]),class:"absolute right-4 z-20 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all"},[re(p(cn),{class:"w-6 h-6"})])):B("",!0),o("div",yl,[o("img",{src:te.value[h.value],alt:`Ảnh phòng ${h.value+1}`,class:"max-w-full max-h-full object-contain"},null,8,bl)]),te.value.length>1?(S(),E("div",xl,A(h.value+1)+" / "+A(te.value.length),1)):B("",!0),te.value.length>1?(S(),E("div",_l,[(S(!0),E(Xe,null,vt(te.value,(b,N)=>(S(),E("button",{key:N,onClick:Ie(J=>nt(N),["stop"]),class:Ue(["flex-shrink-0 w-16 h-16 rounded overflow-hidden border-2 transition-all",h.value===N?"border-white":"border-white/30 hover:border-white/60"])},[o("img",{src:b,alt:`Ảnh ${N+1}`,class:"w-full h-full object-cover"},null,8,kl)],10,wl))),128))])):B("",!0)])])):B("",!0),c.value?(S(),E("div",{key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:l[21]||(l[21]=Ie(b=>c.value=!1,["self"]))},[o("div",{class:"bg-white rounded-2xl p-6 max-w-xl w-full max-h-[90vh] overflow-y-auto",onClick:l[20]||(l[20]=Ie(()=>{},["stop"]))},[l[70]||(l[70]=o("div",{class:"mb-6"},[o("h3",{class:"text-2xl font-bold text-secondary mb-2"}," Cập nhật thông tin cá nhân "),o("p",{class:"text-gray-600 text-sm"}," Vui lòng điền đầy đủ thông tin để tiếp tục đặt phòng ")],-1)),o("form",{onSubmit:l[19]||(l[19]=Ie(b=>ct(b),["prevent"])),class:"space-y-4"},[o("div",null,[l[55]||(l[55]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Họ và tên "),o("span",{class:"text-red-500"},"*")],-1)),ze(o("input",{"onUpdate:modelValue":l[9]||(l[9]=b=>p(k).name=b),type:"text",class:"input-field",placeholder:"Nhập họ và tên",required:""},null,512),[[lt,p(k).name]]),p(k).errors.name?(S(),E("p",Ol,A(p(k).errors.name),1)):B("",!0)]),o("div",null,[l[56]||(l[56]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Ngày sinh "),o("span",{class:"text-red-500"},"*")],-1)),re(pt,{modelValue:p(k).date_of_birth,"onUpdate:modelValue":l[10]||(l[10]=b=>p(k).date_of_birth=b),max:H.value,placeholder:"dd/mm/yyyy",required:""},null,8,["modelValue","max"]),p(k).errors.date_of_birth?(S(),E("p",Sl,A(p(k).errors.date_of_birth),1)):B("",!0)]),o("div",null,[l[59]||(l[59]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Ảnh căn cước công dân "),o("span",{class:"text-red-500"},"*")],-1)),o("div",El,[y.value?(S(),E("div",Fl,[o("img",{src:y.value,alt:"Ảnh CCCD",class:"w-full max-w-md h-auto rounded-lg border-2 border-gray-300"},null,8,Cl),o("button",{type:"button",onClick:$t,class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600"},[re(p(It),{class:"w-5 h-5"})])])):p(t)?.id_card_image?(S(),E("div",Tl,[o("img",{src:p(t).id_card_image,alt:"Ảnh CCCD hiện tại",class:"w-full max-w-md h-auto rounded-lg border-2 border-gray-300"},null,8,$l),l[57]||(l[57]=o("p",{class:"mt-2 text-xs text-gray-500"}," Ảnh CCCD hiện tại ",-1))])):B("",!0),o("input",{ref_key:"idCardImageInput",ref:m,type:"file",accept:"image/*",onChange:fe,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-secondary"},null,544),p(k).errors.id_card_image?(S(),E("p",Vl,A(p(k).errors.id_card_image),1)):B("",!0),l[58]||(l[58]=o("p",{class:"text-xs text-gray-500"}," Tải lên ảnh căn cước công dân. ",-1))])]),o("div",null,[l[60]||(l[60]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Số căn cước công dân "),o("span",{class:"text-red-500"},"*")],-1)),ze(o("input",{"onUpdate:modelValue":l[11]||(l[11]=b=>p(k).id_card_number=b),type:"text",class:"input-field",placeholder:"Nhập số căn cước công dân",required:""},null,512),[[lt,p(k).id_card_number]]),p(k).errors.id_card_number?(S(),E("p",jl,A(p(k).errors.id_card_number),1)):B("",!0)]),o("div",null,[l[61]||(l[61]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Ngày cấp CCCD "),o("span",{class:"text-red-500"},"*")],-1)),re(pt,{modelValue:p(k).id_card_issue_date,"onUpdate:modelValue":l[12]||(l[12]=b=>p(k).id_card_issue_date=b),max:H.value,placeholder:"dd/mm/yyyy",required:""},null,8,["modelValue","max"]),p(k).errors.id_card_issue_date?(S(),E("p",Al,A(p(k).errors.id_card_issue_date),1)):B("",!0)]),o("div",null,[l[62]||(l[62]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Nơi cấp CCCD "),o("span",{class:"text-red-500"},"*")],-1)),ze(o("input",{"onUpdate:modelValue":l[13]||(l[13]=b=>p(k).id_card_issue_place=b),type:"text",list:"id-card-issue-places",class:"input-field",placeholder:"Chọn hoặc nhập nơi cấp CCCD",required:""},null,512),[[lt,p(k).id_card_issue_place]]),l[63]||(l[63]=o("datalist",{id:"id-card-issue-places"},[o("option",{value:"Cục Cảnh sát quản lý hành chính về trật tự xã hội"}," Cục Cảnh sát quản lý hành chính về trật tự xã hội "),o("option",{value:"Cục Cảnh sát đăng ký quản lý cư trú và dữ liệu Quốc gia về dân cư"}," Cục Cảnh sát đăng ký quản lý cư trú và dữ liệu Quốc gia về dân cư ")],-1)),p(k).errors.id_card_issue_place?(S(),E("p",Dl,A(p(k).errors.id_card_issue_place),1)):B("",!0),l[64]||(l[64]=o("p",{class:"mt-1 text-xs text-gray-500"}," Bạn có thể chọn từ danh sách hoặc nhập tùy chỉnh ",-1))]),o("div",null,[l[65]||(l[65]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Địa chỉ thường trú "),o("span",{class:"text-red-500"},"*")],-1)),ze(o("textarea",{"onUpdate:modelValue":l[14]||(l[14]=b=>p(k).permanent_address=b),class:"input-field",rows:"3",placeholder:"Nhập địa chỉ thường trú",required:""},null,512),[[lt,p(k).permanent_address]]),p(k).errors.permanent_address?(S(),E("p",Nl,A(p(k).errors.permanent_address),1)):B("",!0)]),o("div",null,[l[69]||(l[69]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[me(" Giới tính "),o("span",{class:"text-red-500"},"*")],-1)),o("div",Il,[o("label",Pl,[ze(o("input",{type:"radio","onUpdate:modelValue":l[15]||(l[15]=b=>p(k).gender=b),value:"male",class:"w-4 h-4 text-primary border-gray-300 focus:ring-primary",required:""},null,512),[[Nt,p(k).gender]]),l[66]||(l[66]=o("span",{class:"ml-2 text-gray-700"},"Nam",-1))]),o("label",Ml,[ze(o("input",{type:"radio","onUpdate:modelValue":l[16]||(l[16]=b=>p(k).gender=b),value:"female",class:"w-4 h-4 text-primary border-gray-300 focus:ring-primary"},null,512),[[Nt,p(k).gender]]),l[67]||(l[67]=o("span",{class:"ml-2 text-gray-700"},"Nữ",-1))]),o("label",Rl,[ze(o("input",{type:"radio","onUpdate:modelValue":l[17]||(l[17]=b=>p(k).gender=b),value:"other",class:"w-4 h-4 text-primary border-gray-300 focus:ring-primary"},null,512),[[Nt,p(k).gender]]),l[68]||(l[68]=o("span",{class:"ml-2 text-gray-700"},"Khác",-1))])]),p(k).errors.gender?(S(),E("p",zl,A(p(k).errors.gender),1)):B("",!0)]),p(k).errors.message?(S(),E("div",Ul,[o("p",ql,A(p(k).errors.message),1)])):B("",!0),o("div",Bl,[o("button",{type:"button",onClick:l[18]||(l[18]=b=>c.value=!1),class:"flex-1 btn-outline"}," Hủy "),o("button",{type:"button",onClick:ct,disabled:p(k).processing,class:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[p(k).processing?(S(),E("span",Hl,"Đang xử lý...")):(S(),E("span",Zl,"Cập nhật"))],8,Ll)])],32)])])):B("",!0)])]),_:1})],64))}};export{ua as default};
