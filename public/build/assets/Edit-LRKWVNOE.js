import{p as U,r as y,c as d,a as m,b as s,h as C,w as c,d as e,e as b,q as v,f,o as u,t as h,k as N,g as o,v as a,s as _,j as D,F as S}from"./app-osEW8NDv.js";import{_ as T}from"./AdminLayout-aNMeXmBa.js";import{r as j}from"./ChevronLeftIcon-BR8-nT6c.js";import{r as F}from"./PhotoIcon-R2b1vxhe.js";/* empty css            */import"./FlashToaster-AYY5HN4c.js";import"./MapPinIcon-BKuAuRil.js";import"./CalendarIcon-CPDdy-lK.js";import"./BuildingOfficeIcon-BGVcnTZ6.js";const $={class:"space-y-6"},H={class:"flex items-center justify-between"},I={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},M={class:"text-green-800"},P={key:1,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},B={class:"text-red-800"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"md:col-span-2"},q={class:"md:col-span-2"},E={class:"md:col-span-2"},L={class:"md:col-span-2"},R={class:"flex items-center"},A={class:"space-y-4"},J={class:"flex items-center"},K={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"md:col-span-2"},z={class:"md:col-span-2"},W={class:"md:col-span-2"},X={key:0,class:"mb-4"},Y=["src"],Z={key:1,class:"mb-4"},tt=["src"],et={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-primary transition-colors"},rt={class:"space-y-1 text-center"},st={class:"flex text-sm text-gray-600"},nt={class:"relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-primary-700 focus-within:outline-none"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ot={class:"flex justify-end space-x-4 pt-6 border-t"},it=["disabled"],at={key:0},dt={key:1},vt={__name:"Edit",props:{banner:{type:Object,required:!0}},setup(g){const l=g,r=U({title:l.banner.title||"",description:l.banner.description||"",image:null,link:l.banner.link||"",order:l.banner.order||0,is_active:l.banner.is_active??!0,start_date:l.banner.start_date?new Date(l.banner.start_date).toISOString().slice(0,16):"",end_date:l.banner.end_date?new Date(l.banner.end_date).toISOString().slice(0,16):"",show_text:l.banner.show_text??!1,text_title:l.banner.text_title||"",text_subtitle:l.banner.text_subtitle||"",text_line1:l.banner.text_line1||"",text_line2:l.banner.text_line2||"",text_line3:l.banner.text_line3||"",text_position:l.banner.text_position||"center"}),x=y(null),p=y(null),w=i=>{const t=i.target.files[0];if(t){r.image=t;const n=new FileReader;n.onload=V=>{p.value=V.target.result},n.readAsDataURL(t)}else r.image=null,p.value=null},k=()=>{const i={title:r.title,description:r.description,link:r.link,order:r.order,is_active:r.is_active,start_date:r.start_date,end_date:r.end_date,show_text:r.show_text,text_title:r.text_title,text_subtitle:r.text_subtitle,text_line1:r.text_line1,text_line2:r.text_line2,text_line3:r.text_line3,text_position:r.text_position};r.image&&r.image instanceof File&&(i.image=r.image),r.transform(()=>i).post(`/admin/banners/${l.banner.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p.value=null,x.value&&(x.value.value=""),r.image=null},onError:t=>{console.error("Update errors:",t)}})};return(i,t)=>(u(),d(S,null,[m(s(C),{title:"Chỉnh sửa banner"}),m(T,{title:"Chỉnh sửa banner"},{default:c(()=>[e("div",$,[e("div",H,[e("div",null,[m(s(v),{href:"/admin/banners",class:"text-primary hover:text-primary-600 mb-2 inline-flex items-center text-sm"},{default:c(()=>[m(s(j),{class:"h-4 w-4 mr-1"}),t[12]||(t[12]=f(" Quay lại danh sách ",-1))]),_:1}),t[13]||(t[13]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Chỉnh sửa slider",-1))])]),i.$page.props.flash?.success?(u(),d("div",I,[e("p",M,h(i.$page.props.flash.success),1)])):b("",!0),i.$page.props.flash?.error?(u(),d("div",P,[e("p",B,h(i.$page.props.flash.error),1)])):b("",!0),e("form",{onSubmit:N(k,["prevent"]),class:"bg-white rounded-lg shadow-sm p-6 space-y-6"},[e("div",null,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thông tin cơ bản",-1)),e("div",G,[e("div",O,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Tiêu đề "),e("span",{class:"text-red-500"},"*")],-1)),o(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(r).title=n),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập tiêu đề banner"},null,512),[[a,s(r).title]])]),e("div",q,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mô tả",-1)),o(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>s(r).description=n),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập mô tả banner..."},null,512),[[a,s(r).description]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Thứ tự hiển thị",-1)),o(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s(r).order=n),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0"},null,512),[[a,s(r).order,void 0,{number:!0}]])]),e("div",E,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Link (URL)",-1)),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s(r).link=n),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"https://example.com"},null,512),[[a,s(r).link]])]),e("div",L,[e("label",R,[o(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>s(r).is_active=n),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[_,s(r).is_active]]),t[18]||(t[18]=e("span",{class:"ml-2 text-sm text-gray-700"},"Kích hoạt banner",-1))])])])]),e("div",null,[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Text Overlay (Chữ trên slider)",-1)),e("div",A,[e("div",null,[e("label",J,[o(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s(r).show_text=n),type:"checkbox",class:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"},null,512),[[_,s(r).show_text]]),t[20]||(t[20]=e("span",{class:"ml-2 text-sm text-gray-700"},"Hiển thị chữ trên slider",-1))])]),s(r).show_text?(u(),d("div",K,[e("div",Q,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dòng 1 (chữ nhỏ)",-1)),o(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>s(r).text_line1=n),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập dòng 1 (chữ nhỏ)"},null,512),[[a,s(r).text_line1]])]),e("div",z,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dòng 2 (chữ to)",-1)),o(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>s(r).text_line2=n),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập dòng 2 (chữ to)"},null,512),[[a,s(r).text_line2]])]),e("div",W,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dòng 3 (chữ nhỏ)",-1)),o(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>s(r).text_line3=n),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nhập dòng 3 (chữ nhỏ)"},null,512),[[a,s(r).text_line3]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vị trí chữ",-1)),o(e("select",{"onUpdate:modelValue":t[9]||(t[9]=n=>s(r).text_position=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[24]||(t[24]=[e("option",{value:"left"},"Trái",-1),e("option",{value:"center"},"Giữa",-1),e("option",{value:"right"},"Phải",-1)])],512),[[D,s(r).text_position]])])])):b("",!0)])]),e("div",null,[t[33]||(t[33]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Hình ảnh",-1)),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hình ảnh banner",-1)),g.banner.image&&!p.value?(u(),d("div",X,[e("img",{src:g.banner.image,alt:"Current banner",class:"max-w-full h-64 object-contain rounded-lg border border-gray-300"},null,8,Y),t[27]||(t[27]=e("p",{class:"text-sm text-gray-500 mt-2"},"Hình ảnh hiện tại",-1))])):b("",!0),p.value?(u(),d("div",Z,[e("img",{src:p.value,alt:"Preview",class:"max-w-full h-64 object-contain rounded-lg border border-gray-300"},null,8,tt),t[28]||(t[28]=e("p",{class:"text-sm text-gray-500 mt-2"},"Hình ảnh mới",-1))])):b("",!0),e("div",et,[e("div",rt,[m(s(F),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",st,[e("label",nt,[t[29]||(t[29]=e("span",null,"Chọn file mới",-1)),e("input",{ref_key:"fileInput",ref:x,type:"file",accept:"image/*",class:"sr-only",onChange:w},null,544)]),t[30]||(t[30]=e("p",{class:"pl-1"},"hoặc kéo thả vào đây",-1))]),t[31]||(t[31]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF tối đa 5MB",-1))])])])]),e("div",null,[t[36]||(t[36]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Thời gian hiển thị (Tùy chọn)",-1)),e("div",lt,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ngày bắt đầu",-1)),o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>s(r).start_date=n),type:"datetime-local",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[a,s(r).start_date]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ngày kết thúc",-1)),o(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>s(r).end_date=n),type:"datetime-local",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"},null,512),[[a,s(r).end_date]])])])]),e("div",ot,[m(s(v),{href:"/admin/banners",class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:c(()=>[...t[37]||(t[37]=[f(" Hủy ",-1)])]),_:1}),e("button",{type:"submit",disabled:s(r).processing,class:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s(r).processing?(u(),d("span",dt,"Đang cập nhật...")):(u(),d("span",at,"Cập nhật slider"))],8,it)])],32)])]),_:1})],64))}};export{vt as default};
